!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.CS_builder=e()}}(function(){var define;return function e(t,n,i){function o(r,a){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return o(n?n:e)},u,u.exports,e,t,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){t.exports=Cornerstone.Mn.Behavior.extend({defaults:{message:cs.l18n("confirm-message"),subtext:!1,yep:cs.l18n("confirm-yep"),nope:cs.l18n("confirm-nope"),classes:[]},initialize:function(){this.listenTo(this.view,"confirm:warn:open",this.open),this.listenTo(cs.confirm,"accept",this.accept),this.listenTo(cs.confirm,"decline",this.decline)},events:function(){var e={},t=this.options.ui||"confirmWarn";return e["click @ui."+t]="open",e},open:function(){cs.confirm.trigger("open",_.extend(this.options,{view:this.view}))},accept:function(e){e==this.view.cid&&this.view.triggerMethod("confirm:warn:accept")},decline:function(e){e==this.view.cid&&this.view.triggerMethod("confirm:warn:decline")}})},{}],2:[function(e,t,n){t.exports=Cornerstone.Mn.Behavior.extend({initialize:function(){this.listenTo(this.view,"confirm:open",this.open)},events:function(){var e={},t=this.options.ui||"confirm";return e["click @ui."+t]="open",e},open:function(){cs.confirm.trigger("open",_.extend(this.options,{allowQuickConfirm:this.view.canQuickConfirm,accept:_.bind(this.accept,this),decline:_.bind(this.decline,this)}),this.view)},accept:function(){this.view.triggerMethod("confirm:accept")},decline:function(){this.view.triggerMethod("confirm:decline")}})},{}],3:[function(e,t,n){t.exports.Confirm=e("./confirm"),t.exports.ConfirmWarn=e("./confirm-warn")},{"./confirm":2,"./confirm-warn":1}],4:[function(e,t,n){var i=e("mousetrap");e("mousetrap/plugins/global-bind/mousetrap-global-bind"),Cornerstone.Vendor.Mousetrap=i,Cornerstone.Vendor.NProgress=e("nprogress"),Cornerstone.Vendor.dragula=e("../vendor/dragula"),e("perfect-scrollbar/jquery")(Backbone.$),e("../vendor/pointer-events-polyfill"),e("../vendor/rgbaster"),e("../vendor/jquery.growl"),e("../vendor/jquery.visible"),Cornerstone.Vendor.HTMLHint=e("../vendor/htmlhint").HTMLHint,e("./utility/jquery.shadow-height"),e("./utility/string-replace-all"),cs.registerComponents(e("./components")),cs.updateConfig(csBuilderData),cs.updateRegistry({start:["mn-extensions","template-loader","view-loader","model-loader","keybindings","builder"],editor:["editor","post-handler","options","navigator","element-pane","template-manager","layout","layout-section","layout-templates","inspector","settings","skeleton","element-manager"],preview:["preview","render-queue"]})},{"../vendor/dragula":121,"../vendor/htmlhint":122,"../vendor/jquery.growl":123,"../vendor/jquery.visible":124,"../vendor/pointer-events-polyfill":125,"../vendor/rgbaster":126,"./components":25,"./utility/jquery.shadow-height":29,"./utility/string-replace-all":31,mousetrap:135,"mousetrap/plugins/global-bind/mousetrap-global-bind":136,nprogress:137,"perfect-scrollbar/jquery":138}],5:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data=Backbone.Radio.channel("cs:data"),cs.extra=Backbone.Radio.channel("cs:extra"),cs.observer=Backbone.Radio.channel("cs:observer"),cs.tooltips=Backbone.Radio.channel("cs:tooltips"),cs.search=Backbone.Radio.channel("cs:search"),cs.confirm=Backbone.Radio.channel("cs:confirm"),cs.message=Backbone.Radio.channel("cs:message"),this.cs.loadComponents(this.cs.config("isPreview")?"preview":"editor"),this.browserDetection(),document.onmousemove=function(e){cs.mouse=_.pick(e,"clientX","clientY","pageX","pageY")}},browserDetection:function(){var e=Cornerstone.Vendor.bowser;e.msie&&Backbone.$("body").addClass("cs-browser-msie cs-browser-msie-"+parseInt(e.version)),e.msedge&&Backbone.$("body").addClass("cs-browser-msedge cs-browser-msedge-"+parseInt(e.version))}})},{}],6:[function(e,t,n){t.exports=Cornerstone.Component.extend({bindings:{ark:"up up down down left right left right b a enter"},initialize:function(e){cs.keybind=Backbone.Radio.channel("cs:keybind"),this.listenTo(cs.events,"editor:init",this.setup),this.listenTo(cs.events,"preview:iframe:reloaded",this.setup),this.common()},setup:function(){this.listenTo(cs.global,"keybind",function(e){cs.keybind.trigger(e)}),this.bindings=_.extend(cs.config("keybindings"),this.bindings),_.each(this.bindings,function(e,t){var n=void 0,i=["keypress","keyup","keydown"];_.each(i,function(t){0==e.indexOf(t+":")&&(n=t,e=e.replace(t+":",""))}),Cornerstone.Vendor.Mousetrap.bindGlobal(e,function(){cs.global.trigger("keybind",t)},n)})},common:function(){this.listenTo(cs.keybind,"delete-confirm",function(){cs.data.reply("delete:confirm:key",!0),cs.events.trigger("delete:confirm:key",!0)}),this.listenTo(cs.keybind,"delete-release",function(){cs.data.reply("delete:confirm:key",!1),cs.events.trigger("delete:confirm:key",!1)})}})},{}],7:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.Behaviors=e("../../behaviors"),Cornerstone.Mn.Behaviors.behaviorsLookup=_.bind(function(){return this.Behaviors},this)}})},{"../../behaviors":3}],8:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){},modelLookup:function(e){return this.Models[e]||this.Models.Base},collectionLookup:function(e){return this.Collections[e]||this.Collections.Base}})},{}],9:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.render=this,this.cache={},this.jobs={},this.timing={};var e=parseInt(cs.config("remoteRenderDelay"),10);this.run=_.debounce(_.bind(this.run,this),e);var t=setTimeout(_.bind(function(){this.trigger("primed")},this),2*e);this.once("add",function(){clearTimeout(t)})},onQueue:function(e){this.trigger("add",e),this.queue(e.cid,e.definition.get("flags")._v,e.toJSON(),function(t){this.cache[e.cid]=t,e.trigger("remote:render")})},preRender:function(e){var t="new:"+e;if(!this.cache[t]){var n=cs.elementLibrary.lookup(e),i=new Cornerstone.Models.Element({_type:e}),o=i.toJSON();delete i,this.queue(t,n.get("flags")._v,o,function(e){this.cache[t]=e})}},shadow:function(e,t){var n=this.cache[t];n&&(this.cache[e.cid]=_.clone(n))},getCache:function(e){var t=this.cache[e.cid];return t||(this.triggerMethod("queue",e),t=cs.template("loading")),t},queue:function(e,t,n,i){var o=Date.now();this.timing[e]=o,this.jobs[e]={data:n,provider:t,ts:o,callback:i},this.run()},run:function(e){if(!e){var t=_.map(this.jobs,function(e,t){return{jobID:t,ts:e.ts,provider:e.provider,data:e.data||{}}});e={post_id:cs.post.get("post_id"),batch:t},(cs.raw_markup||top&&top.cs&&top.cs.raw_markup)&&(e.raw_markup=!0),this.registeredJobs=_.clone(this.jobs),this.jobs={}}cs.ajax("cs_render_element",e,{success:_.bind(function(e,t){Cornerstone.serial(_.map(e.scripts,function(e,t){return function(n){cs.preview.trigger("late:enqueue",t,e.tag,e.src,n)}},this).concat(_.map(e.jobs,function(e,t){return _.bind(function(n){return e.ts<this.timing[t]?void n():(0==e.markup.indexOf("%%TMPL%%")&&(e.markup=e.markup.replace("%%TMPL%%",""),e.markup=_.template(e.markup)),""==e.markup&&(e.markup=cs.template("empty-element")),this.registeredJobs[t]&&!this.jobs[t]&&(this.registeredJobs[t].callback.call(this,e.markup),delete this.registeredJobs[t]),void n())},this)},this))).done(_.bind(function(e){this.trigger("primed"),e&&console.log(e)},this))},this),error:_.bind(function(t){return this.retry||(this.retry=!0,this.run(e),console.warn("Could not reach render endpoint. Attempting fallback...")),"0"==t.message?void cs.warn("Invalid render response. Check for PHP errors, or that the user is logged in."):void cs.warn(t.message)},this)})},isRunning:function(){return _.keys(this.registeredJobs).length>0}})},{}],10:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.cs.loadTemplates(e(this.cs.Config.isPreview?"../../../tmp/templates-elements.js":"../../../tmp/templates-builder.js")),this.listenTo(cs.events,"editor:init",this.populateIcons)},populateIcons:function(){cs.config("fontAwesome");var e={};_.each(_.pairs(cs.Config.fontAwesome),function(t){e[t[1]]=e[t[1]]||new Array,e[t[1]].push(t[0])}),this.icons=e,cs.data.reply("get:icons",this.icons)}})},{"../../../tmp/templates-builder.js":118,"../../../tmp/templates-elements.js":119}],11:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.listenTo(cs.events,"editor:init",this.registerControlViews),this.listenTo(cs.events,"editor:init",this.registerSkeletonViews),this.listenTo(cs.events,"preview:init",this.registerElementViews)},registerElementViews:function(){window.Cornerstone.ElementViews={Base:e("../../views/preview/base")},_.extend(window.Cornerstone.ElementViews,e("../../views/preview")),cs.events.trigger("register:element:views")},registerSkeletonViews:function(){window.Cornerstone.SkeletonViews={Base:e("../../views/skeleton/base")},_.extend(window.Cornerstone.SkeletonViews,e("../../views/skeleton")),cs.events.trigger("register:skeleton:views")},registerControlViews:function(){window.Cornerstone.ControlViews={Base:e("../../views/controls/base")},_.extend(window.Cornerstone.ControlViews,e("../../views/controls")),cs.events.trigger("register:control:views")},elementLookup:function(e){return Cornerstone.ElementViews[e]||Cornerstone.ElementViews.Base},skeletonLookup:function(e){return Cornerstone.SkeletonViews[e]||Cornerstone.SkeletonViews.Base}})},{"../../views/controls":46,"../../views/controls/base":32,"../../views/preview":103,"../../views/preview/base":97,"../../views/skeleton":115,"../../views/skeleton/base":113}],12:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(e){cs.global=Backbone.Radio.channel("cs:remote"),this.listenToOnce(cs.global,"preview:primed",this.primed),this.listenTo(cs.global,"ajax:fallback",function(e){cs.fallbackAjax=e}),Backbone.$(window).load(_.bind(this.loadView,this)),Backbone.$("#preview-frame").load(_.bind(this.loadIFrame,this)),Backbone.$(window).resize(function(e){cs.events.trigger("editor:resize",e)}),cs.events.trigger("editor:init")},primed:function(t){this.clearPreloader(),e("../../utility/custom-media-manager"),cs.global.reply("editor:ready",!0),cs.global.trigger("editor:ready"),t&&cs.message.trigger("notice",cs.l18n("preview-late"))},loadView:function(){var t=e("../../views/main/editor");this.view=new t({el:"#editor"}),this.view.render()},loadIFrame:function(){var e=document.getElementById("preview-frame").contentWindow;return e.cs&&e.cs.preview?void e.cs.preview.trigger("iframe:ready",this,cs):(console.log("Unable to initialize preview. iFrame failed to load."),void _.defer(function(){cs.global.trigger("preview:primed"),cs.global.trigger("preview:failure",cs.l18n("preview-failure1"))}))},clearPreloader:function(){$preloader=Backbone.$("#preloader").addClass("cs-preloader-fade").one("transitionend",function(){$preloader.remove()}),_.delay(function(){$preloader&&$preloader.remove()},2e3)}})},{"../../utility/custom-media-manager":27,"../../views/main/editor":89}],13:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.elementLibrary.registerContext("builder",this.elementFilter)},elementFilter:function(e){var t=e.get("flags");return 0==e.get("active")||!_.contains(["builder","all"],t.context)||t.child?!1:!0}})},{}],14:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.listenTo(cs.global,"element:delete",this.elDelete),this.listenTo(cs.global,"element:erase",this.erase),this.listenTo(cs.global,"element:duplicate",this.duplicate)},elDelete:function(e,t){function n(){_.defer(function(){cs.elements.trigger("delete",{model:e})})}function i(){_.defer(function(){cs.elements.trigger("add:item",e.get("_type"),e.collection.parent),cs.elements.trigger("delete",{model:e})})}var t=t||{};if(e.collection&&e.collection.parent&&e.collection.parent.atFloor())return void(t.noConfirm?i():cs.confirm.trigger("open",{message:cs.l18n("sortable-at-floor"),accept:i,allowQuickConfirm:!0}));if(t.noConfirm)n();else{var o=e.elements&&e.elements.length>0?"confirm-element-delete-contents":"confirm-element-delete";cs.confirm.trigger("open",{message:cs.l18n(o).replace("%s",e.definition.get("ui").title),accept:n,allowQuickConfirm:!0})}},erase:function(e,t){function n(){_.defer(function(){cs.elements.trigger("erase",{model:e})})}var t=t||{};t.noConfirm?n():cs.confirm.trigger("open",{message:cs.l18n("columns-erase-confirm"),accept:n,allowQuickConfirm:!0})},duplicate:function(e){cs.elements.trigger("duplicate",e)}})},{}],15:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.inspect={primary:new Cornerstone.InspectionSupervisor,secondary:new Cornerstone.InspectionSupervisor,expansion:new Cornerstone.InspectionSupervisor},this.resetInspector("primary"),this.listenTo(cs.events,"inspect:element",this.inspectElement),this.listenTo(cs.events,"expand:control",this.expansionSource),this.listenTo(cs.events,"expand:close",this.expansionClose),cs.navigate.reply("inspector:heading",cs.l18n("inspector-heading"))},inspectElement:function(e,t,n){var t=_.isUndefined(t)?!0:t,n=n||!0,i=e,o=!1;if(e.definition.get("flags").child){var s=e.collection.getParent();i=s.definition?s:!1,o=e}i&&(this.updateInspector("primary",i),t&&cs.navigate.trigger("inspector:home"),n&&cs.global.trigger("autoscroll",i.cid)),cs.config("debug")&&(cs.nowInspecting=i),o&&(this.updateInspector("secondary",o),t&&cs.navigate.trigger("inspector:item"))},resetInspector:function(e){"primary"==e&&(this.resetInspector("secondary"),this.setHeading(!1)),this.updateInspector(e,new Cornerstone.Models.Proxyable,[],[])},expansionSource:function(e,t){this.updateInspector("expansion",e,_.filter(e.definition.getControls(),function(e){return t==e.name}))},expansionClose:function(){this.inspect.expansion.reset()},updateInspector:function(e,t,n,i){if(this.inspect[e]){var o;this.listenToOnce(t,"imminent:replacement",function(e){this.listenToOnce(e,"created",function(e){this.inspectElement(e,!1),clearTimeout(o)})}),this.listenToOnce(t,"destroy",function(t){o=setTimeout(_.bind(function(){this.resetInspector(e,null)},this),5)}),n||(n=t.definition.getControls()),i||(i=this.getMetaControls(e,t)),this.inspect[e].source({name:"meta",source:t,controls:i}),this.inspect[e].source({name:"element",source:t,controls:n}),this.inspect[e].rebuildControls(),"primary"==e&&t.definition&&this.setHeading(t.definition.get("ui").title)}},getMetaControls:function(e,t){var n=[],i=t.definition.get("ui"),o=t.definition.get("name"),s="_internal"==t.definition.get("flags").context;if("primary"==e&&("settings"!==cs.navigate.request("active:pane")&&n.push({type:"breadcrumbs"}),i.helpText&&n.push({type:"info-box",ui:{title:i.helpText.title||"",message:i.helpText.message||""}}),!s)){var r=_.contains(["section","row","column"],o)?o:"element";n.push({type:r+"-actions"})}return n},setHeading:function(e){e||(e=cs.l18n("inspector-heading")),cs.navigate.reply("inspector:heading",e),cs.navigate.trigger("refresh:inspector:heading")},getPrimaryControls:function(){return this.inspect.primary.controls},getSecondaryControls:function(){return this.inspect.secondary.controls},getExpansionControls:function(){return this.inspect.expansion.controls}})},{}],16:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){}})},{}],17:[function(e,t,n){t.exports=Cornerstone.Component.extend({nativeSections:["themeco-pages","themeco-blocks"],userSections:["user-pages","user-blocks"],initialize:function(){this.data=new Backbone.Model({title:cs.l18n("templates-title")}),this.controls=new Cornerstone.Collections.Control,this.listenTo(cs.templates,"ready",this.setup),this.listenTo(cs.templates,"add",this.setup),this.listenTo(cs.templates,"remove",this.setup)},setup:function(){var e=new Cornerstone.Collections.Control;e.add({name:"info",type:"info-box",ui:{title:cs.l18n("templates-info-title"),message:cs.l18n("templates-info-description")}}),e.add({name:"action",type:"template-actions",ui:{divider:!0}}),e.add({name:"title",type:"template-save-dialog",condition:{action:"save"}}),e.add({name:"uploader",type:"template-upload-dialog",condition:{action:"upload"}});var t,n,i,o;o=cs.component("template-manager"),i=[],_.each(_.union(this.nativeSections,this.userSections),function(s){var r=o.templates.section(s);t=r.map(_.bind(function(e){return _.contains(this.userSections,s)&&i.push(e),{value:e.get("slug"),label:e.get("title")}},this)),n=s.indexOf("page")>-1?"page":"block",e.add({name:s,type:"template-select",ui:{title:cs.l18n("templates-"+s),buttonText:cs.l18n("templates-insert"),divider:"block"==n,compact:"block"==n},options:{choices:t,templateType:n}})},this),t=i.map(function(e){var t="block"==e.get("type")?cs.l18n("templates-remove-block"):cs.l18n("templates-remove-page");return{value:e.get("slug"),label:t.replace("%s",e.get("title"))}}),e.add({name:"user-removals",type:"template-remove",ui:{title:cs.l18n("templates-remove-label"),buttonText:cs.l18n("templates-remove")},options:{choices:t,templateType:"remove"}}),e.invoke("setProxy",this.data);var s=this.controls;this.controls=e,cs.templates.trigger("control:reset"),s.reset()}})},{}],18:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.inspect={},this.inspect.primary=new Cornerstone.InspectionSupervisor([{name:"primary",source:new Cornerstone.Models.Proxyable,controls:[{name:"help_text",key:"disabled",type:"info-box",ui:{title:cs.l18n("layout-info-title"),message:cs.l18n("layout-info-description")}},{name:"layout_actions",key:"disabled",type:"layout-actions",options:{divider:!0}}]},{name:"section",source:cs.post.data,controls:[{name:"sections",key:"elements",type:"sortable-sections"}]}]),this.inspect.secondary=new Cornerstone.InspectionSupervisor([{name:"section",source:new Cornerstone.Models.Proxyable,controls:[]},{name:"row",source:new Cornerstone.Models.Proxyable,controls:[]}]),cs.navigate.reply("layout:active:row",!1),this.listenTo(cs.events,"inspect:layout",this.inspectorDetector),this.listenTo(cs.events,"add:section",function(){cs.elements.trigger("add:item","section",cs.post.data,cs.l18n("section-numeric"))})},inspectSection:function(e,t,n){e&&(t||(t=e.elements.first()),cs.global.trigger("autoscroll",t.cid),cs.navigate.reply("layout:active:row",t),this.inspect.secondary.source({name:"section",source:e,controls:e.definition.getControls("_layout")}),this.inspect.secondary.source({name:"row",source:t,controls:t.definition.getControls("_layout")}),this.inspect.secondary.rebuildControls(),_.isFunction(n)&&n())},inspectRow:function(e){e&&this.inspectSection(e.collection.parent,e)},inspectorDetector:function(e,t){function n(){t.navigate&&cs.navigate.trigger("layout:rows")}var t=t||{};e.get("_type");switch(e.get("_type")){case"section":this.inspectSection(e,null,n);break;case"row":this.inspectSection(e.collection.parent,e,n);break;case"column":this.inspectSection(e.collection.parent.collection.parent,e.collection.parent,n)}}})},{}],19:[function(e,t,n){t.exports=Cornerstone.Component.extend({panes:{layout:["rows","templates"],elements:[],inspector:["item"],settings:["item"]},initialize:function(){cs.navigate=Backbone.Radio.channel("cs:navigate"),cs.navigate.reply("auto:focus",!1),this.listenTo(cs.navigate,"pane",this.killObserver),this.listenTo(cs.navigate,"subpane:opened",this.killObserver),this.listenTo(cs.navigate,"pane:switch",function(){cs.extra.trigger("flyout","none")}),this.listenTo(cs.global,"auto:focus",_.debounce(function(e){cs.navigate.reply("auto:focus",e),cs.navigate.trigger("auto:focus",e)},10,!0)),this.listenTo(cs.global,"inspect",function(e){cs.events.trigger("inspect:element",e,!0),cs.confirm.trigger("abort")}),cs.extra.reply("get:collapse",!1),_.each(this.panes,function(e,t){this.listenTo(cs.navigate,t+":home",function(e){cs.extra.request("get:collapse")||cs.navigate.trigger("pane",t)}),_.each(e,function(e){this.listenTo(cs.navigate,t+":"+e,function(n){cs.extra.request("get:collapse")||cs.navigate.trigger("pane",t,e)})},this)},this),this.listenTo(cs.global,"nav:kylelements",function(){cs.navigate.trigger("elements:home")})},killObserver:function(){cs.global.trigger("kill:observer")}})},{}],20:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.options=Backbone.Radio.channel("cs:options"),cs.options.reply("help:text","false"==localStorage.cs_options_help_text?!1:!0),cs.options.reply("skeleton:mode","true"==localStorage.cs_options_skeleton_mode),cs.options.reply("adv:controls",!0),this.listenTo(cs.extra,"toggle",function(e){var t=!cs.options.request(e);cs.options.reply(e,t),cs.options.trigger(e,t),localStorage.setItem("cs_options_"+e.replaceAll(":","_"),t?"true":"false")})}})},{}],21:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.cs.post=new Cornerstone.Post(cs.config("post")),this.listenTo(cs.events,"action:save",this.save),this.listenTo(cs.data,"save:success",this.saveSuccess),this.listenTo(cs.data,"save:error",this.saveError),cs.global.request("editor:ready")?this.trackChanges():this.listenTo(cs.global,"editor:ready",this.trackChanges),cs.data.reply("saved:last",null),window.onbeforeunload=function(e){return 1==cs.changed?cs.l18n("home-onbeforeunload"):void 0}},saveSuccess:function(){cs.data.reply("saved:last",Cornerstone.Vendor.moment()),cs.channel.trigger("update:saved:last"),cs.changed=!1,"settings"==cs.navigate.request("active:pane")&&(localStorage.CornerstonePane="settings",location.reload())},save:function(){cs.data.trigger("save"),Cornerstone.Vendor.NProgress.configure({showSpinner:!1,speed:850,minimum:.925}),Cornerstone.Vendor.NProgress.start(),cs.ajax("cs_endpoint_save",_.omit(this.cs.post.toJSON(),["_type"]),{success:function(e){cs.data.trigger("save:success",e)},error:function(e){cs.data.trigger("save:error",e)},always:function(e){cs.log("save",e),cs.data.trigger("save:response",e),Cornerstone.Vendor.NProgress.done()}})},trackChanges:function(){this.stopListening(cs.channel,"page:unsaved"),_.delay(_.bind(function(){this.listenTo(cs.channel,"page:unsaved",function(){cs.changed=!0})},this),5e3)}})},{}],22:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data.reply("settings:ready",!1),this.listenTo(cs.data,"save",this.save),this.listenTo(cs.global,"editor:ready",this.fetchSections),this.listenTo(cs.global,"settings:pingback",this.setupListeners)},save:function(){1==cs.data.request("settings:ready")&&this.cs.post.set("settings",this.getSettingData())},fetchSections:function(){cs.ajax("cs_setting_sections",{post_id:this.cs.post.get("post_id")},{success:_.bind(this.loadSettings,this),error:function(e){cs.warn(e.message)}})},loadSettings:function(e){this.inspect=new Cornerstone.InspectionSupervisor({name:"primary",source:new Cornerstone.Models.Proxyable,controls:[{name:"settings-actions",key:"disabled",type:"settings-actions"}]}),this.cs.settingSections=new Backbone.Collection(e.models),this.settings=new Cornerstone.Collections.Setting(e.data),this.settings.each(function(e){e.inspect=new Cornerstone.InspectionSupervisor({name:"primary",source:e,controls:e.section.get("controls")})}),cs.data.reply("settings:ready",!0),cs.global.trigger("settings:ready")},getSettings:function(){return this.settings},getSettingData:function(){return this.settings.invoke("updateChildData"),this.settings.toJSON()},getPrimaryControls:function(){return this.inspect.controls},setupListeners:function(){var e=this.settings.findWhere({_section:"general"});if(e?(this.listenTo(e,"change:custom_css",function(e,t){cs.global.trigger("update:custom_css",t)}),cs.global.trigger("update:custom_css",e.get("custom_css"))):console.warn("Unable to load Custom CSS because Cornerstone settings are corrupted. "),e=this.settings.findWhere({_section:"responsive-text"})){var t=_.debounce(function(){cs.global.trigger("update:responsive_text",_.map(e.elements.toProxy().toJSON(),function(e){return _.pick(e,"selector","compression","min_size","max_size")}))},5);this.listenTo(e.elements,"model:change",t),this.listenTo(e.elements,"add",t),this.listenTo(e.elements,"remove",t),t()}else console.warn("Unable to load Responsive Text because Cornerstone settings are corrupted. ")}})},{}],23:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data.reply("skeleton:preview:height",Backbone.$(window).height()),this.enabled=cs.options.request("skeleton:mode")||!1,this.toggle(this.enabled,!0),this.listenTo(cs.keybind,"skeleton-mode",function(){cs.extra.trigger("toggle","skeleton:mode")}),this.listenTo(cs.options,"skeleton:mode",function(e){this.toggle(e||void 0)}),this.listenTo(cs.global,"preview:resize",function(e){var t=e.Body.height>1?Math.min(e.Window.height,e.Body.height):e.Window.height;cs.data.reply("skeleton:preview:height",t),cs.events.trigger("resize:skeleton")}),this.listenTo(cs.global,"preview:failure",function(e){this.toggle(!0),this.locked=!0,cs.message.trigger("error",e),Backbone.$("body").addClass("cs-recovery-mode")})},toggle:function(e,t){return this.locked?void cs.message.trigger("warning",cs.l18n("skeleton-locked")):(_.isUndefined(e)&&(e=!this.enabled),this.enabled=e,cs.options.reply("skeleton:mode",this.enabled),t||cs.events.trigger("toggle:skeleton:mode",this.enabled),void Backbone.$("body").toggleClass("cs-skeleton-active",this.enabled).toggleClass("cs-skeleton-inactive",!this.enabled))}})},{}],24:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.templates=Backbone.Radio.channel("cs:templates"),this.templates=new Cornerstone.Collections.Template,this.selections=new Backbone.Collection,this.listenToOnce(cs.global,"preview:primed",this.requestTemplates),this.on("templates:recieved",this.loadTemplates),this.listenTo(cs.templates,"import",this.importTemplate),this.listenTo(cs.templates,"save",this.save),this.listenTo(cs.templates,"delete",this.deletion),this.listenTo(cs.templates,"download",this.blockDownload)},requestTemplates:function(){cs.ajax("cs_templates",{},{success:_.bind(function(e,t){this.templates.add(e),cs.templates.trigger("ready",this)},this),error:function(e){cs.warn(e.message)}})},importTemplate:function(e,t){if("string"==typeof e){var n=this.templates.findWhere({slug:e});e=n?n.get("elements"):[]}var i=cs.post.elements();return"page"==t&&i.reset(),e&&e.length&&0!=e.length?("row"==e[0].elType&&(e=this.convertLegacy(_.clone(e))),void cs.ajax("cs_template_migration",{elements:e},{success:_.bind(function(e){_.each(e.elements,function(e){i.create(e)},this),cs.message.trigger("success","page"==t?cs.l18n("templates-page-updated"):cs.l18n("templates-block-inserted"))},this),error:function(e){cs.message.trigger("error",cs.l18n("templates-error-import"))},always:function(e){cs.log("template_migration",e)}})):void cs.message.trigger("error",cs.l18n("templates-error-import"))},convertLegacy:function(e){var t=["bg_type","bg_color","bg_image","bg_pattern_toggle","parallax","bg_video","bg_video_poster","margin","padding","border_style","border_color","visibility","class","style"];return _.map(e,function(e){var n=_.pick(e,t);return n.elType="section",n.elements=[],n.elements.push(_.omit(e,t)),n})},save:function(e,t){var n=_.extend(_.pick(cs.post.toJSON(),["elements"]),{type:e||"block",title:t||"Untitled"});cs.ajax("cs_save_template",n,{success:_.bind(function(e){this.templates.add(e.template),cs.templates.trigger("add",this),cs.message.trigger("success",cs.l18n("templates-saved"),4e3)},this),error:function(e){cs.message.trigger("error",cs.l18n("templates-error-save"),1e4)},always:function(e){cs.log("save_template",e)}})},deletion:function(e){var t=this.templates.findWhere({slug:e});t&&(t.destroy(),this.deleteRemote(e),cs.templates.trigger("remove",this))},deleteRemote:function(e){cs.ajax("cs_delete_template",{slug:e},{success:function(e){cs.message.trigger("success",cs.l18n("templates-delete-success"),4e3)},error:function(e){cs.message.trigger("error",cs.l18n("templates-error-delete"),1e4)},always:function(e){cs.log("delete_template",e)}})},blockDownload:function(e){try{!!new Blob}catch(t){return void cs.message.trigger("error",cs.l18n("browser-no-can"))}var e=e||"template",n={title:e,elements:cs.post.toJSON().elements},i=e.replace(/\s+/g,"_"),o=JSON.stringify(n,null,2);Cornerstone.Vendor.FileSaver.saveAs(new Blob([o],{type:"text/plain;charset=utf-8"}),i+".csl")}})},{}],25:[function(e,t,n){t.exports={builder:e("./common/builder"),"mn-extensions":e("./common/mn-extensions"),"template-loader":e("./common/template-loader"),"view-loader":e("./common/view-loader"),"model-loader":e("./common/model-loader"),"render-queue":e("./common/render-queue"),keybindings:e("./common/keybindings"),editor:e("./editor/editor"),"element-pane":e("./editor/element-library"),navigator:e("./editor/navigator"),options:e("./editor/options"),layout:e("./editor/layout"),"layout-section":e("./editor/layout-section"),"layout-templates":e("./editor/layout-templates"),inspector:e("./editor/inspector"),"post-handler":e("./editor/post-handler"),settings:e("./editor/settings"),"template-manager":e("./editor/template-manager"),skeleton:e("./editor/skeleton"),"element-manager":e("./editor/element-manager"),preview:e("./preview/preview")}},{"./common/builder":5,"./common/keybindings":6,"./common/mn-extensions":7,"./common/model-loader":8,"./common/render-queue":9,"./common/template-loader":10,"./common/view-loader":11,"./editor/editor":12,"./editor/element-library":13,"./editor/element-manager":14,"./editor/inspector":15,"./editor/layout":18,"./editor/layout-section":16,"./editor/layout-templates":17,"./editor/navigator":19,"./editor/options":20,"./editor/post-handler":21,"./editor/settings":22,"./editor/skeleton":23,"./editor/template-manager":24,"./preview/preview":26}],26:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(e){Backbone.$(document).ready(function(){Backbone.$("#cornerstone-preview-entry").empty()}),cs.preview=Backbone.Radio.channel("cs:preview"),cs.observer=Backbone.Radio.channel("cs:observer"),xData.isPreview=!0,this.listenTo(cs.preview,"iframe:ready",this.reload),cs.events.trigger("preview:init"),cs.preview.reply("responsive:text",null),this.listenTo(cs.preview,"responsive:text",this.responsiveTextUpdate),this.listenTo(cs.preview,"late:enqueue",this.lateEnqueue)},reload:function(t){cs.global=t.cs.global,t.cs.render=cs.render,this.cs.post=t.cs.post,0==Backbone.$("#cornerstone-preview-entry").length&&(console.log("Unable to initialize preview. #cornerstone-preview-entry missing."),this.noContentArea=!0);var n=e("../../views/main/preview.js");this.view=new n({el:"#cornerstone-preview-entry",model:this.cs.post.data}),this.view.render(),this.sendWindowDimensions(),this.listenToOnce(cs.render,"primed",this.primed),_.delay(_.bind(function(){this.primed(!0),this.sendWindowDimensions()},this),9e3),this.listenTo(cs.global,"settings:ready",this.settingsPingback),this.listenTo(cs.global,"update:custom_css",this.customCSS),this.listenTo(cs.global,"update:responsive_text",this.responsiveText),this.listenTo(cs.global,"ajax:fallback",function(e){cs.fallbackAjax=e}),cs.events.trigger("preview:iframe:reloaded"),cs.observer.reply("get:collapse",!1),this.listenTo(cs.global,"set:collapse",function(e){cs.observer.reply("get:collapse",e)}),Backbone.$(window).resize(this.sendWindowDimensions)},sendWindowDimensions:function(){var e=Backbone.$("body"),t=Backbone.$(window);cs.global.trigger("preview:resize",{Window:{width:t.width(),height:t.height()},Body:{width:e.width(),height:e.height()}})},primed:function(e){this.isPrimed||cs.global.request("editor:ready")||(this.isPrimed=!0,cs.global.trigger("preview:primed",e||!1),
this.noContentArea&&_.defer(function(){cs.global.trigger("preview:failure",cs.l18n("preview-failure2"))}))},settingsPingback:function(){cs.global.trigger("settings:pingback")},customCSS:function(e){Backbone.$("#cornerstone-custom-page-css").html(e)},responsiveText:function(e){cs.preview.reply("responsive:text",e),Backbone.$(window).trigger("fittextReset"),cs.preview.trigger("responsive:text")},responsiveTextUpdate:function(e){var e=e||Backbone,t=cs.preview.request("responsive:text");t&&_.each(t,function(t){e.$(t.selector).fitText(t.compression,{minFontSize:t.min_size,maxFontSize:t.max_size})},this)},lateEnqueue:function(e,t,n,i){if(0==Backbone.$('script[data-handle="'+e+'"]').length){var o=setTimeout(function(){i("Unable to load: "+e)},1e4),s=document.createElement("script");Backbone.$("body").append(s),s.onload=function(){clearTimeout(o),_.defer(i,"Script loaded: "+e)},s.src=n,Backbone.$(s).attr("data-handle",e)}else i()}})},{"../../views/main/preview.js":93}],27:[function(e,t,n){var i=wp.media,o=i.view.l10n;wp.media.view.MediaFrame.Cornerstone=wp.media.view.MediaFrame.Post.extend({createStates:function(){var e=this.options;this.states.add([new i.controller.Library({id:"insert",title:o.insertMediaTitle,priority:20,toolbar:"main-insert",filterable:"all",library:i.query(e.library),multiple:e.multiple?"reset":!1,editable:!0,allowLocalEdits:!0,displaySettings:!1,displayUserSettings:!0}),new i.controller.Embed({metadata:e.metadata}),new i.controller.EditImage({model:e.editImage})]),i.view.settings.post.featuredImageId&&this.states.add(new i.controller.FeaturedImage)}})},{}],28:[function(e,t,n){var i={editorMirror:function(e,t,n){"mirror"==n&&(Backbone.$(t).trigger("dragula:mirror",e),_.defer(function(){Backbone.$(t).trigger("dragula:start",e),cs.global.trigger("dragging",!0)}))},skeletonEnd:function(e){cs.global.trigger("dragging",!1),cs.events.trigger("skeleton:dragging",!1)},skeletonStart:function(e,t){var n=Backbone.$(e);cs.events.trigger("skeleton:dragging",!0,n.attr("data-element-type")),n.trigger("dragula:lift"),Backbone.$(t).trigger("dragula:lift:child")},cancel:function(e,t,n){Backbone.$(e).trigger("dragula:dragend")},drop:function(e,t,n,i){Backbone.$(e).trigger("dragula:drop",[t,n,i]),Backbone.$(t).trigger("dragula:receive",[e,n,i])},over:function(e,t,n){Backbone.$(t).trigger("dragula:over"),Backbone.$(n).trigger("dragula:source:over")},out:function(e,t,n){Backbone.$(t).trigger("dragula:out")},shadow:function(e,t,n){Backbone.$(n).trigger("dragula:shadow")}};t.exports=i},{}],29:[function(e,t,n){!function(e){var t=e('<div class="shadow-height" style="position:absolute;top:-100%;visibility:hidden;"></div>');e.fn.shadowHeight=function(){if(!(this.length<1)){var e=this.length>1?this.eq(0):this,n=e.clone();t.empty().appendTo("body"),t.append(n);var i=n.outerHeight();return 1>i&&(n.addClass("cf"),i=n.outerHeight()),t.detach(),n.remove(),i}},e.fn.csPointInsideElement=function(e,t){if(!(this.length<1)){var n=this.length>1?this.eq(0):this,i=n.offset(),o=e>i.left&&e<i.left+n.width(),s=t>i.top&&t<i.top+n.height();return o&&s}}}(jQuery)},{}],30:[function(e,t,n){t.exports.layoutIsValid=function(e){return _(["1/1","1/2 + 1/2","2/3 + 1/3","1/3 + 2/3","1/3 + 1/3 + 1/3","3/4 + 1/4","1/4 + 3/4","1/2 + 1/2","1/2 + 1/4 + 1/4","1/4 + 1/2 + 1/4","1/4 + 1/4 + 1/2","1/4 + 1/4 + 1/4 + 1/4","4/5 + 1/5","1/5 + 4/5","3/5 + 2/5","2/5 + 3/5","3/5 + 1/5 + 1/5","1/5 + 3/5 + 1/5","1/5 + 1/5 + 3/5","2/5 + 2/5 + 1/5","2/5 + 1/5 + 2/5","1/5 + 2/5 + 2/5","2/5 + 1/5 + 1/5 + 1/5","1/5 + 2/5 + 1/5 + 1/5","1/5 + 1/5 + 2/5 + 1/5","1/5 + 1/5 + 1/5 + 2/5","1/5 + 1/5 + 1/5 + 1/5 + 1/5","5/6 + 1/6","1/6 + 5/6","2/3 + 1/3","1/3 + 2/3","2/3 + 1/6 + 1/6","1/6 + 2/3 + 1/6","1/6 + 1/6 + 2/3","1/2 + 1/2","1/2 + 1/3 + 1/6","1/2 + 1/6 + 1/3","1/3 + 1/2 + 1/6","1/3 + 1/6 + 1/2","1/6 + 1/2 + 1/3","1/6 + 1/3 + 1/2","1/2 + 1/6 + 1/6 + 1/6","1/6 + 1/2 + 1/6 + 1/6","1/6 + 1/6 + 1/2 + 1/6","1/6 + 1/6 + 1/6 + 1/2","1/3 + 1/3 + 1/3","1/3 + 1/3 + 1/6 + 1/6","1/3 + 1/6 + 1/3 + 1/6","1/3 + 1/6 + 1/6 + 1/3","1/6 + 1/3 + 1/3 + 1/6","1/6 + 1/3 + 1/6 + 1/3","1/6 + 1/6 + 1/3 + 1/3","1/3 + 1/6 + 1/6 + 1/6 + 1/6","1/6 + 1/3 + 1/6 + 1/6 + 1/6","1/6 + 1/6 + 1/3 + 1/6 + 1/6","1/6 + 1/6 + 1/6 + 1/3 + 1/6","1/6 + 1/6 + 1/6 + 1/6 + 1/3","1/6 + 1/6 + 1/6 + 1/6 + 1/6 + 1/6"]).contains(e)},t.exports.reduceFractions=function(e){reductions=[{f:"2/4",r:"1/2"},{f:"2/6",r:"1/3"},{f:"3/6",r:"1/2"},{f:"4/6",r:"2/3"}];var t=e;return _(reductions).each(function(e){var n=new RegExp(e.f,"g");t=t.replace(n,e.r)}),t}},{}],31:[function(e,t,n){String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),t)}},{}],32:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({tagName:"li",template:"controls/base",controlName:"default",bindings:{},canCompact:!0,baseEvents:{"click button.cs-expand-control":"expandControl"},controlEvents:{},events:function(){return _.extend(this.baseEvents,this.controlEvents)},constructor:function(){this.className="cs-control cs-control-"+this.controlName,CS.Mn.CompositeView.apply(this,arguments),this.configureProxy(),this.listenTo(this.model,"set:proxy",this.configureProxy),this.on("render",this.baseRender),this.listenTo(cs.options,"help:text",this.render),_.isFunction(this.controlTemplate)||_.isFunction(cs.template(this.controlTemplate))||(this.controlTemplate="controls/"+this.controlName)},configureProxy:function(){if(this.proxy&&this.stopListening(this.proxy),this.proxy=this.model.proxy||null,!_.isNull(this.proxy)){var e=this.model.get("key");if(this.proxy.definition&&!this.proxy.has(e)&&!_.contains(["elements","disabled"],e))return console.warn("Element ["+this.proxy.definition.get("name")+"] missing ["+e+"] attribute."),void console.log(this.proxy);var t=this.model.get("condition");t&&_.each(_.keys(t),function(e){e.indexOf(":not")==e.length-4&&(e=e.replace(":not","")),0==e.indexOf("parent:")&&(e=e.replace("parent:","")),this.listenTo(this.proxy,"change:"+e,this.toggleVisibility)},this),this.triggerMethod("proxy:ready")}},toggleVisibility:function(){var e=!0,t=this.model.get("condition");if(!_.isNull(this.proxy)&&t){var n=_.filter(_.keys(t),_.bind(function(e){var n=e.indexOf(":not")==e.length-4,i=t[e];n&&(e=e.replace(":not","")),0==e.indexOf("parent:")?(source=this.proxy.getSourceParent().toProxy(),e=e.replace("parent:","")):source=this.proxy;var o=source.get(e),s=_.isArray(i)?_.contains(i,o):o==i;return n?s:!s},this));e=_.isEmpty(n)}var i=this.$el.hasClass("hide"),o=i&&e||!i&&!e;this.$el.toggleClass("hide",!e),o&&cs.navigate.trigger("scrollbar:update"),this.triggerMethod("custom:visibility",e,o)},baseRender:function(){this.triggerMethod("before:base:render");var e=this.model.get("ui"),t=this.model.get("options");(!e.title&&this.canCompact||t.compact)&&this.$el.addClass("cs-control-compact"),(e.divider||this.divider)&&this.$el.addClass("cs-control-divider"),this.$el.attr("data-name",this.model.get("name")),this.toggleVisibility(),this.stickitBindings(),this.triggerMethod("after:base:render")},stickitBindings:function(){var e=this.bindingSelector||"input[type=hidden]",t={observe:this.model.get("key")};this.binding&&_.extend(t,this.binding),this.addBinding(this.proxy,e,t),this.stickit(this.proxy)},serializeData:function(){var e=this.model.get("options"),t=_.clone(this.model.get("ui"));t.message&&0==t.message.indexOf("[HelpText]")&&(t.message=t.message.replace("[HelpText]","")),cs.options.request("help:text")||e.helpText===!1||(t.message=!1);var n=_.extend(CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),{controlTemplate:this.controlTemplate,controlType:this.model.get("type"),ui:t});return n.ui.title&&(n.ui.title=this.replacePlaceholders(n.ui.title)),n.ui.tooltip&&(n.ui.tooltip=this.replacePlaceholders(n.ui.tooltip)),n.ui.message&&(n.ui.message=this.replacePlaceholders(n.ui.message)),this.proxy&&_.extend(n,this.proxy.toJSON()),_.isFunction(this.controlData)&&_.extend(n,this.controlData()),n},baseTextReplacements:{"%%element-name%%":function(){return this.proxy?this.proxy.definition.get("name"):""},"%%element-type%%":function(){return this.proxy?this.proxy.get("_type"):""},"%%icon%%":function(){return this.proxy?cs.icon(this.proxy.definition.get("icon")):""},"%%icon-nav-elements-solid%%":function(){return cs.icon("interface/nav-elements-solid")},"%%icon-nav-settings-solid%%":function(){return cs.icon("interface/nav-settings-solid")}},replacePlaceholders:function(e){return _.each(_.extend(this.textReplacements||{},this.baseTextReplacements),_.bind(function(t,n){-1!=e.indexOf(n)&&(e=e.replace(new RegExp(n,"g"),t.apply(this)))},this)),e},notLiveTrigger:function(){var e=this.model.get("options");e.notLive&&cs.data.trigger("control:not:live",this.model.proxy.get("name")+"_"+this.model.get("name"),e.notLive)},expandControl:function(){this.triggerMethod("before:expand"),this.$el.addClass("cs-control-expanded"),cs.events.trigger("expand:control",this.proxy.getSource(),this.model.get("name"),this),this.listenToOnce(cs.events,"expand:close",this.expandClose)},expandClose:function(){this.proxy.refresh(),this.$el.removeClass("cs-control-expanded"),this.render(),this.triggerMethod("after:expand")}})},{}],33:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-breadcrumbs cs-control-divider",template:"inspector/breadcrumbs",controlName:"breadcrumbs",events:{"click button":"inspect","mouseover button":"mouseOver","mouseout button":"mouseOut"},initialize:function(){this.levels=this.findLevels([],this.model.proxy.getSource())},mouseOver:function(e){var t=this.buttonLevel(e);t&&t.model.trigger("observe:start")},mouseOut:function(e){var t=this.buttonLevel(e);t&&t.model.trigger("observe:end")},inspect:function(e){var t=this.buttonLevel(e);t&&cs.events.trigger("inspect:element",t.model,!1)},buttonLevel:function(e){return this.levels[parseInt(this.$(e.currentTarget).data("level"))]},findLevels:function(e,t){"section"!=t.get("_type")&&t.collection&&t.collection.parent&&(e=this.findLevels(e,t.collection.parent));var n={label:t.definition.get("ui").title,model:t};switch(t.get("_type")){case"section":n.title=t.get("title"),n.label=cs.l18n("section");break;case"row":n.label=cs.l18n("row");break;case"column":n.label=cs.l18n("column")}return e.push(n),e},serializeData:function(){return{items:_.first(this.levels,4),count:this.levels.length,rtl:cs.config("isRTL")}},onRender:function(){this.levels.length<=1&&!this.levels[0].title&&this.$el.toggleClass("hide",!0)}})},{}],34:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"choose",binding:{initialize:function(e,t,n){var i=this.model.get("options");this.$("li").on("click",_.bind(function(e){var o=this.$(e.currentTarget).data("choice");_.isUndefined(i.offValue)||o!=t.get(n.observe)||(o=i.offValue),t.set(n.observe,o)},this));var o=_.bind(function(e,t){var o=n.observe?t:null;o||""==o||(o=i.choices&&i.choices.length>0?i.choices[0].value:"none"),this.$("li").removeClass("active").siblings("[data-choice="+(""==o?"none":o)+"]").addClass("active")},this);o(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,o)}},onBeforeRender:function(){var e=this.model.get("options");_.contains(["2","3","4","5"],e.columns)||(e.columns="2",this.model.set("options",e))}})},{}],35:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"div",className:"cs-control-external cs-control-code-editor",template:_.template("<textarea></textarea>"),initialize:function(){this.listenTo(cs.navigate,"open:code:editor",function(e){e==this.model.get("key")&&this.$("textarea").csCodeEditorShow()})},onRender:function(){var e,t;this.$("textarea").val(this.model.proxy.get(this.model.get("key"))),e=this.model.get("options"),t=e.settings||{},t=_.extend(t,{change:_.bind(function(e){this.model.proxy.set(this.model.get("key"),e.doc.getValue())},this)}),_.defer(_.bind(function(){this.$el.detach(),Backbone.$("body").append(this.$el),this.$("textarea").csCodeEditor(t)},this))}})},{}],36:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"color",bindingSelector:"input[type=text].cs-color-input",onAfterBaseRender:function(){var e=this.model.get("options")||{},t={outputFormat:e.output_format||null};this.$(".cs-color-input").huebert(t)}})},{}],37:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"inspector/column-actions",controlName:"actions",ui:{confirm:".action.erase",layout:".action.manage-layout"},events:{"click @ui.layout":"layout"},behaviors:{Confirm:{message:cs.l18n("columns-erase-confirm")}},canQuickConfirm:!0,initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},layout:function(){cs.events.trigger("inspect:layout",this.proxy.getSource(),{navigate:!0})},onConfirmAccept:function(){cs.elements.trigger("erase",{model:this.proxy.getSource()})}})},{}],38:[function(e,t,n){t.exports=CS.Mn.CollectionView.extend({tagName:"ul",className:"cs-controls",initialize:function(){this.repaint=_.debounce(_.bind(function(){try{this.render()}catch(e){if("ViewDestroyedError"==e.name)return;console.log("Cornerstone Render Exception",e)}},this),4),this.listenTo(this.collection,"add",this.repaint),this.listenTo(this.collection,"remove",this.repaint),this.listenTo(this.collection,"reset",this.repaint),this.listenTo(cs.navigate,"auto:focus",this.autoFocus)},getChildView:function(e){return cs.controlLookup(e.get("type"))},onRender:function(){_.defer(_.bind(function(){this.$el.toggleClass("empty",this.collection.isEmpty()),this.autoFocus()},this))},autoFocus:function(){var e=cs.navigate.request("auto:focus");if(!1!==e){var t=this.$('[data-name="'+e+'"]');t.length>0&&!t.hasClass("cs-control-expanded")&&(cs.navigate.reply(!1),t.find('input[type="text"],textarea').focus())}}})},{}],39:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"controls/custom-markup",controlName:"custom-markup",controlData:function(){var e=this.model.get("options"),t=e.html||"";return{message:t}}})},{}],40:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"date",binding:{initialize:function(e,t,n){function i(e){var i=s(t.get(n.observe)),o=e+a.delimiter+i.format;t.set(n.observe,o)}function o(){var e=s(t.get(n.observe)),i=e.date+a.delimiter+r(Backbone.$(this).val());t.set(n.observe,i)}function s(e){var t,n,i;if(e){var t=e.split(a.delimiter);t[0]&&(n=Cornerstone.Vendor.moment(t[0]),n=n.isValid()?n:!1),t[1]&&(i=t[1])}return n||(n=Cornerstone.Vendor.moment()),{date:n.toString(),format:r(i),moment:n}}function r(e){return _.contains(l,e)?e:a.default_format||"Do MMMM YYYY"}var a=this.model.get("options"),l=a.available_formats;if(!l||!l.length){var c=a.default_format||"Do MMMM YYYY";l=[c]}var u=this.$(".cs-date-input"),d=this.$(".cs-date-format select");this.picker=new Cornerstone.Vendor.Pikaday({field:u[0],bound:!1,container:this.$(".cs-date-picker-entry")[0],theme:"cs-date-picker",isRTL:cs.config("isRTL"),i18n:this.localize(),onSelect:i}),a.choose_format&&this.$(".cs-date-format").removeClass("hide"),d.on("change",o);var p=_.bind(function(e,t){t=s(t);Cornerstone.Vendor.moment(t.date,t.format);u.val(t.moment.format(t.format)),this.picker.config({format:t.format}),this.picker.setMoment(t.moment,!0);var n=_.reduce(l,function(e,n){var i=n==t.format?" selected":"";return e+'<option value="'+n+'"'+i+">"+t.moment.format(n)+"</option>"},"");d.empty(),d.append(Backbone.$(n))},this);p(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,p)}},localize:function(){return{previousMonth:cs.l18n("prev-month"),nextMonth:cs.l18n("next-month"),months:cs.l18n("moment-months").split("_"),weekdays:cs.l18n("moment-weekdays").split("_"),weekdaysShort:cs.l18n("moment-weekdays-short").split("_")}},onBeforeDestroy:function(){this.picker.destroy()}})},{}],41:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"dimensions",binding:{initialize:function(e,t,n){var i=this.model.get("options");i.lock&&_.each(i.lock,function(e,t){this.$("[data-edge="+t+"]").prop("disabled",!0).val(e)},this),this.$("button.save");var o=function(){var e=t.get(n.observe);return e?_.clone(e):["0px","0px","0px","0px","unlinked"]};this.$("button.cs-link-dimensions").click(function(){var e=o();state="linked"==e[4]?"unlinked":"linked","linked"==state&&(e=_.map(e,function(){return e[0]})),e[4]=state,i.lock&&_.each(i.lock,function(t,n){"top"==n&&(e[0]=t),"right"==n&&(e[1]=t),"bottom"==n&&(e[2]=t),"left"==n&&(e[3]=t)},this),t.set(n.observe,e)}),this.$("[data-edge]").on("change keyup",_.bind(function(e){$changed=this.$(e.currentTarget);var s=o(),r=$changed.val().trim();""==r&&(r="0px"),"linked"==s[4]?(s=_.map(s,function(){return r}),s[4]="linked"):(s[$changed.parent().index()]=r,s[4]="unlinked"),i.lock&&_.each(i.lock,function(e,t){"top"==t&&(s[0]=e),"right"==t&&(s[1]=e),"bottom"==t&&(s[2]=e),"left"==t&&(s[3]=e)},this),t.set(n.observe,s)},this));var s=_.bind(function(e,t){$top=this.$("[data-edge=top]"),$right=this.$("[data-edge=right]"),$bottom=this.$("[data-edge=bottom]"),$left=this.$("[data-edge=left]"),$top.val()!=t[0]&&$top.val(t[0]),$right.val()!=t[1]&&$right.val(t[1]),$bottom.val()!=t[2]&&$bottom.val(t[2]),$left.val()!=t[3]&&$left.val(t[3]),$top.val()!=t[0]&&$top.val(t[0]),$right.val()!=t[1]&&$right.val(t[1]),$bottom.val()!=t[2]&&$bottom.val(t[2]),$left.val()!=t[3]&&$left.val(t[3]),this.$("button.cs-link-dimensions").toggleClass("active","linked"==t[4])},this);s(t,o()),this.listenTo(t,"change:"+n.observe,s)}}})},{}],42:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"editor",controlTemplate:"controls/textarea",bindingSelector:"textarea.cs-wp-editor",binding:{events:["keyup","change","cut","paste","focus"],onSet:function(e){return this.textReplace(e)},onGet:function(e){return this.textReplace(e)}},onProxyReady:function(){this.editorID="cswpeditor"+this.cid,tinyMCEPreInit.mceInit[this.editorID]=_.clone(tinyMCEPreInit.mceInit.cswpeditor),tinyMCEPreInit.mceInit[this.editorID].id=this.editorID,tinyMCEPreInit.mceInit[this.editorID].selector="#"+this.editorID,tinyMCEPreInit.qtInit[this.editorID]={buttons:"strong,em,del,link,img,close",id:this.editorID},tinyMCEPreInit.mceInit[this.editorID].setup=_.bind(function(e){var t=_.debounce(_.bind(function(){e.save(),this.$(".cs-wp-editor").trigger("change")},this),150);e.on("keyup change NodeChange",t)},this),this.markup=cs.config("editorMarkup").replace(new RegExp("cswpeditor","g"),this.editorID).replace(new RegExp("%%PLACEHOLDER%%","g"),this.proxy.get("content"))},updateContent:function(){},attachElContent:function(e){return this.$el.html(this.markup),this.$el.append(cs.template("controls/expand-control-button")()),this},onRender:function(){this.$(".button.insert-media.add_media").html('<span class="wp-media-buttons-icon"></span>'),this.$(".wp-media-buttons").children().not("#insert-media-button,#cs-insert-shortcode-button").detach(),_.defer(_.bind(function(){quicktags(tinyMCEPreInit.qtInit[this.editorID]),switchEditors.go(this.editorID,"html"),wpActiveEditor=this.editorID,_.defer(function(){delete QTags.instances[0]})},this))},onDestroy:function(){tinymce.EditorManager.execCommand("mceRemoveEditor",!0,this.editorID),delete QTags.instances[this.editorID],delete tinyMCEPreInit.mceInit[this.editorID],delete tinyMCEPreInit.qtInit[this.editorID]},replacements:{},textReplace:function(e){return e},onBeforeExpand:function(){switchEditors.go(this.editorID,"html")}})},{}],43:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"inspector/element-actions",controlName:"actions",ui:{duplicate:".action.duplicate","delete":".action.delete"},events:{"click @ui.duplicate":"duplicate","click @ui.delete":"elDelete"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},duplicate:function(){cs.global.trigger("element:duplicate",this.proxy.getSource())},elDelete:function(){cs.global.trigger("element:delete",this.proxy.getSource())}})},{}],44:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"icon-choose",childViewContainer:"ul.cs-choose",childView:CS.Mn.ItemView.extend({tagName:"li",template:"controls/icon-choose-item"}),events:{"keyup .cs-search-input":"search","search .cs-search-input":"search"},initialize:function(){this.iconData=cs.data.request("get:icons"),this.filteredIcons=this.iconData,this.iconNames=cs.config("fontAwesome"),this.lazyUpdateSearch=_.debounce(this.updateSearch,250)},search:function(){this.lazyUpdateSearch(this.$(".cs-search-input").val().toLowerCase().trim())},updateSearch:function(e){if(_.defer(_.bind(this.deferRender,this)),""==e)return void(this.filteredIcons=this.iconData);var t={};_.each(this.iconData,function(n,i){var o=_.reduce(n,function(t,n){return t+n.score(e)},0);o>.5&&(t[i]=n)}),this.filteredIcons=t},binding:{initialize:function(e,t,n){this.$("ul").on("click","li",_.bind(function(e){var i=this.$(e.currentTarget).data("choice");return i==t.get(n.observe)?void t.set(n.observe,""):(this.$prevIcon&&this.$prevIcon.removeClass("active"),this.$prevIcon=this.$(e.currentTarget),this.click=!0,t.set(n.observe,i),void this.$(e.currentTarget).addClass("active"))},this));var i=_.bind(function(e,t){if(this.$prevIcon&&this.$prevIcon.removeClass("active"),t&&""!=t){this.$prevIcon=this.$(".cs-icons-inner li[data-choice="+t+"]"),this.$prevIcon.addClass("active");var n=this.$prevIcon.position();!this.click&&n&&this.$(".cs-icons-inner").scrollTop(n.top).perfectScrollbar("update"),this.click=!1}},this);this.on("deferred:render",function(){i(t,t.get(n.observe))}),this.listenTo(t,"change:"+n.observe,i)}},onRender:function(){this.$("ul.cs-choose").empty();var e=0;_.each(this.filteredIcons,function(t,n){e++>20||this.$("ul.cs-choose").append(cs.template("controls/icon-choose-item")({code:n,choice:t[0],choices:t.join(" ")}))},this),this.$(".cs-icons-inner").perfectScrollbar({scrollYMarginOffset:10,wheelPropagation:!0}),_.defer(_.bind(this.deferRender,this))},deferRender:function(){this.$("ul.cs-choose").empty(),_.each(this.filteredIcons,function(e,t){this.$("ul.cs-choose").append(cs.template("controls/icon-choose-item")({code:t,choice:e[0],choices:e.join(" ")}))},this),this.$(".cs-icons-inner").perfectScrollbar("update"),this.trigger("deferred:render")}})},{}],45:[function(e,t,n){var i=Cornerstone.ControlViews.Base.extend({controlName:"image",binding:{initialize:function(e,t,n){this.$(".cs-image").on("click",_.bind(function(e){if(!this.$(e.currentTarget).hasClass("empty"))return void t.set(n.observe,"");var o=i.uploader;o.off("insert"),o.off("select"),o.on("insert",_.bind(function(){var e=o.state().get("selection").first().toJSON();t.set(n.observe,e.url)},this)),o.on("select",function(){var e=o.state();e&&"embed"==e.get("id")&&t.set(n.observe,e.props.get("url"))}),o.open()},this));var o=_.bind(function(e,t){var n=!t||""==t;this.$(".cs-image").toggleClass("empty",n).css({backgroundImage:n?"none":"url("+t+")"})},this);o(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,o)}},initialize:function(){i.createMediaFrame()},onRender:function(){var e=this.model.get("options");this.$(".cs-image").toggleClass("pattern",e.pattern===!0)}},{uploader:null,createMediaFrame:function(){null==this.uploader&&(this.uploader=new wp.media.view.MediaFrame.Cornerstone({className:"media-frame cs-media-frame",multiple:!1,title:"THAT TITLE THOUG",library:{type:"image"},button:{text:"Insert Image"}}))}});t.exports=i},{}],46:[function(e,t,n){t.exports={title:e("./title"),toggle:e("./toggle"),text:e("./text"),textarea:e("./textarea"),editor:e("./editor"),"code-editor":e("./code-editor"),image:e("./image"),select:e("./select"),wpselect:e("./wpselect"),sortable:e("./sortable"),number:e("./number"),color:e("./color"),choose:e("./choose"),"multi-choose":e("./multi-choose"),"icon-choose":e("./icon-choose"),dimensions:e("./dimensions"),date:e("./date"),"info-box":e("./info-box"),"custom-markup":e("./custom-markup"),breadcrumbs:e("./breadcrumbs"),"element-actions":e("./element-actions"),"column-actions":e("./column-actions"),"row-actions":e("./row-actions"),"section-actions":e("./section-actions"),"settings-actions":e("./settings-actions"),"layout-actions":e("./layout/layout-actions"),"template-actions":e("./layout/template-actions"),"template-select":e("./layout/template-select"),"template-remove":e("./layout/template-remove"),"sortable-sections":e("./layout/sortable-sections"),"sortable-rows":e("./layout/sortable-rows"),"column-layout":e("./layout/column-layout"),"column-order":e("./layout/column-order"),"template-save-dialog":e("./layout/template-save-dialog"),"template-upload-dialog":e("./layout/template-upload-dialog")}},{"./breadcrumbs":33,"./choose":34,"./code-editor":35,"./color":36,"./column-actions":37,"./custom-markup":39,"./date":40,"./dimensions":41,"./editor":42,"./element-actions":43,"./icon-choose":44,"./image":45,"./info-box":47,"./layout/column-layout":48,"./layout/column-order":50,"./layout/layout-actions":51,"./layout/sortable-rows":52,"./layout/sortable-sections":53,"./layout/template-actions":54,"./layout/template-remove":55,"./layout/template-save-dialog":56,"./layout/template-select":57,"./layout/template-upload-dialog":58,"./multi-choose":59,"./number":60,"./row-actions":61,"./section-actions":62,"./select":63,"./settings-actions":64,"./sortable":67,"./text":68,"./textarea":69,"./title":70,"./toggle":71,"./wpselect":72}],47:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"controls/info-box",controlName:"info-box",onCustomVisibility:function(){this.$el.toggleClass("hide",!cs.options.request("help:text"))}})},{}],48:[function(e,t,n){var i=e("../../../utility/row-validator");t.exports=Cornerstone.ControlViews.Base.extend({controlName:"column-layout",bindings:{"#column-layout":{observe:"_column_layout",events:["blur"],onSet:"formatColumnLayout",updateModel:"confirmFormat",initialize:function(e,t,n){this.$("#column-layout").keyup(function(e){13===e.keyCode&&Backbone.$(this).blur()}),setActive=_.bind(function(e,t){if("custom"!=t){var n=t.split(" + ");e.elements.each(function(e){if(_.isEmpty(n))return void e.set("_active",!1);e.set("_active",!0);var t=n.shift();e.set("size",t)}),e.elements.sort()}return this.$("#column-layout").hide(),this.$("li").removeClass("active"),$active=this.$('li[data-layout="'+t+'"]'),$active.length?void $active.addClass("active"):(this.$("li.custom").addClass("active"),void this.$("#column-layout").show())},this),this.$("ul li").click(_.bind(function(e){if($target=this.$(e.currentTarget),$target.hasClass("custom"))return void setActive(t,"custom");var o=$target.attr("data-layout");i.layoutIsValid(o)&&(t.set(n.observe,o),this.$("#column-layout").val(o))},this)),setActive(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,setActive),this.listenTo(t,"position:updated",this.render),this.listenTo(t.elements,"sort",function(){var e=[];t.elements.each(function(t){t.get("_active")&&e.push(t.get("size"))}),t.set("_column_layout",e.join(" + ").trim())})}}},formatColumnLayout:function(e,t){return i.reduceFractions(_.map(e.split("+"),function(e){return e.trim()}).join(" + "))},confirmFormat:function(e,t,n){return i.layoutIsValid(this.formatColumnLayout(e))},textReplacements:{"%%title%%":function(){return cs.l18n("row-numeric").replace("%s",this.proxy.getIndex()+1)}}})},{"../../../utility/row-validator":30}],49:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",template:"controls/column-order-item",ui:{handle:"span.handle"},events:{"dragula:drop":"updatePosition",mouseover:"mouseOver",mouseout:"mouseOut"},triggers:{"click @ui.handle":"click:action"},modelEvents:{"change:title":"render"},className:function(){return"cs-column-order-item cs-"+this.model.get("size").replace("/","-")},updatePosition:function(e,t,n){this.triggerMethod("update:position",e,t,n)},mouseOver:function(e){this.model.trigger("observe:start")},mouseOut:function(e){this.model.trigger("observe:end")}})},{}],50:[function(e,t,n){var i=e("../sortable");t.exports=i.extend({controlName:"column-order",emptyView:CS.Mn.ItemView.extend({tagName:"li",className:"column empty",template:!1}),dragulaConfig:function(){return{offset:function(e,t,n){return e.x=Backbone.$(n).width()/2,e},direction:"horizontal",revertOnSpill:!0}},getChildView:function(){return e("./column-order-item")},filterBy:"_active",canAdd:!1,textReplacements:{"%%title%%":function(){return cs.l18n("row-numeric").replace("%s",this.proxy.getIndex()+1)}},onChildviewClickAction:function(e){cs.events.trigger("inspect:element",e.model)},getSortableContainer:function(){return this.$("ul.cs-column-order")[0]}})},{"../sortable":67,"./column-order-item":49}],51:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"layout/actions",controlName:"actions",ui:{"new":".action.new",templates:".action.templates"},events:{"click @ui.new":"addItem","click @ui.templates":"openTemplates"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},addItem:function(){cs.events.trigger("add:section")},openTemplates:function(){cs.navigate.trigger("layout:templates")}})},{}],52:[function(e,t,n){var i=e("../sortable");t.exports=i.extend({emptyView:!1,wideControls:!0,confirmMessage:cs.l18n("layout-row-delete-confirm"),actions:[{icon:"copy",tooltip:cs.l18n("tooltip-copy")},{icon:"trash-o",tooltip:cs.l18n("tooltip-delete")},{icon:"search",tooltip:cs.l18n("tooltip-inspect")}],customChildTitle:function(e){return cs.l18n("row-numeric").replace("%s",this.children.length)},onChildviewClickActionAlt:function(e){cs.events.trigger("inspect:element",e.model)},onChildviewClickHandle:function(e){cs.events.trigger("inspect:layout",e.model)},onChildviewRender:function(e){var t=cs.navigate.request("layout:active:row");t&&e.model&&t.cid==e.model.cid&&e.$el.addClass("active")},onRemoveItem:function(e){var t=cs.navigate.request("layout:active:row");t&&e&&t.cid==e.cid&&_.defer(_.bind(function(){this.inspectFirst()},this))},inspectFirst:function(){cs.events.trigger("inspect:layout",this.collection.first())},onResetLastItem:function(){this.inspectFirst()}})},{"../sortable":67}],53:[function(e,t,n){var i=e("../sortable");t.exports=i.extend({emptyView:!1,canAdd:!1,confirmMessage:cs.l18n("layout-row-delete-confirm"),onChildviewClickHandle:function(e){cs.events.trigger("inspect:layout",e.model,{navigate:!0}),cs.navigate.trigger("auto:focus","title")},onAfterBaseRender:function(){this.$el.toggleClass("hide",0==this.collection.length)}})},{"../sortable":67}],54:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-template-actions cs-control-divider",template:"layout/sub-templates/template-actions",controlName:"actions",ui:{save:".action.save",upload:".action.upload"},events:{"click @ui.save":"save","click @ui.upload":"upload"},initialize:function(e){cs.channel.trigger("block:gen"),this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},save:function(){this.proxy.set("action","save")},upload:function(){this.proxy.set("action","upload")}})},{}],55:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"template-select",bindingSelector:"select",ui:{remove:"button.remove"},triggers:{"click @ui.block":"insert:block"},behaviors:{Confirm:{ui:"remove",message:cs.l18n("templates-remove-message")}},onCustomVisibility:function(){var e=this.model.get("options");this.$el.toggleClass("hide",e.choices&&e.choices.length<1)},onConfirmAccept:function(){cs.templates.trigger("delete",this.$("select").val())}})},{}],56:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"layout/sub-templates/save-dialog",controlName:"template-save-dialog",bindingSelector:"input[type=text]",ui:{download:".action.download",save:".action.save",close:"button.close"},events:{"click @ui.download":"download","click @ui.save":"save","click @ui.close":"close"},
behaviors:{Confirm:{ui:"save",message:cs.l18n("templates-save-message"),yep:cs.l18n("templates-save-yep"),nope:cs.l18n("templates-save-nope")}},onConfirmAccept:function(){cs.templates.trigger("save","page",this.proxy.get("title")),this.close()},onConfirmDecline:function(){cs.templates.trigger("save","block",this.proxy.get("title")),this.close()},download:function(){cs.templates.trigger("download",this.proxy.get("title")),this.proxy.set("action","none")},close:function(){this.proxy.set("action","none")},onCustomVisibility:function(e){e&&this.$('input[type="text"]').focus()}})},{}],57:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"template-select",bindingSelector:"select",ui:{page:"button.page",block:"button.block"},triggers:{"click @ui.block":"insert:block"},behaviors:{Confirm:{ui:"page",message:cs.l18n("templates-overwrite-message"),yep:cs.l18n("templates-overwrite-yep"),nope:cs.l18n("templates-overwrite-nope")}},onCustomVisibility:function(){var e=this.model.get("options");this.$el.toggleClass("hide",e.choices&&e.choices.length<1)},onConfirmAccept:function(){_.defer(_.bind(function(){cs.templates.trigger("import",this.$("select").val(),"page")},this))},onInsertBlock:function(){_.defer(_.bind(function(){cs.templates.trigger("import",this.$("select").val(),"block")},this))}})},{}],58:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"layout/sub-templates/upload-dialog",controlName:"template-upload-dialog",ui:{upload:"button.process",close:"button.close"},events:{"click @ui.close":"close"},behaviors:{Confirm:{ui:"upload",message:cs.l18n("templates-upload-message"),yep:cs.l18n("templates-upload-yep"),nope:cs.l18n("templates-upload-nope")}},initialize:function(){this.listenTo(cs.data,"template:upload:complete",this.uploadComplete)},onConfirmAccept:function(){_.defer(_.bind(this.upload,this),"page")},onConfirmDecline:function(){_.defer(_.bind(this.upload,this),"block")},upload:function(e){cs.message.trigger("notice","Cornerstone is uploading your template...");var t=this.$("#template-upload")[0].files[0];if(!t||t.name.match(/.+\.csl/)){var n=new FileReader;n.onload=function(t){cs.data.trigger("template:upload:complete",JSON.parse(n.result),e)};try{n.readAsText(t)}catch(i){cs.message.trigger("error",cs.l18n("templates-error-read"))}}else cs.message.trigger("error",cs.l18n("templates-error-upload")),console.warn("Invalid template file")},uploadComplete:function(e,t){cs.templates.trigger("import",e.elements,t),this.resetForm(),this.close()},resetForm:function(){var e=this.$("#template-upload");e.replaceWith(e.clone())},close:function(){this.proxy.set("action","none")}})},{}],59:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"multi-choose",controlTemplate:"controls/choose",binding:{initialize:function(e,t,n){this.$("li").on("click",_.bind(function(e){var i=_.clone(t.get(n.observe)),o=this.$(e.currentTarget).data("choice");_.isArray(i)||(i=[]),_.contains(i,o)?i=_.without(i,o):i.push(o),t.set(n.observe,i),t.trigger("change:"+n.observe,t,i,{})},this));var i=_.bind(function(e,t){this.$("li").removeClass("active").siblings(_.reduce(t||[],function(e,t){return e+",[data-choice="+t+"]"},".always-on")).addClass("active")},this);i(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,i)}},onBeforeRender:function(){var e=this.model.get("options");_.contains(["2","3","4","5"],e.columns)||(e.columns="2",this.model.set("options",e))}})},{}],60:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"number",bindingSelector:"input[type=number]"})},{}],61:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"inspector/row-actions",controlName:"actions",ui:{layout:".action.manage-layout","delete":".action.delete"},events:{"click @ui.delete":"elDelete","click @ui.layout":"layout"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},layout:function(){cs.events.trigger("inspect:layout",this.proxy.getSource(),{navigate:!0})},elDelete:function(){cs.global.trigger("element:delete",this.proxy.getSource())}})},{}],62:[function(e,t,n){arguments[4][61][0].apply(n,arguments)},{dup:61}],63:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"select",bindingSelector:"select",controlEvents:{"change select":"notLiveTrigger"},onAfterBaseRender:function(){var e=this.model.get("options");_.each(e.choices,function(e){e.disabled&&this.$('option[value="'+e.value+'"]').prop("disabled",!0)},this)}})},{}],64:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"settings/actions",controlName:"actions",ui:{triggerCSS:".action.css",triggerJS:".action.js"},events:{"click @ui.triggerJS":"triggerJS","click @ui.triggerCSS":"triggerCSS"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0,this.jsMessage=_.once(function(){})},triggerCSS:function(){cs.navigate.trigger("open:code:editor","custom_css")},triggerJS:function(){return cs.config("unfilteredHTML")?(cs.navigate.trigger("open:code:editor","custom_js"),void this.jsMessage()):void cs.message.trigger("notice",cs.l18n("settings-js-denied"),8e3)}})},{}],65:[function(e,t,n){var i=e("./sortable-item");t.exports=i.extend({className:"sortable-item wide-controls",template:"controls/sortable-item-wide",ui:{action:"button.action1",confirm:"button.action2",actionAlt:"button.action3",handle:"span.handle"},triggers:{"click @ui.action":"clickAction","click @ui.actionAlt":"clickActionAlt","click @ui.handle":"click:handle"}})},{"./sortable-item":66}],66:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"sortable-item",template:"controls/sortable-item",ui:{action:"button.action1",confirm:"button.action2",handle:"span.handle"},events:{"dragula:drop":"updatePosition",mouseover:"mouseOver",mouseout:"mouseOut"},triggers:{"click @ui.action":"clickAction","click @ui.handle":"click:handle"},modelEvents:{"change:title":"render"},behaviors:{Confirm:{message:function(){return this.atFloor()?cs.l18n("sortable-at-floor"):this.confirmMessage},yep:function(){return cs.l18n("confirm-yep")},nope:function(){return this.atFloor()?cs.l18n("confirm-back"):cs.l18n("confirm-nope")}},ConfirmWarn:{message:function(){return cs.l18n("sortable-at-cap")},yep:function(){return""},nope:function(){return cs.l18n("confirm-back")}}},canQuickConfirm:!0,updatePosition:function(e,t,n){this.triggerMethod("update:position",e,t,n)},serializeData:function(){var e=_.extend(CS.Mn.ItemView.prototype.serializeData.apply(this,arguments),{actions:this.actions});return _.isFunction(this.customTitle)?e.title=this.customTitle(this):e.title=this.model.get(this.title_field),e},mouseOver:function(e){this.model.trigger("observe:start")},mouseOut:function(e){this.model.trigger("observe:end")}})},{}],67:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"sortable",childViewContainer:"ul",actions:[{icon:"copy",tooltip:cs.l18n("tooltip-copy")},{icon:"trash-o",tooltip:cs.l18n("tooltip-delete")}],wideControls:!1,getChildView:function(){return e(this.wideControls?"./sortable-item-wide":"./sortable-item")},confirmMessage:cs.l18n("sortable-remove"),dragulaConfig:function(){return{offset:function(e,t,n){return e.y=Backbone.$(n).height()/2,e},revertOnSpill:!0}},buildChildView:function(e,t,n){var i=new t(_.extend({model:e},n));return i.atFloor=_.bind(function(){return this.floor>=this.collection.length},this),i.atCap=_.bind(function(){return!_.isNull(this.capacity)&&this.capacity<=this.collection.length},this),_.isFunction(this.customChildTitle)&&(i.customTitle=_.bind(this.customChildTitle,this)),i.title_field=this.title_field,i.actions=this.actions,i.confirmMessage=this.confirmMessage,i},emptyView:CS.Mn.ItemView.extend({tagName:"li",className:"sortable-item empty",template:"controls/sortable-empty",events:{"click span.handle":"click"},click:function(e){this.triggerMethod("empty:click:add",e)}}),sort:!1,filterBy:!1,canAdd:!0,canCompact:!1,ui:{add:"button.cs-add-sortable-item"},events:{"click @ui.add":"addItem"},initialize:function(){this.drake=Cornerstone.Vendor.dragula(_.result(this,"dragulaConfig")),this.drake.on("drag",function(e){cs.events.trigger("preview:no-pointer",!0)}),this.drake.on("dragend",function(e){cs.events.trigger("preview:no-pointer",!1)}),this.drake.on("drop",function(e,t,n,i){Backbone.$(e).trigger("dragula:drop",[t,n,i])})},controlData:function(){var e={canAdd:this.canAdd};return!_.isNull(this.capacity)&&this.collection.length>=this.capacity&&(e.canAdd=!1),e.empty=0==this.collection.length,e},onChildviewEmptyClickAdd:function(e){this.addItem()},onChildviewUpdatePosition:function(e,t,n,i){_.defer(_.bind(function(){this.triggerMethod("item:before:position:updated",e),this.collection.trigger("update:position",e.model,e.$el.index()),this.triggerMethod("item:position:updated",e)},this))},filter:function(e,t,n){return this.filterBy?e.get(this.filterBy):!0},onProxyReady:function(){this.collection=this.proxy.elements,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"sort",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"add",this.render);var e=this.model.get("options");e.type&&(this.collection.childType=e.type),this.floor=e.floor||0,this.title_field=e.title_field||"title",this.capacity=e.capacity?e.capacity:null},onChildviewClickAction:function(e){e.atCap()?e.trigger("confirm:warn:open"):cs.elements.trigger("duplicate",e.model)},onChildviewClickHandle:function(e){cs.events.trigger("inspect:element",e.model,!1);var t="settings"==cs.navigate.request("active:pane")?"settings":"inspector";cs.navigate.trigger(t+":item")},onChildviewConfirmAccept:function(e){var t=e.atFloor();this.triggerMethod("remove:item",e.model),cs.elements.trigger("delete",{model:e.model}),t&&(this.addItem(),this.triggerMethod("reset:last:item"))},getSortableContainer:function(){return this.$("ul.cs-sortable")[0]},onRender:function(){this.drake.containers=[],this.drake.containers.push(this.getSortableContainer()),this.triggerMethod("after:render")},addItem:function(){var e=this.model.get("options"),t=e.newTitle||cs.l18n("sortable-default");cs.elements.trigger("add:item",e.element,this.proxy,t,e.title_field)},onDestroy:function(){this.drake.destroy()}})},{"./sortable-item":66,"./sortable-item-wide":65}],68:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"text",bindingSelector:"input[type=text]",controlEvents:{"blur input":"notLiveTrigger"},onRender:function(){var e=this.model.get("options");e.placeholder&&this.$("input[type=text]").attr("placeholder",e.placeholder)}})},{}],69:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"textarea",bindingSelector:"textarea",htmlhint:{"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!1,"src-not-empty":!1,"attr-no-duplication":!1,"title-require":!1},onProxyReady:function(){var e=this.model.get("options");e.expandable||e.expandable===!1||(e.expandable=e.controlTitle||!0,this.model.set("options",e))},onRender:function(){var e=this.model.get("options");if(e.placeholder&&this.$("textarea").attr("placeholder",e.placeholder),e.htmlhint){var t=this.$("textarea");t.on("blur",_.bind(function(){var e=_.map(Cornerstone.Vendor.HTMLHint.verify(t.val(),this.htmlhint),function(e){return e.rule.id});_.isEmpty(e)||cs.message.trigger("error",CS.Mn.Renderer.render("utility/htmlhint",{errors:e}),7e3)},this))}}})},{}],70:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"title",divider:!0,canCompact:!1,bindingSelector:"input[type=text]",ui:{inspect:"button.cs-title-button"},triggers:{"click @ui.inspect":"inspect"},onInspect:function(){cs.events.trigger("inspect:element",this.proxy.getSource())}})},{}],71:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"toggle",binding:{initialize:function(e,t,n){this.$("ul.cs-toggle").on("click",_.bind(function(e){t.set(n.observe,this.$(e.currentTarget).hasClass("off")),this.notLiveTrigger()},this));var i=_.bind(function(e,t){var t=t||this.model.get("default")||!1;this.$(".cs-toggle").toggleClass("on",t).toggleClass("off",!t)},this);i(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,i)}}})},{}],72:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"wpselect",bindingSelector:"select",controlEvents:{"change select":"notLiveTrigger"},onBeforeBaseRender:function(){var e=this.model.get("options");this.$select=Backbone.$(e.markup||'<select class="empty"></select>'),this.wpDefault=this.$select.val(),this.$(".cs-wp-select").append(this.$select)}})},{}],73:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-confirm",template:"extra/confirm",defaultConfig:{message:cs.l18n("confirm-message"),allowQuickConfirm:!1,subtext:!1,yep:cs.l18n("confirm-yep"),nope:cs.l18n("confirm-nope"),classes:[],view:null},events:{"click .yep":"acceptDebounce","click .nope":"declineDebounce"},initialize:function(e){this.data=_.clone(this.defaultConfig),this.acceptDebounce=_.debounce(_.bind(this.accept,this),500,!0),this.declineDebounce=_.debounce(_.bind(this.decline,this),500,!0),this.listenTo(cs.confirm,"abort",this.declineDebounce),this.listenTo(cs.confirm,"open",this.open)},open:function(e,t){return this.context=t||{},this.data=_.extend(_.clone(this.defaultConfig),e),this.data.allowQuickConfirm&&cs.data.request("delete:confirm:key")?void this.accept():(this.render(),void this.$el.addClass("active"))},serializeData:function(){var e=_.clone(this.data);return _.isFunction(e.message)&&(e.message=e.message.call(this.context)),_.isFunction(e.subtext)&&(e.subtext=e.subtext.call(this.context)),_.isFunction(e.classes)&&(e.classes=e.classes.call(this.context)),_.isFunction(e.yep)&&(e.yep=e.yep.call(this.context)),_.isFunction(e.nope)&&(e.nope=e.nope.call(this.context)),e.classes.unshift("cs-confirm-content"),e.contentClass=e.classes.join(" "),e},accept:function(){_.isFunction(this.data.accept)&&this.data.accept(),this.$el.removeClass("active")},decline:function(){_.isFunction(this.data.decline)&&this.data.decline(),this.$el.removeClass("active")}})},{}],74:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"button",className:"expand cs-icon",template:!1,attributes:{"data-cs-icon":cs.fontIcon("play-circle")},events:{click:"collapse"},initialize:function(){Backbone.$("body").toggleClass("cs-editor-active",!0).toggleClass("cs-editor-inactive",!1),this.listenTo(cs.extra,"flyout:collapse",function(){Backbone.$("body").toggleClass("cs-editor-active",!1).toggleClass("cs-editor-inactive",!0),cs.extra.trigger("set:collapse",!0)}),this.listenTo(cs.extra,"set:collapse",function(e){cs.extra.reply("get:collapse",e),cs.global.trigger("set:collapse",e)})},collapse:function(e){cs.extra.trigger("set:collapse",!1),Backbone.$("body").toggleClass("cs-editor-active",!0).toggleClass("cs-editor-inactive",!1),cs.extra.trigger("flyout","collapse")}})},{}],75:[function(e,t,n){var i=e("../controls/control-collection");t.exports=CS.Mn.ItemView.extend({className:"cs-expanded-content-outer",template:"extra/expanded-control",events:{"click .cs-expanded-close":"shutdown",keyup:"escape"},initialize:function(e){this.listenTo(cs.extra,"set:collapse",this.collape),this.linkedView=null,this.listenTo(cs.events,"expand:control",this.open)},onRender:function(){this.controlView=new i({collection:cs.component("inspector").getExpansionControls()}),this.controlView.render(),this.$(".cs-expanded-content-inner").append(this.controlView.$el)},open:function(){this.$el.addClass("active"),_.defer(_.bind(function(){this.$("textarea").height(.6*this.$el.height()).focus()},this))},escape:function(e){27===e.keyCode&&this.shutdown()},collape:function(e){e&&this.shutdown()},shutdown:function(){cs.events.trigger("expand:close"),this.$el.removeClass("active")}})},{"../controls/control-collection":38}],76:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-home",template:"extra/home",initialize:function(){this.listenTo(cs.channel,"save:complete",this.render),this.listenTo(cs.channel,"update:saved:last",this.render)},serializeData:function(){var e=cs.data.request("saved:last"),t=2,n={savedLastMessage:_.isNull(e)?cs.l18n("home-unsaved"):cs.l18n("home-saved-last").replace("%s",e.fromNow()),savedLastClass:_.isNull(e)||e.isBefore(new Date((new Date).getTime()-6e4*t))?"warn":"happy",dashboardEditUrl:cs.config("dashboardEditUrl"),frontEndUrl:cs.config("frontEndUrl")};return n}})},{}],77:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({className:"cs-options",getChildView:function(e){return cs.controlLookup(e.get("type"))},template:_.template('<div id="options-controls"><ul class="cs-controls"></ul></div>'),childViewContainer:"ul.cs-controls",initialize:function(){this.collection=cs.component("options").inspect.controls}})},{}],78:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-respond",template:"extra/respond",events:{"click button":"handleClick"},initialize:function(){cs.extra.reply("width","xl"),this.listenTo(cs.extra,"respond:width",this.setRespond)},handleClick:function(e){this.$("button").removeClass("active"),this.$(".cs-respond-labels div").removeClass("active"),this.$(e.currentTarget).addClass("active");var t=this.$(e.currentTarget).data("respond");cs.extra.reply("width",t),this.$('.cs-respond-labels div[data-respond="'+t+'"]').addClass("active"),cs.extra.trigger("respond:width",t)},onRender:function(){var e=cs.extra.request("width");this.$('button[data-respond="'+e+'"]').addClass("active"),this.$('.cs-respond-labels [data-respond="'+e+'"]').addClass("active")},setRespond:function(e){var t=Backbone.$(".cs-preview");t.removeClass("cs-respond-xl cs-respond-lg cs-respond-md cs-respond-sm cs-respond-xs"),e&&t.addClass("cs-respond-"+e)}})},{}],79:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-saved",template:"extra/save-complete",messages:cs.l18n("save-complete-messages"),serializeData:function(){return{message:this.messages[Math.floor(Math.random()*this.messages.length)]}},onRender:function(){this.$el.css({display:"none",opacity:1}).removeClass("saved-out")},onSaveComplete:function(){return cs.config("visualEnhancements")?(this.$el.css({display:"table"}).addClass("saved-in"),void setTimeout(_.bind(function(){this.$el.animate({opacity:0},650,"linear",_.bind(function(){this.$el.css({display:"none",opacity:1}).removeClass("saved-out")},this)).removeClass("saved-in").addClass("saved-out"),setTimeout(_.bind(function(){this.render()},this),1e3)},this),1e3)):void cs.message.trigger("success",cs.l18n("save-complete-simple"),1250)}})},{}],80:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control-empty",template:"inspector/blank-state"})},{}],81:[function(e,t,n){var i=e("../controls/control-collection"),o=e("../main/base-pane");t.exports=o.extend({name:"inspector",initialize:function(){this.listenTo(cs.navigate,"refresh:inspector:heading",this.updateHeading)},onShowContent:function(){this.Content.show(new i({collection:cs.component("inspector").getPrimaryControls(),emptyView:e("./empty-controls")}))},updateHeading:function(){this.$("h2").text(cs.navigate.request("inspector:heading"))},onOpenSubItem:function(){this.Sub.show(new i({collection:cs.component("inspector").getSecondaryControls(),emptyView:e("./empty-controls")}))},updateSerializeData:function(e){var t=cs.navigate.request("inspector:heading");return t&&(e.heading=t),e}})},{"../controls/control-collection":38,"../main/base-pane":88,"./empty-controls":80}],82:[function(e,t,n){var i=e("../controls/control-collection"),o=e("../main/base-pane");t.exports=o.extend({name:"layout",onShowContent:function(){this.Content.show(new i({collection:cs.component("layout").inspect.primary.controls}))},onOpenSubRows:function(){e("./sub-row/layout-sub-rows");this.Sub.show(new i({collection:cs.component("layout").inspect.secondary.controls}))},onOpenSubTemplates:function(){var t=e("./sub-templates/layout-sub-templates");this.Sub.show(new t)}})},{"../controls/control-collection":38,"../main/base-pane":88,"./sub-row/layout-sub-rows":83,"./sub-templates/layout-sub-templates":84}],83:[function(e,t,n){e("../../controls/control-collection");t.exports=CS.Mn.LayoutView.extend({template:"layout/sub-row/layout-sub-row",className:"cs-pane-content-inner row",regions:{Controls:"#layout-row-controls"},initialize:function(){},setActiveRow:function(e){},onBeforeShow:function(){}})},{"../../controls/control-collection":38}],84:[function(e,t,n){var i=e("../../controls/control-collection");t.exports=CS.Mn.LayoutView.extend({template:"layout/sub-templates/layout-sub-template",className:"cs-pane-content-inner templates",regions:{Controls:"#layout-template-controls"},initialize:function(){this.listenTo(cs.templates,"control:reset",function(){this.onBeforeShow()})},onBeforeShow:function(){this.Controls.show(new i({collection:cs.component("layout-templates").controls}))}})},{"../../controls/control-collection":38}],85:[function(e,t,n){var i=e("../main/base-pane");t.exports=i.extend({name:"elements",paneTemplate:"library/search",paneEvents:{"keyup #elements-search":"search","search #elements-search":"search"},onShowContent:function(){var t=e("./library-list");this.Content.show(new t({collection:cs.elementLibrary.get("builder")}))},search:function(){var e=cs.elementLibrary.search("builder",this.$("#elements-search").val().toLowerCase().trim());cs.search.reply("elements",e),cs.search.trigger("elements"),this.$(".cs-pane-content-inner").perfectScrollbar("update")},onShow:function(){this.$("#elements-search").focus()}})},{"../main/base-pane":88,"./library-list":87}],86:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-element-stub",template:"library/element-stub",attributes:function(){var e={};return cs.options.request("skeleton:mode")||"function"==typeof MouseEvent||(e.draggable="true"),e},initialize:function(){this.listenTo(cs.events,"toggle:skeleton:mode",function(){this.$el.attr(_.extend({},_.result(this,"attributes")))}),this.listenTo(cs.global,"drag:exit",function(){this.clone&&(Backbone.$(this.clone).hide(),Backbone.$("#preview").one("mouseleave",_.bind(function(){cs.global.trigger("drag:resume")},this)))}),this.listenTo(cs.global,"drag:resume",function(){this.clone&&Backbone.$(this.clone).show()})},serializeData:function(){return _.extend(CS.Mn.ItemView.prototype.serializeData.apply(this,arguments),{icon:cs.icon(this.model.get("icon"))})},events:{"dragstart.h5s":"setData","dragend.h5s":"endDrag","dragula:start":"dragStart"},endDrag:function(e){cs.global.trigger("dragging",!1)},dragStart:function(e,t){this.clone=t,this.setIncoming()},setIncoming:function(){cs.global.trigger("incoming:element",this.model.get("name"))},setData:function(e){cs.global.trigger("dragging",!0),this.setIncoming();var t=e.originalEvent.dataTransfer;t.effectAllowed="copy";var n=JSON.stringify({action:"create",_type:this.model.get("name")}),i=this.$("svg");i.length&&t.setDragImage(i[0],25,25),t.setData("cornerstone/element",n)}})},{}],87:[function(e,t,n){t.exports=CS.Mn.CollectionView.extend({className:"cs-elements",childView:e("./element-stub"),childViewContainer:".cs-pane-section ul",initialize:function(){this.listenTo(cs.search,"elements",this.render)},onBeforeRender:function(){this.searchResults=cs.search.request("elements")||""},viewComparator:function(e){var t=_.isArray(this.searchResults)?this.searchResults:[];return _.indexOf(t,e.get("name"))},filter:function(e,t,n){return this.searchResults&&""!=this.searchResults?_.contains(this.searchResults,e.get("name")):!0}})},{"./element-stub":86}],88:[function(e,t,n){var i=CS.Mn.LayoutView.extend({name:"undefined",className:function(){return"cs-pane "+this.name},template:"main/pane",paneTemplate:!1,regions:{Content:"#content",Sub:"#sub"},events:function(){return _.extend({"click button.cs-builder-sub-back":"back"},this.paneEvents)},paneEvents:{},onBaseOpenSub:function(e){this.Sub.empty(),cs.navigate.trigger("subpane:opened",this.name+":"+e),this.triggerMethod("open:sub"),this.triggerMethod("open:sub:"+e),this.$(".cs-builder-sub").addClass("active").find(".cs-pane-content-inner").perfectScrollbar({suppressScrollX:!0,scrollYMarginOffset:25})},onBaseCloseSub:function(){this.$(".cs-builder-sub").removeClass("active"),this.Sub&&this.Sub.show(new Cornerstone.Mn.ItemView({template:_.template(this.$("#sub").html())})),this.triggerMethod("close:sub")},back:function(){cs.navigate.trigger(this.name+":home")},onBeforeShow:function(){this.Sub.empty(),this.Content.empty(),this.triggerMethod("show:content")},serializeData:function(){var e=_.extend(CS.Mn.LayoutView.prototype.serializeData.apply(this,arguments),{heading:cs.l18n(this.name+"-heading"),returnButtonText:cs.l18n(this.name+"-return"),paneTemplate:this.paneTemplate,name:this.name});return _.isFunction(this.updateSerializeData)?this.updateSerializeData(e):e}});t.exports=i},{}],89:[function(e,t,n){var i=e("./header"),o=e("./footer"),s=e("../extra/expansion"),r=e("./skeleton");t.exports=CS.Mn.LayoutView.extend({template:"main/editor",regions:{Header:"#header",Pane:"#pane",Footer:"#footer",Expansion:"#expand",Skeleton:"#skeleton"},panes:{layout:e("../layout/layout"),elements:e("../library/element-library"),inspector:e("../inspector/inspector"),settings:e("../settings/settings")},initialize:function(){this.listenTo(cs.navigate,"pane",this.changePane),this.listenTo(cs.navigate,"scrollbar:update",this.scrollbarUpdate),this.listenTo(cs.options,"editor:position",this.setEditorPosition),this.listenTo(cs.message,"notice",this.growlNotice),this.listenTo(cs.message,"success",this.growlSuccess),this.listenTo(cs.message,"error",this.growlError),this.listenTo(cs.data,"control:not:live",this.controlNotLive),this.sentControlMessages=[],Backbone.$("#cornerstone").on("mouseenter mouseleave",".cs-sortable li.sortable-item",_.bind(this.sortableHover,this)),"settings"==localStorage.CornerstonePane&&(cs.data.reply("saved:last",Cornerstone.Vendor.moment()),cs.channel.trigger("update:saved:last")),this.listenTo(cs.events,"preview:no-pointer",this.togglePreviewPointerEvents),this.listenTo(cs.events,"skeleton:dragging",this.toggleDragging),this.keybindingToggleClasses()},onRender:function(){var e=localStorage.CornerstonePane;localStorage.CornerstonePane=!1,cs.data.reply("scrollbar:width",this.getScrollbarWidth()),this.changePane(_.has(this.panes,e)?e:"layout"),this.Header.show(new i),this.Footer.show(new o),this.Expansion.show(new s),this.Skeleton.show(new r({model:cs.post.data})),this.Expansion.$el.detach(),this.$el.after(this.Expansion.$el),this.Skeleton.$el.detach(),this.$el.after(this.Skeleton.$el),this.setEditorPosition()},changePane:function(e,t){cs.tooltips.trigger("kill"),this.activePane!=e&&(cs.navigate.trigger("pane:switch"),this.Pane.show(new this.panes[e])),this.activePane=e,cs.navigate.reply("active:pane",this.activePane),t?this.Pane.currentView.triggerMethod("base:open:sub",t):this.Pane.currentView.triggerMethod("base:close:sub"),this.$(".cs-pane-content-inner").perfectScrollbar({suppressScrollX:!0,scrollYMarginOffset:25})},sortableHover:function(e){Backbone.$(e.currentTarget).toggleClass("hover","mouseenter"===e.type)},controlNotLive:function(e,t){_.contains(this.sentControlMessages,e)||(this.sentControlMessages.push(e),cs.message.trigger("notice",cs.l18n(t)))},growlNotice:function(e,t){this.growlMessage({title:cs.l18n("message-notice"),style:"notice"},arguments)},growlSuccess:function(){this.growlMessage({title:cs.l18n("message-success"),style:"success"},arguments)},growlError:function(){this.growlMessage({title:cs.l18n("message-error"),style:"error"},arguments)},growlMessage:function(e,t){var n={message:"",duration:4e3};t&&t[0]&&(n.message=t[0]),t&&t[1]&&(n.duration=t[1]),t&&t[2]&&(n.title=t[2]);var i=_.extend(e,n);i.duration<5e3&&(i.close=""),Backbone.$.growl(i);var o=cs.data.request("scrollbar:width");o>0&&Backbone.$("#growls").css({right:o})},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i},scrollbarUpdate:function(){this.$(".cs-pane-content-inner").perfectScrollbar("update")},setEditorPosition:function(){Backbone.$("#cornerstone").toggleClass("cs-right","right"==cs.options.request("editor:position"))},keybindingToggleClasses:function(){this.listenTo(cs.events,"delete:confirm:key",function(e){Backbone.$("body").toggleClass("cs-delete-confirm",e)})},togglePreviewPointerEvents:function(e){Backbone.$("#preview").toggleClass("no-pointer")},toggleDragging:function(e){Backbone.$("body").toggleClass("cs-hide-cursor",e)}})},{"../extra/expansion":75,"../inspector/inspector":81,"../layout/layout":82,"../library/element-library":85,"../settings/settings":112,"./footer":90,"./header":91,"./skeleton":94}],90:[function(e,t,n){var i=e("../extra/expand"),o=e("../extra/confirm"),s=e("../extra/home"),r=e("../extra/respond"),a=(e("../extra/options"),e("../extra/save-complete"));t.exports=CS.Mn.ItemView.extend({template:"main/footer",ui:{home:"button.home",collapse:"button.collapse",helptext:"button.help-text",skeleton:"button.skeleton-mode",respond:"button.respond",save:"button.save"},events:{"click @ui.home":"toggleHome","click @ui.collapse":"toggleCollapse","click @ui.helptext":"toggleHelpText","click @ui.skeleton":"toggleSkeletonMode","click @ui.respond":"toggleRespond","click @ui.save":"save"},initialize:function(){this.listenTo(cs.extra,"flyout:updated",this.toggleMode),this.listenTo(cs.data,"save:success",this.saveComplete),this.listenTo(cs.data,"save:error",this.saveComplete),this.listenTo(cs.tooltips,"kill",this.killTooltip),Backbone.$("#cornerstone").on("mouseenter mouseleave","[data-tooltip-message]",_.bind(this.toggleTooltip,this)),this.modules={home:new s,expand:new i,respond:new r,save:new a,confirm:new o},this.panels=_.pick(this.modules,"home","expand","respond","save","confirm"),cs.extra.on("collapse",function(e){cs.global.trigger("collapse","on"==e)}),this.panelMode="none",this.listenTo(cs.extra,"flyout",function(e,t){var n=e!=this.panelMode;cs.extra.trigger("flyout:updated",e,n,this.panelMode),e!=this.panelMode&&cs.extra.trigger("flyout:"+e),this.panelMode=n?e:"none";var i="none"!=this.panelMode,e=this.panelMode;i?_.delay(function(){Backbone.$(".cs-editor").addClass("flyout").attr("data-flyout",e),cs.navigate.trigger("scrollbar:update")},650):(Backbone.$(".cs-editor").removeClass("flyout").attr("data-flyout","none"),cs.navigate.trigger("scrollbar:update"))}),this.listenTo(cs.extra,"toggle",function(e){_.defer(_.bind(function(){this.$('button[data-toggle="'+e+'"]').toggleClass("active",cs.options.request(e))},this))}),this.listenTo(cs.global,"preview:failure",function(){this.$("button.skeleton-mode").prop("disabled",!0)})},onRender:function(){var e=this.$(".cs-editor-extra");_.each(this.modules,function(t){e.append(t.render().$el)}),this.$("button[data-toggle]").each(function(){var e=Backbone.$(this);e.toggleClass("active",cs.options.request(e.attr("data-toggle")))})},toggleTooltip:function(e){var t=Backbone.$(e.currentTarget).data("tooltip-message"),n="mouseenter"===e.type&&t&&cs.options.request("help:text");return n&&this.$(".cs-tooltip-inner").text(t),this.tooltipTimer?(window.clearTimeout(this.tooltipTimer),void(this.tooltipTimer=void 0)):void(this.tooltipTimer=window.setTimeout(_.bind(function(){this.tooltipTimer=void 0,this.$(".cs-tooltip-outer").toggleClass("active",n)},this),n?333:250))},killTooltip:function(){this.tooltipTimer=void 0,this.$(".cs-tooltip-outer").toggleClass("active",!1)},toggleHome:function(){cs.extra.trigger("flyout","home");
},toggleCollapse:function(){cs.extra.trigger("flyout","collapse")},toggleHelpText:function(){cs.extra.trigger("toggle","help:text")},toggleSkeletonMode:function(){cs.extra.trigger("toggle","skeleton:mode")},toggleRespond:function(e){cs.extra.trigger("flyout","respond")},save:function(){this.$("button.save").prop("disabled",!0),cs.events.trigger("action:save")},saveComplete:function(){this.$("button.save").removeProp("disabled"),this.panels.save.triggerMethod("save:complete")},saveError:function(){this.$("button.save").removeProp("disabled"),cs.message.trigger("error",cs.l18n("save-error"),3e4)},toggleMode:function(e,t,n){this.$("nav button.has-flyout").removeClass("active"),_.each(this.panels,function(e){e.$el.removeClass("active")}),t&&(this.$("button.has-flyout."+e).addClass("active"),this.$(".cs-editor-extra .cs-"+e).addClass("active"))}})},{"../extra/confirm":73,"../extra/expand":74,"../extra/home":76,"../extra/options":77,"../extra/respond":78,"../extra/save-complete":79}],91:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"nav",template:"main/header",events:{"click button.layout":"layout","click button.inspector":"inspector","click button.elements":"elements","click button.settings":"settings"},initialize:function(){this.listenTo(cs.navigate,"pane",this.changePane)},onRender:function(){this.changePane(cs.navigate.request("active:pane"))},layout:function(){cs.navigate.trigger("pane","layout")},inspector:function(){cs.navigate.trigger("pane","inspector")},elements:function(){cs.navigate.trigger("pane","elements")},settings:function(){cs.navigate.trigger("pane","settings")},changePane:function(e){this.$("."+e).addClass("active").siblings().removeClass("active")}})},{}],92:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({template:"observer",className:"cs-observer",initialize:function(){this.lazyRender=_.debounce(this.renderNow,100),this.throttleTimer=50,this.observing=null,this.tooltipText="Element",this.canPreview=!0,this.dimensionTarget=null,this.listenTo(cs.observer,"start",this.observeStart),this.listenTo(cs.observer,"end",this.observeEnd),this.listenTo(cs.preview,"kill:observer",this.kill),this.listenTo(cs.observer,"kill",this.kill),this.$wrapper=Backbone.$("#cornerstone-preview-entry")},setObserver:function(e,t){if(clearInterval(this.renderInterval),this.coordinates={top:0,left:0,height:0,width:0},this.observing=e,this.observing){var n=e.model.get("_type"),i=cs.elementLibrary.lookup(n),o=i.get("flags");this.canPreview=o.can_preview||!0,this.dimensionTarget=o.dimension_target||null,this.setTooltip(e.model,n)}t?this.renderNow():this.lazyRender()},setTooltip:function(e,t){var n;switch(t){case"section":n=cs.l18n("section-format").replace("%s",e.get("title"));break;case"row":n=cs.l18n("row-numeric").replace("%s",e.getIndex()+1);break;case"column":n=cs.l18n("column-format").replace("%s",e.get("size"));break;default:n=e.definition.get("ui").title}this.canPreview||(n=cs.l18n("no-preview").replace("%s",n)),this.tooltipText=n},observeStart:function(e,t){(_.isNull(this.observing)||this.observing.cid!=e.cid)&&this.setObserver(e,t||!1)},observeEnd:function(e,t){_.isNull(this.observing)||this.observing.cid!=e.cid||this.setObserver(null,t||!1)},kill:function(){this.setObserver(null,!0)},renderNow:function(){return clearInterval(this.renderInterval),_.isNull(this.observing)||cs.observer.request("get:collapse")?void this.$el.hide():(this.renderLoop(),void(this.renderInterval=setInterval(_.bind(this.renderLoop,this),this.throttleTimer)))},renderLoop:function(){var e=this.dimensionTarget?this.observing.$el.find(this.dimensionTarget):this.observing.$el;e.length<1&&(e=this.observing.$el);var t=e.offset(),n=e.outerHeight(),i=e.outerWidth();(this.coordinates.width!=i||this.coordinates.height!=n)&&t&&(this.coordinates={top:t.top-this.$wrapper.offset().top,left:t.left-this.$wrapper.offset().left,width:i,height:n},this.render(),this.$el.css(this.coordinates),this.coordinates.top<25&&this.$(".cs-observer-tooltip").removeClass("top"))},onRender:function(){return _.isNull(this.observing)||cs.observer.request("get:collapse")?void this.$el.hide():(this.$el.toggleClass("cs-observer-no-preview",!this.canPreview),void this.$el.show())},serializeData:function(){return _.extend(CS.Mn.ItemView.prototype.serializeData.apply(this,arguments),{tooltip:this.tooltipText})}})},{}],93:[function(e,t,n){t.exports=Cornerstone.Mn.CompositeView.extend({template:!1,emptyView:CS.Mn.ItemView.extend({className:"cs-empty-rows",template:"empty-rows"}),getChildView:function(e){return cs.component("view-loader").elementLookup(e.get("_type"))},initialize:function(){this.collection=this.model.elements,this.listenToOnce(cs.global,"preview:primed",function(){this.$el.removeClass("cs-preview-loading")}),this.listenTo(this.collection,"sort",this.render),this.observerView=new(e("./observer.js")),this.listenTo(cs.global,"set:collapse",this.toggleCollapse),this.listenTo(cs.global,"dragging",this.toggleDragging),this.listenTo(cs.preview,"dragging",this.toggleDragging),this.listenTo(cs.preview,"autoscroll",_.debounce(_.bind(this.autoScroll,this),250,!0)),this.drake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&(e.classList.contains("x-column")||e.classList.contains("cs-indicator-container"))},moves:function(e,t,n,i){return!!e.classList&&(e.classList.contains("cs-preview-element-wrapper")||e.classList.contains("cs-indicator"))},accepts:function(e,t,n,i){return!!e.classList&&(e.classList.contains("cs-preview-element-wrapper")||e.classList.contains("cs-indicator"))},offset:function(e,t,n){return e.x=0,e.y=0,e},copy:!1,revertOnSpill:!0,mirrorContainer:this.el}),this.drake.on("drag",function(e,t){if(e.classList&&e.classList.contains("cs-indicator")){if(this.incoming){var n=new MouseEvent("mousedown",{buttons:1,which:1,view:window,bubbles:!0,cancelable:!0,synthetic:!0});e.dispatchEvent(n,!0)}this.incoming=!1}else Backbone.$(e).trigger("dragula:lift"),Backbone.$(t).trigger("dragula:lift"),cs.global.trigger("drag:existing:start");cs.preview.trigger("dragging",!0)}),this.listenTo(cs.global,"drag:existing:end",function(){cs.preview.trigger("dragging",!1)}),this.drake.on("dragend",function(e){cs.preview.trigger("dragging",!1),Backbone.$(e).trigger("dragula:dragend")}),this.drake.on("cancel",function(e,t,n){Backbone.$(n).trigger("dragula:cancel"),Backbone.$(t).trigger("dragula:cancel")}),this.drake.on("drop",function(e,t,n,i){Backbone.$(t).trigger("dragula:receive",[e,n,i])}),this.drake.on("over",function(e,t,n){Backbone.$(t).trigger("dragula:over"),Backbone.$(n).trigger("dragula:source:over")}),this.drake.on("shadow",function(e,t,n){Backbone.$(n).trigger("dragula:shadow")}),this.drake.on("out",function(e,t,n){Backbone.$(t).trigger("dragula:out")}),this.drake.on("cloned",_.bind(function(e,t,n){"mirror"==n&&(this.$ghost=Backbone.$(e),this.$ghost.addClass("cs-indicator"),Backbone.$(t).trigger("dragula:mirror",this.$ghost))},this)),cs.$indicator=Backbone.$('<div class="cs-indicator"></div>'),document.addEventListener("dragleave",function(e){var t;t=e.target.classList&&e.target.classList.contains("x-column")?Backbone.$(e.target):Backbone.$(e.target).parent(".x-column"),t.length>0&&!t.csPointInsideElement(e.clientX,e.clientY)&&cs.$indicator.detach()},!1);var t=_.bind(function(){cs.global.trigger("stop:dragging"),cs.preview.trigger("dragging",!1),cs.$ic[0].left=0,cs.$ic[0].top=0,document.removeEventListener("mouseup",t,!1)},this);this.listenTo(cs.global,"drag:resume",function(e){this.$ghost&&this.$ghost.hide(),document.addEventListener("mousemove",n,!1)});var n=_.bind(function(e){this.$ghost&&this.$ghost.show(),cs.global.trigger("drag:exit"),document.removeEventListener("mousemove",n,!1)},this);this.listenTo(cs.global,"incoming:element",function(e){cs.incoming={data:{_type:e},options:{},cid:"new:"+e},cs.render.preRender(e),cs.$indicator.empty().detach(),cs.$indicator.removeAttr("style"),cs.$indicator.append(Backbone.$(cs.elementIcon(e))),document.addEventListener("mousemove",i,!1)});var i=_.bind(function(e){cs.global.trigger("drag:exit"),cs.$indicator.detach(),cs.$ic.append(cs.$indicator),cs.preview.trigger("dragging",!0),this.drake.incoming=!0,this.drake.start(cs.$indicator[0]),document.removeEventListener("mousemove",i,!1),document.addEventListener("mouseup",t,!1)},this);cs.$ic=Backbone.$('<div class="cs-indicator-container"></div>')},onBeforeRender:function(){this.scrollTopCache=Backbone.$("body").scrollTop(),Backbone.$("a").click(function(e){cs.preview.trigger("click:theme:a",e)}).attr("target","_blank")},onRender:function(){this.$el.append(cs.$ic),Backbone.$("html,body").scrollTop(this.scrollTopCache),this.$el.toggleClass("cs-editor-active",!0),this.$el.toggleClass("cs-editor-inactive",!1),this.$el.append(this.observerView.render().$el),_.defer(function(){cs.preview.trigger("responsive:text")})},toggleCollapse:function(e){this.$el.toggleClass("cs-editor-active",!e),this.$el.toggleClass("cs-editor-inactive",e)},toggleDragging:function(e){e||(cs.$indicator.detach(),this.drake.cancel()),this.$el.toggleClass("gu-unselectable",e),Backbone.$("body").toggleClass("cs-hide-cursor",e)},autoScroll:function(e){if(!e.$el.visible(!0)){var t=Backbone.$(cs.config("scrollTopSelector")),n=t.length>0?t.outerHeight():0,i=e.$el.offset().top-n-27;Backbone.$("html,body").animate({scrollTop:i},700,"swing")}},onDestroy:function(){this.drake.destroy()}})},{"./observer.js":92}],94:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({className:"cs-skeleton-content-outer",template:"main/skeleton",childViewContainer:".cs-skeleton-items",getChildView:function(e){return cs.component("view-loader").skeletonLookup(e.get("_type"))},events:{"dragula:receive":"_receiveElement"},initialize:function(){this.collection=this.model.elements,this.hoverRender=_.debounce(this._hoverRender,45),this.hoverTarget=null,this.listenTo(this.collection,"sort",this.render);var t=e("../../utility/dragula-handlers");this.setupElementDragging(t),this.setupRowDragging(t),this.setupSectionDragging(t),this.listenTo(cs.events,"skeleton:dragging",this.toggleDragging),this.listenTo(cs.global,"stop:dragging",function(){this.elementDrake.cancel(),cs.global.trigger("dragging",!1)}),this.listenTo(cs.events,"skeleton:hover",this.hover),this.listenTo(cs.global,"drag:existing:start",function(){function e(){document.removeEventListener("mouseup",e),_.defer(function(){cs.global.trigger("drag:existing:end")})}Backbone.$("#preview");document.addEventListener("mouseup",e)})},setupElementDragging:function(e){this.elementDrake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&(e.classList.contains("cs-skeleton-container-column")||e.classList.contains("cs-elements"))},moves:function(e,t,n,i){return!!e.classList&&(e.classList.contains("cs-element-stub")&&!e.attributes.draggable||e.classList.contains("cs-skeleton-item")&&!e.classList.contains("is-child")&&!e.classList.contains("layout"))},accepts:function(e,t,n,i){return t.classList&&t.classList.contains("cs-elements")?!1:!!e.classList&&(e.classList.contains("cs-element-stub")||e.classList.contains("cs-skeleton-item")&&!e.classList.contains("is-child")&&!e.classList.contains("layout"))},copy:function(e,t){return!!e.classList&&e.classList.contains("cs-element-stub")},offset:function(e,t,n){return n.classList&&(n.classList.contains("cs-element-stub")&&(e.x=0,e.y=0),n.classList.contains("cs-skeleton-item")&&(e.x=0,e.y=Backbone.$(n).height()/2)),e},mirrorContainer:Backbone.$("#before")[0],revertOnSpill:!0});this.elementDrake.on("cloned",e.editorMirror),this.elementDrake.on("dragend",e.skeletonEnd),this.elementDrake.on("drag",e.skeletonStart),this.elementDrake.on("cancel",e.cancel),this.elementDrake.on("remove",e.cancel),this.elementDrake.on("drop",e.drop),this.elementDrake.on("over",e.over),this.elementDrake.on("shadow",e.shadow),this.elementDrake.on("out",e.out),this.listenTo(cs.global,"incoming:element",function(e){cs.incoming={data:{_type:e},options:{},cid:"new:"+e}})},setupSectionDragging:function(e){this.sectionDrake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&e.classList.contains("cs-skeleton-items")},moves:function(e,t,n,i){return Backbone.$(n).is(".cs-skeleton-item.section > .cs-skeleton-handle > .cs-skeleton-title")},accepts:function(e,t,n,i){return Backbone.$(e).is(".cs-skeleton-item.section")},offset:function(e,t,n){return n.classList&&n.classList.contains("cs-skeleton-item")&&(e.y=Backbone.$(n).height()/2),e},mirrorContainer:Backbone.$("#before")[0]}),this.sectionDrake.on("dragend",e.skeletonEnd),this.sectionDrake.on("drag",e.skeletonStart),this.sectionDrake.on("cancel",e.cancel),this.sectionDrake.on("remove",e.cancel),this.sectionDrake.on("drop",e.drop),this.sectionDrake.on("over",e.over),this.sectionDrake.on("out",e.out)},setupRowDragging:function(e){this.rowDrake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&e.classList.contains("cs-skeleton-container-section")},moves:function(e,t,n,i){return Backbone.$(n).is(".cs-skeleton-item.row > .cs-skeleton-handle > .cs-skeleton-title")&&Backbone.$(e).siblings().length>0},accepts:function(e,t,n,i){return Backbone.$(e).is(".cs-skeleton-item.row")},offset:function(e,t,n){return n.classList&&n.classList.contains("cs-skeleton-item")&&(e.y=Backbone.$(n).height()/2),e},mirrorContainer:Backbone.$("#before")[0],revertOnSpill:!0}),this.rowDrake.on("dragend",e.skeletonEnd),this.rowDrake.on("drag",e.skeletonStart),this.rowDrake.on("cancel",e.cancel),this.rowDrake.on("remove",e.cancel),this.rowDrake.on("drop",e.drop),this.rowDrake.on("over",e.over),this.rowDrake.on("out",e.out)},onRender:function(){this.$(".cs-skeleton-content-inner").perfectScrollbar({scrollYMarginOffset:10,wheelPropagation:!0}),_.defer(_.bind(this.deferRender,this))},deferRender:function(){this.$(".cs-skeleton-content-inner").perfectScrollbar("update")},windowResize:function(){},toggleDragging:function(e,t){this.isDragging=e,this.$el.toggleClass("gu-unselectable",e);var t=t||"";if(this.$el.removeClass("dragging-section dragging-row dragging-column dragging-element"),this.$el.attr("data-element-type",t),e){var n=_.contains(["section","row","column"],t)?t:"element";this.$el.addClass("dragging-"+n),this.setHover(null)}else this.elementDrake.cancel(),this.rowDrake.cancel(),this.sectionDrake.cancel()},hover:function(e,t){if(this.isDragging)return this.setHover(null);if(e){if(!_.isNull(this.hoverTarget)&&this.hoverTarget.cid==t.cid)return;this.setHover(t)}else{if(_.isNull(this.hoverTarget)||this.hoverTarget.cid!=t.cid)return;this.setHover(null)}},setHover:function(e){this.hoverTarget=e,this.hoverRender()},_hoverRender:function(e){cs.events.trigger("skeleton:hover:toggle",this.hoverTarget&&this.hoverTarget.cid?this.hoverTarget.cid:null)},_receiveElement:function(e,t,n,i){e.stopPropagation(),_.defer(_.bind(this._placeElement,this),i?Backbone.$(i).index()-1:this.collection.length)},_placeElement:function(e){if(cs.incoming){var t=_.isFunction(cs.incoming.toJSON)?cs.incoming.toJSON():cs.incoming.data;this.model.elements.create(t,_.clone(cs.incoming.options),{position:e,replace:cs.incoming,after:function(e){cs.incoming=!1}})}}})},{"../../utility/dragula-handlers":28}],95:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({toggle:function(e){var t=this.$(e.target),n=this.$(t.attr("data-target")||e.preventDefault()||t.attr("href")),i=n.data("bs.collapse"),o=i?"toggle":t.data(),s=t.attr("data-parent"),r=s&&this.$(s);i&&i.transitioning||(r&&r.find('[data-toggle="collapse"][data-parent="'+s+'"]').not(t).addClass("collapsed"),t[n.hasClass("in")?"addClass":"removeClass"]("collapsed")),jQuery.fn.collapse.call(n,o)},onClickBeforeInspect:function(e){e.target.className.indexOf("x-accordion-toggle")>=0&&this.toggle(e)}})},{}],96:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({elementEvents:{"click button.close":"closeButton"},closeButton:function(e){e.preventDefault()}})},{}],97:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({remoteRender:!0,template:!1,childViewContainer:"@ui.root",className:"cs-preview-element-wrapper",draggable:!0,htmlhint:{"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!1,"id-unique":!1,"src-not-empty":!1,"attr-no-duplication":!1,"title-require":!1},events:function(){var e={"click a":"_preventLinkout"},t=_.result(this,"inspectable");(t||_.isUndefined(t))&&(e=_.extend(e,{click:"_click",mouseover:"_observeStart",mouseout:"_observeEnd"},this._setupAutoFocus()));var n=_.result(this,"draggable");return(n||_.isUndefined(n))&&(e=_.extend(e,{"dragula:lift":"_dragLift","dragula:dragend":"_dragEnd","dragula:mirror":"_dragMirror"})),_.extend(e,_.result(this,"elementEvents")||{})},getChildView:function(e){return cs.component("view-loader").elementLookup(e.get("_type"))},constructor:function(e){CS.Mn.CompositeView.apply(this,arguments),this._setupChildren(),this._repaint=_.debounce(_.bind(function(){try{this.render()}catch(e){if("ViewDestroyedError"==e.name)return;console.log("Cornerstone Render Exception",e)}},this),2),this._updateMarkup=_.debounce(_.bind(this.__updateMarkup,this),2),this.model.collection&&(this.modelIndex=this.model.collection.indexOf(this.model)),this._updateMarkup(),this.listenTo(this.model,"change",this._updateMarkupOnChange),this.listenTo(this.model,"remote:render",this._repaint),this.on("render",this._baseRender),this.listenTo(this.model,"observe:start",function(){cs.observer.trigger("start",this)}),this.listenTo(this.model,"observe:end",function(){cs.observer.trigger("end",this)}),this.on("render:template",this._onRenderTemplate),this.on("template:data:ready",function(e){this.once("render",function(){this.triggerMethod("construct:element",e)})}),this.triggerMethod("element:init"),this.listenTo(cs.global,"autoscroll",function(e){this.model&&this.model.cid==e&&cs.preview.trigger("autoscroll",this)})},_setupChildren:function(){return this.model.definition.get("flags").dynamic_child?void(this.collection=this.model.elements):void this.listenTo(this.model,"child:data:updated",this._updateMarkup)},resortView:function(){this._updateMarkup()},_updateMarkupOnChange:function(e){_.isEmpty(_.omit(e.changed,["rank"]))||this._updateMarkup()},__updateMarkup:function(e){return this.remoteRender?void cs.render.triggerMethod("queue",this.model):e?this.render():this._repaint()},serializeData:function(){var e=CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),t=_.result(this,"elementData")||{};return _.defaults(_.extend(e,t),this.model.getDefaults())},attachElContent:function(e){return this.remoteRender&&(e=cs.render.getCache(this.model),_.isFunction(e)&&(e=CS.Mn.Renderer.render(e,this.serializeData()))),e&&(this.model.definition.get("flags").htmlhint&&(_.isEmpty(Cornerstone.Vendor.HTMLHint.verify(e,this.htmlhint))||(e=Backbone.$("<div>").text(e).html())),this.$el.html(e)),this},bindUIElements:function(){this.ui||(this.ui={}),CS.Mn.CompositeView.prototype.bindUIElements.apply(this,arguments);var e=this.$(".cs-inception");this.ui.root=e.length?e.parent():this.$el},_onRenderTemplate:function(){var e=this.$(".cs-inception");e.length&&e.detach()},_baseRender:function(){this.triggerMethod("before:shortcode:init"),window.xData.base.processElements(null,this.$el),cs.preview.trigger("responsive:text",this),this.triggerMethod("after:element:render"),this.remoteRender&&_.defer(_.bind(function(){this._emptyDetection()&&this.triggerMethod("render:empty")},this),0)},onRenderEmpty:function(){this._renderEmpty()},_renderEmpty:function(){var e=Backbone.$(CS.Mn.Renderer.render("empty-element",this.serializeData()));this.$el.append(e)},_emptyDetection:function(){return _.isFunction(this.emptyDetection)?this.emptyDetection():this.model.definition.get("flags").empty||this.model.definition.get("flags").no_height_check?!1:this.$el.shadowHeight()<1},_setupAutoFocus:function(){var e={},t=this.model.definition.get("ui");return t.autofocus?(_.each(t.autofocus,function(t,n){var i="click "+t;e[i]=function(){cs.global.trigger("auto:focus",n)}}),e):e},_preventLinkout:function(e){e.preventDefault()},_click:function(e){this.triggerMethod("click:before:inspect",e),e.stopPropagation(),cs.global.trigger("inspect",this.model)},_dragLift:function(e){this.$el.addClass("cs-dragging"),cs.incoming=this.model},_dragEnd:function(e){this.$el.removeClass("cs-dragging")},_dragMirror:function(e,t){Backbone.$(t).empty().append(Backbone.$(cs.elementIcon(this.model.get("_type"))))},_observeStart:function(e){e.stopPropagation(),this.model.trigger("observe:start")},_observeEnd:function(e){this.model.trigger("observe:end")}})},{}],98:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onAfterElementRender:function(){_.defer(_.bind(function(){this.$(".x-card-outer").trigger("cs:setcardheight")},this)),this.$("a").click(function(e){e.preventDefault()})}})},{}],99:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({remoteRender:!1,draggable:!1,elementEvents:{"click svg.cs-custom-icon":"clickIcon","dragula:send":"sendElement","dragula:receive":"receiveElement","dragula:cancel":"dragCancel","dragula:over":"dragOver","dragula:out":"dragOut","dragula:shadow":"dragShadow","dragula:lift":"dragLift","dragula:source:over":"dragSourceOver","drop.h5s":"receiveNew","dragenter.h5s":"dragEnterH","dragover.h5s":"dragOverH"},initialize:function(){this.checkDragOverStart=_.once(this.dragOverStart),this.checkDragLeave=_.debounce(this.dragLeave,50),this.detachIndicator=_.debounce(this._detachIndicator,50),this.throttleSetDragIndicator=_.throttle(_.bind(this.setDragIndicator,this),125,{leading:!1,trailing:!1}),this.dropIndex=0,this.$empty=Backbone.$(cs.template("empty-column")())},receiveElement:function(e,t,n,i){cs.observer.trigger("kill");var o=!_.isFunction(cs.incoming.toJSON),s=o?cs.incoming.data:cs.incoming.toJSON(),r=cs.incoming.cid,a=this.model.elements.create(s,_.clone(cs.incoming.options),{position:i?Backbone.$(i).index()-1:this.collection.length,replace:cs.incoming,after:function(e){cs.render.shadow(e,r)}});o&&cs.global.trigger("inspect",a),this.emptyClassCheck()},receiveNew:function(e){this.$el.toggleClass("cs-receiving",!1),cs.observer.trigger("kill"),cs.preview.trigger("dragging",!1);var t=JSON.parse(e.originalEvent.dataTransfer.getData("cornerstone/element"));if(t){if("create"==t.action&&t._type){var n=this.model.elements.create({_type:t._type},{},this.dropIndex,function(e){cs.render.shadow(e,"new:"+t._type)});cs.global.trigger("inspect",n)}this.emptyClassCheck()}},dragOver:function(){this.$el.toggleClass("cs-receiving",!0)},dragOut:function(){this.$el.toggleClass("cs-receiving",!1)},dragCancel:function(){this.$empty.detach(),this.$el.removeClass("cs-empty")},dragShadow:function(){1==this.collection.length&&this.$el.children().length<=1&&this.emptyClassCheck(!0)},clickIcon:function(e){e.stopPropagation(),cs.global.trigger("nav:kylelements")},onRemoveChild:function(){this.emptyClassCheck()},onAddChild:function(e){e.triggerMethod("added:to:column")},emptyClassCheck:function(e){this.$empty.detach(),this.$el.removeClass("cs-empty"),(this.collection.isEmpty()||e)&&(this.$el.append(this.$empty),this.$el.addClass("cs-empty"),this.$(".cs-empty-column").removeAttr("style"))},dragOverStart:function(){this.$el.toggleClass("cs-receiving",!0),cs.observer.trigger("in",this,!0)},dragEnterH:function(){this.checkDragOverStart(),this.checkDragLeave()},dragOverH:function(e){this.checkDragOverStart(),this.checkDragLeave(),e.originalEvent.preventDefault&&e.originalEvent.preventDefault(),this.throttleSetDragIndicator(e.originalEvent.pageY)},dragLeave:function(){this.$el.toggleClass("cs-receiving",!1),this.checkDragOverStart=_.once(this.dragOverStart)},setDragIndicator:function(e){if(cs.$indicator.detach(),!(this.collection.length<=0)){var t=0,n=this.collection.find(_.bind(function(n){var i=this.children.findByModel(n);return i.$el.shadowHeight<1?!1:e>i.$el.offset().top+i.$el.outerHeight()/2?(++t,!1):!0},this));this.dropIndex=t,this.collection.length==this.dropIndex?this.$el.append(cs.$indicator):this.children.findByModel(n).$el.before(cs.$indicator)}},onElementInit:function(){},onConstructElement:function(e){classes=["x-column","x-sm"],styles={},classes.push("x-"+e.size.replace("/","-")),"none"!=e.text_align&&classes.push(e.text_align),_.isArray(padding=_.clone(e.padding))&&(padding.pop(),styles.padding=padding.join(" ")),_.isArray(borderWidth=_.clone(e.border_width))&&(borderWidth.pop(),"0px"!=_.unique(borderWidth)&&(styles["border-width"]=borderWidth.join(" "),styles["border-color"]=e.border_color,styles["border-style"]=e.border_style)),styles["background-color"]=""!=e.bg_color?e.bg_color:"transparent",""!=e.id&&this.$el.attr("id",e.id),classes.push(e["class"]),this.$el.attr("class",classes.join(" ")),delete classes,this.$el.removeAttr("style"),this.$el.css(styles),""!=e.style&&this.$el.attr("style",this.$el.attr("style")+e.style),this.emptyClassCheck()},onRenderEmpty:function(){return!1}})},{}],100:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({template:_.template("<div></div>"),remoteRender:!1,minHeight:10,initialize:function(){this.listenTo(this.model,"change",this.render),this.boundWindowResize=_.bind(this.onAddedToColumn,this),Backbone.$(window).on("resize",this.boundWindowResize)},onDestroy:function(e){Backbone.$(window).off("resize",this.boundWindowResize)},onConstructElement:function(e){var t,n;$gap=this.$("div"),t=["cs-empty-element","cs-gap"],n={},t=_.union(t,e.visibility),""!=e.id&&$gap.attr("id",e.id),t.push(this.model.get("class")),$gap.attr("class",t.join(" ")),$gap.removeAttr("style"),$gap.css(n),""!=e.style&&$gap.attr("style",$gap.attr("style")+e.style),$gap.css({padding:e.gap_size+" 0 0",margin:0,height:0}),$gap.outerHeight()<this.minHeight&&$gap.css({padding:this.minHeight+"px 0 0"})},onAddedToColumn:function(){_.defer(_.bind(function(){$gap=this.$("div");var e=this.model.get("gap_size");$gap.css({padding:e+" 0 0",margin:0,height:0}),$gap.outerHeight()<this.minHeight&&$gap.css({padding:this.minHeight+"px 0 0"})},this))}})},{}],101:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({emptyDetection:function(){return!1},onAfterElementRender:function(){this.model.prevHeight&&(this.$(".cs-empty-element").height(this.model.prevHeight),this.model.prevHeight=!1),_.defer(_.bind(function(){$map=this.$(".x-map"),$map.length>0&&(this.model.prevHeight=$map.outerHeight())},this))}})},{}],102:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onAfterElementRender:function(){}})},{}],103:[function(e,t,n){t.exports={section:e("./section"),row:e("./row"),column:e("./column"),accordion:e("./accordion"),alert:e("./alert"),card:e("./card"),row:e("./row"),gap:e("./gap"),"google-map":e("./google-map"),line:e("./line"),slider:e("./slider"),tabs:e("./tabs"),"gravity-forms":e("./gravity-forms")}},{"./accordion":95,"./alert":96,"./card":98,"./column":99,"./gap":100,"./google-map":101,"./gravity-forms":102,"./line":104,"./row":105,"./section":106,"./slider":107,"./tabs":108}],104:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({template:_.template('<hr class="x-hr">'),remoteRender:!1,onRender:function(){var e,t,n,i,o;e=this.$("hr"),t=["x-hr"],(n=this.model.get("visibility"))&&(t=_.union(t,n)),t.push(this.model.get("class")),e.attr("class",t.join(" ")),i=this.model.get("custom_id"),i&&e.attr("id",i),e.removeAttr("style"),o=this.model.get("style"),o&&e.attr("style",o),_.defer(function(){e.css({paddingBottom:e.css("marginBottom"),marginBottom:"0"})})}})},{}],105:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({remoteRender:!1,draggable:!1,filter:function(e,t,n){return e.get("_active")},onConstructElement:function(e){var t,n,i,o,s,r;t=["x-container"],n={},e.inner_container&&t.push("max width"),t=_.union(t,e.visibility),"none"!=e.text_align&&t.push(e.text_align),e.marginless_columns&&t.push("marginless-columns"),_.isArray(i=_.clone(e.padding))&&(i.pop(),n.padding=i.join(" ")),_.isArray(o=_.clone(e.margin))&&(o.pop(),n.margin=o.join(" ")),_.isArray(s=_.clone(e.border_width))&&(s.pop(),"0px"!=_.unique(s)&&(n["border-width"]=s.join(" "),n["border-color"]=e.border_color,n["border-style"]=e.border_style)),r=this.model.get("bg_color"),n["background-color"]=r?r:"transparent",""!=e.id&&this.$el.attr("id",e.id),t.push(e["class"]),this.$el.attr("class",t.join(" ")),delete t,this.$el.removeAttr("style"),this.$el.css(n),""!=e.style&&this.$el.attr("style",this.$el.attr("style")+e.style)}})},{}],106:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({remoteRender:!1,draggable:!1,onElementInit:function(){this.lazyDetectColorContrast=_.debounce(_.bind(this.detectColorContrast,this),25),this.lazyDetectImageContrast=_.debounce(_.bind(this.detectImageContrast,this),250),this.contrast={color:null,image:null,activeClass:null},this.listenTo(this.model,"change:bg_color",function(){this.contrast.color=null}),this.listenTo(this.model,"change:bg_image",function(){this.contrast.image=null})},onConstructElement:function(e){var t,n,i,o,s,r;switch(this.$el.attr("id","x-section-"+(this.modelIndex+1)),t=["x-section"],n={},i="",this.contrastClass&&t.push(this.contrastClass),t=_.union(t,e.visibility),"none"!=e.text_align&&t.push(e.text_align),e.bg_type){case"video":i="bg-video";break;case"image":i=e.bg_pattern_toggle?"bg-pattern":"bg-image",e.parallax&&t.push("parallax"),""!=e.bg_image&&(n.backgroundImage='url("'+e.bg_image+'")'),_.isNull(this.contrast.image)&&this.lazyDetectImageContrast(e.bg_image,e.bg_color),_.isNull(this.contrast.activeClass)||t.push(this.contrast.activeClass),n["background-color"]=""!=e.bg_color?e.bg_color:"transparent";break;case"color":i="bg-color",_.isNull(this.contrast.image)&&this.lazyDetectColorContrast(e.bg_color),_.isNull(this.contrast.activeClass)||t.push(this.contrast.activeClass),n["background-color"]=""!=e.bg_color?e.bg_color:"transparent"}i&&t.push(i),_.isArray(o=_.clone(e.padding))&&(o.pop(),n.padding=o.join(" ")),_.isArray(s=_.clone(e.margin))&&(s.pop(),n.margin=s.join(" ")),_.isArray(r=_.clone(e.border_width))&&(r.pop(),"0px"!=_.unique(r)&&(n["border-width"]=r.join(" "),n["border-color"]=e.border_color,n["border-style"]=e.border_style)),""!=e.id&&this.$el.attr("id",e.id),t.push(e["class"]),this.$el.attr("class",t.join(" ")),delete t,this.$el.removeAttr("style"),this.$el.css(n),""!=e.style&&this.$el.attr("style",this.$el.attr("style")+e.style),_.defer(_.bind(function(){this.$el.hasClass("parallax")&&(Modernizr&&Modernizr.touchevents?this.$el.css("background-attachment","scroll"):(this.$el.hasClass("bg-image")&&(speed=.1),this.$el.hasClass("bg-pattern")&&(speed=.3),speed&&this.$el.parallaxContentBand("50%",speed))),this.$el.hasClass("bg-video")&&this.$el.css({"background-image":'url("'+e.bg_video_poster+'")',"background-color":"white","background-size":"cover"})},this))},detectImageContrast:function(e,t){_.defer(_.bind(function(){return e&&""!=e?void window.RGBaster.colors(e,{success:_.bind(function(e){this.setContrastClass(e.dominant)},this)}):void this.detectColorContrast(t)},this))},detectColorContrast:function(e){e&&""!=e||(e="#ffffff"),this.setContrastClass(e)},setContrastClass:function(e){var t=new Cornerstone.Vendor.Color(e),n=t.getDistanceLuminosityFrom(new Cornerstone.Vendor.Color("#fff"))>10.5;this.contrast.activeClass=n?"cs-bg-dark":null,this.$el.toggleClass("cs-bg-dark",n)}})},{}],107:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({})},{}],108:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onClickBeforeInspect:function(e){$target=jQuery(e.target),"tab"==$target.attr("data-toggle")&&jQuery.fn.tab.call($target,"show")}})},{}],109:[function(e,t,n){t.exports=CS.Mn.CollectionView.extend({childView:e("./settings-section"),events:{"click .cs-pane-section-toggle":"toggle"},toggle:function(e){var t=this.$(e.currentTarget),n=t.next(".cs-pane-section");return t.hasClass("active")?(t.removeClass("active"),n.slideUp("fast"),void cs.navigate.trigger("scrollbar:update")):(this.$(".cs-pane-section-toggle").removeClass("active"),
t.addClass("active"),cs.navigate.trigger("scrollbar:update"),n.slideDown("fast"),void this.$(".cs-pane-section").not(".constant").not(n).slideUp("fast"))}})},{"./settings-section":111}],110:[function(e,t,n){var i=e("../controls/control-collection"),o=e("./settings-collection");t.exports=CS.Mn.LayoutView.extend({template:"settings/content",regions:{Controls:"#controls",Sections:"#sections"},initialize:function(){},onBeforeShow:function(){this.Controls.show(new i({collection:cs.component("settings").getPrimaryControls()})),this.Sections.show(new o({collection:cs.component("settings").getSettings()}))}})},{"../controls/control-collection":38,"./settings-collection":109}],111:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({template:"settings/section",className:"cs-settings-section",childViewContainer:"ul.cs-controls",getChildView:function(e){return cs.controlLookup(e.get("type"))},initialize:function(){this.collection=this.model.inspect.controls},onRender:function(){this.collection.isEmpty()&&this.$el.addClass("empty")},serializeData:function(){return _.extend(CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),{_section_title:this.model.section.get("ui").title})}})},{}],112:[function(e,t,n){var i=e("../main/base-pane"),o=e("./settings-content"),s=e("../controls/control-collection");t.exports=i.extend({name:"settings",initialize:function(){this.listenTo(cs.global,"settings:ready",this.onShowContent)},onShowContent:function(){this.Content.show(cs.data.request("settings:ready")?new o:this.getLoadingView())},getLoadingView:function(){return new CS.Mn.ItemView({tagName:"ul",className:"cs-controls empty",template:_.template('<li class="cs-control-empty"><span class="title"><%= l18n(\'settings-loading\') %></span></li>')})},onOpenSubItem:function(){this.Sub.show(new s({collection:cs.component("inspector").getSecondaryControls()}))}})},{"../controls/control-collection":38,"../main/base-pane":88,"./settings-content":110}],113:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({remoteRender:!0,template:"main/skeleton-item",childViewContainer:".cs-skeleton-container",duplicatable:function(){var e=this.model.definition.get("flags");return e&&!e.child},deletable:function(){return _.result(this,"duplicatable")},eraseable:!1,manageable:!1,collapsible:!1,className:function(){var e=["cs-skeleton-item"],t=this.model.get("_type");_.contains(["section","row","column"],t)?e.push("layout"):e.push("element"),e.push(t);var n=this.model.definition.get("flags");n&&n.child&&e.push("is-child");var i=_.result(this,"skeletonClasses");return _.isArray(i)&&(e=e.concat(i)),e.join(" ")},attributes:function(){return{"data-element-type":this.model.get("_type")}},events:function(){var e={"click .cs-skeleton-controls button":"clickControl"},t=_.result(this,"inspectable");(t||_.isUndefined(t))&&(e=_.extend(e,{"click > .cs-skeleton-handle":"_click","mouseover > .cs-skeleton-handle":"_observeStart","mouseout > .cs-skeleton-handle":"_observeEnd"}));var n=_.result(this,"draggable");(n||_.isUndefined(n))&&(e=_.extend(e,{"dragula:lift":"_dragLift","dragula:cancel":"_dragEnd"}));var i=_.result(this,"receiver");return(i||_.isUndefined(i))&&(e=_.extend(e,{"dragula:receive":"_receiveElement","dragula:over":"_dragOver","dragula:out":"_dragOut"})),_.extend(e,_.result(this,"elementEvents")||{})},getChildView:function(e){return cs.component("view-loader").skeletonLookup(e.get("_type"))},constructor:function(e){CS.Mn.CompositeView.apply(this,arguments),this._repaint=_.debounce(_.bind(function(){try{this.render()}catch(e){if("ViewDestroyedError"==e.name)return;console.log("Cornerstone Render Exception",e)}},this),2),this.collection=this.model.elements,this.listenTo(this.collection,"sort",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(cs.events,"skeleton:hover:toggle",this.hoverToggle),this.listenTo(cs.events,"skeleton:dragging",function(e){e||this.$el.removeClass("cs-receiving")}),this.model.collection&&(this.modelIndex=this.model.collection.indexOf(this.model))},serializeData:function(){var e="",t="",n=[],i=this.model.get("_type");switch(i){case"section":e=cs.l18n("section-format").replace("%s",this.model.get("title"));break;case"row":e=cs.l18n("row-numeric").replace("%s",this.model.getIndex()+1);break;case"column":e=cs.l18n("column-format").replace("%s",this.model.get("size"));break;default:t=cs.elementIcon(i),e=this.model.definition.get("ui").title}_.result(this,"manageable")&&n.push({action:"managelayout",icon:"bars",tooltip:cs.l18n("tooltip-manage-layout")}),_.result(this,"duplicatable")&&n.push({action:"duplicate",icon:"copy",tooltip:cs.l18n("tooltip-copy")}),_.result(this,"eraseable")&&n.push({action:"erase",icon:"eraser",tooltip:cs.l18n("tooltip-erase")}),_.result(this,"deletable")&&n.push({action:"delete",icon:"trash-o",tooltip:cs.l18n("tooltip-delete")});_.clone(_.result(this,"controls"));return _.result(this,"collapsible")&&n.push({action:"collapse",icon:"caret-down",iconAlt:"caret-up",persist:!0}),this.tooltipText=e,_.extend(CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),{title:t+e,controls:n})},_click:function(e){this.triggerMethod("click:before:inspect",e),e.stopPropagation(),cs.global.trigger("inspect",this.model)},_dragLift:function(e){e.stopPropagation(),cs.incoming=this.model},_dragEnd:function(e){cs.incoming=!1},_dragOver:function(e){e.stopPropagation(),this.$el.toggleClass("cs-receiving",!0)},_dragOut:function(e){this.$el.toggleClass("cs-receiving",!1)},_observeStart:function(e){e.stopPropagation(),this.model.trigger("observe:start"),cs.events.trigger("skeleton:hover",!0,this)},_observeEnd:function(e){this.model.trigger("observe:end"),cs.events.trigger("skeleton:hover",!1,this)},_receiveElement:function(e,t,n,i){e.stopPropagation(),this.triggerMethod("receive:element",e,t,n,i),_.defer(_.bind(this._placeElement,this),i?Backbone.$(i).index()-1:this.collection.length)},_placeElement:function(e){if(cs.incoming){var t=_.isFunction(cs.incoming.toJSON)?cs.incoming.toJSON():cs.incoming.data;this.model.elements.create(t,_.clone(cs.incoming.options),{position:e,replace:cs.incoming,after:function(e){cs.incoming=!1}})}},onRender:function(){this.$el.toggleClass("collapsed",!!this.model.getMeta("skeleton_collapsed"))},clickControl:function(e){e.stopPropagation();var t=this.$(e.currentTarget).data("action");this.triggerMethod("control:"+t)},onControlManagelayout:function(){_.result(this,"manageable")&&cs.events.trigger("inspect:layout",this.model,{navigate:!0})},onControlDuplicate:function(){_.result(this,"duplicatable")&&cs.global.trigger("element:duplicate",this.model)},onControlDelete:function(){_.result(this,"deletable")&&cs.global.trigger("element:delete",this.model)},onControlErase:function(){_.result(this,"eraseable")&&cs.global.trigger("element:erase",this.model)},onControlCollapse:function(){if(_.result(this,"collapsible")){var e=!this.model.getMeta("skeleton_collapsed");this.$el.toggleClass("collapsed",e);this.model.setMeta("skeleton_collapsed",e)}},collapseHover:function(e){e.stopPropagation()},hoverToggle:function(e){this.$el.toggleClass("hover",e==this.cid)}})},{}],114:[function(e,t,n){t.exports=Cornerstone.SkeletonViews.Base.extend({receiver:!0,manageable:!0,duplicatable:!1,deletable:!1,eraseable:!0,elementEvents:{"dragula:drop":"updatePosition"},skeletonClasses:function(){return["size-"+this.model.get("size").replace("/","-")]},updatePosition:function(e,t,n){this.triggerMethod("update:position",e,t,n)},_dragLift:function(e){e.stopPropagation()}})},{}],115:[function(e,t,n){t.exports={section:e("./section"),row:e("./row"),column:e("./column")}},{"./column":114,"./row":116,"./section":117}],116:[function(e,t,n){t.exports=Cornerstone.SkeletonViews.Base.extend({receiver:!1,manageable:!0,collapsible:!0,childViewContainer:".cs-skeleton-container-inner",elementEvents:{"recieve:element":"_receiveElement","dragula:lift:child":"liftColumn"},filter:function(e,t,n){return e.get("_active")},initialize:function(){this.equalize=_.debounce(_.bind(this._equalize,this),1)},onRender:function(){this.setupDrake(),this._equalize(),this.equalize()},onChildviewUpdatePosition:function(e,t,n,i){this.equalize(),_.defer(_.bind(function(){this.triggerMethod("item:before:position:updated",e),this.collection.trigger("update:position",e.model,e.$el.index()),this.triggerMethod("item:position:updated",e)},this))},setupDrake:function(){this.drake&&this.drake.destroy();var t=this.$(".cs-skeleton-container-inner");this.drake=Cornerstone.Vendor.dragula({offset:function(e,t,n){return e.x=Backbone.$(n).width()/2,e},accepts:function(e,t,n,i){return Backbone.$(e).is(".cs-skeleton-item.column")},moves:function(e,t,n,i){return Backbone.$(n).is(".cs-skeleton-item.column > .cs-skeleton-handle > .cs-skeleton-title")&&Backbone.$(e).siblings().length>0},direction:"horizontal",revertOnSpill:!1,mirrorContainer:Backbone.$("#before")[0],containers:[t[0]]});var n=e("../../utility/dragula-handlers");this.drake.on("drag",n.skeletonStart),this.drake.on("dragend",n.skeletonEnd),this.drake.on("drop",n.drop)},onChildviewReceiveElement:function(){this._equalize()},_equalize:function(){this.$el.equalize({equalize:"outerHeight",children:".cs-skeleton-container-column",reset:!0,offset:this.$(".cs-skeleton-handle").outerHeight()-1})},_observeStart:function(e){e.stopPropagation(),this.model.trigger("observe:start"),this.$el.hasClass("cs-receiving")||cs.events.trigger("skeleton:hover",!0,this)},liftColumn:function(){this.$el.addClass("cs-receiving")},onDestroy:function(){this.drake.destroy()},onChildviewRender:function(){this._equalize(),this.equalize()},_receiveElement:function(e){e.stopPropagation()}})},{"../../utility/dragula-handlers":28}],117:[function(e,t,n){t.exports=Cornerstone.SkeletonViews.Base.extend({receiver:!0,manageable:!0,collapsible:!0,initialize:function(){this.listenTo(this.model,"change:title",this.updateTitle)},updateTitle:function(e,t){this.$("> .cs-skeleton-handle > .cs-skeleton-title").html(cs.l18n("section-format").replace("%s",t))}})},{}],118:[function(require,module,exports){var templates={};templates["controls/base"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n",ui.title&&(__p+='\n<div class="cs-control-header">\n  <label ',ui.tooltip&&(__p+=' data-tooltip-message="'+(null==(__t=ui.tooltip)?"":__t)+'" '),__p+=">"+(null==(__t=ui.title)?"":__t)+"</label>\n</div>\n"),__p+='\n<input type="hidden" value="">\n'+(null==(__t=render(controlTemplate,arguments[0]))?"":__t)+"\n",ui.message&&(__p+='\n<div class="cs-control-footer">\n  <span>'+(null==(__t=ui.message)?"":__t)+"</span>\n</div>\n");return __p},templates["controls/choose"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<ul class="cs-choose cols-'+(null==(__t=options.columns)?"":__t)+'">\n	',_.each(options.choices,function(e){__p+='\n  <li data-choice="'+(null==(__t=e.value)?"":__t)+'">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=e.icon)?"":__t)+'" ',e.tooltip&&(__p+='title="'+(null==(__t=e.tooltip)?"":__t)+'"'),__p+="></i>\n    ",e.label&&(__p+="<span>"+(null==(__t=e.label)?"":__t)+"</span>"),__p+="\n  </li>\n  "}),__p+="\n</ul>";return __p},templates["controls/color"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+="\n<input type=\"text\" class='cs-color-input'/>";return __p},templates["controls/column-layout"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<ul class="cs-column-layout">\n  <li class="prefab" data-layout="1/1"><span class="cs-1-1">1/1</span></li>\n  <li class="prefab" data-layout="1/2 + 1/2"><span class="cs-1-2">1/2</span><span class="cs-1-2">1/2</span></li>\n  <li class="prefab" data-layout="1/3 + 2/3" ><span class="cs-1-3">1/3</span><span class="cs-2-3">2/3</span></li>\n  <li class="prefab" data-layout="2/3 + 1/3"><span class="cs-2-3">2/3</span><span class="cs-1-3">1/3</span></li>\n  <li class="prefab" data-layout="1/3 + 1/3 + 1/3"><span class="cs-1-3">1/3</span><span class="cs-1-3">1/3</span><span class="cs-1-3">1/3</span></li>\n  <li class="prefab" data-layout="1/4 + 1/4 + 1/4 + 1/4"><span class="cs-1-4">1/4</span><span class="cs-1-4">1/4</span><span class="cs-1-4">1/4</span><span class="cs-1-4">1/4</span></li>\n  <li class="prefab" data-layout="1/5 + 1/5 + 1/5 + 1/5 + 1/5"><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span></li>\n  <li class="custom"><span class="cs-1-1 custom"><span>'+(null==(__t=cs.l18n("columns-layout-custom"))?"":__t)+'</span></span></li>\n</ul>\n<input type="text" id="column-layout" value="'+(null==(__t=_column_layout)?"":__t)+'">';return __p},templates["controls/column-order-item"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<span class="handle"><span>'+(null==(__t=size)?"":__t)+"</span></span>";return __p},templates["controls/column-order"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<ul class="cs-column-order"></ul>';return __p},templates["controls/custom-markup"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+=null==(__t=message)?"":__t;return __p},templates["controls/date"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<input type="text" class=\'cs-date-input\'/>\n<div class="cs-date-container">\n\n	<div class="cs-date-picker-entry"></div>\n\n	<div class="cs-date-format hide">\n		<div class="cs-date-format-label">Select a Format<select tabindex="-1"></select></div>\n\n	</div>\n\n</div>\n';return __p},templates["controls/default"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n<span>"+(null==(__t=debug("Control <strong>"+controlType+"</strong> could not be found."))?"":__t)+"</span>";return __p},templates["controls/dimensions"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<ul class="cs-dimensions">\n  <li><input data-edge="top"    type="text"><span>Top</span></li>\n  <li><input data-edge="right"  type="text"><span>Right</span></li>\n  <li><input data-edge="bottom" type="text"><span>Bottom</span></li>\n  <li><input data-edge="left"   type="text"><span>Left</span></li>\n  <li>\n    <button class="cs-link-dimensions">\n      <i class="cs-icon link" data-cs-icon="&#xf0c1;" title="'+(null==(__t=l18n("dimensions-unlink"))?"":__t)+'"></i>\n      <i class="cs-icon unlink" data-cs-icon="&#xf127;" title="'+(null==(__t=l18n("dimensions-link"))?"":__t)+'"></i>\n    </button>\n  </li>\n</ul>';return __p},templates["controls/expand-control-button"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<button class="cs-expand-control">\n  <span class="dashicons dashicons-editor-expand"></span>'+(null==(__t=cs.l18n("expand-control"))?"":__t)+"\n</button>";return __p},templates["controls/icon-choose-item"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<li title="'+(null==(__t=choice)?"":__t)+'" data-choice="'+(null==(__t=choice)?"":__t)+'" data-choices="'+(null==(__t=choices)?"":__t)+'"><i class="cs-icon" data-cs-icon="&#x'+(null==(__t=code)?"":__t)+'"></i></li>';return __p},templates["controls/icon-choose"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<div class="cs-icons-outer">\n	<div class="cs-search-section">\n		<div class="cs-search">\n			<input class="cs-search-input" type="search" placeholder="Search Icons">\n			<i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("search"))?"":__t)+'"></i>\n		</div>\n	</div>\n	<div class="cs-icons-inner">\n	<ul class="cs-choose cols-5 single"></ul>\n	</div>\n</div>';return __p},templates["controls/image"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<div class="cs-image">\n	<i class="cs-icon add" data-cs-icon="'+(null==(__t=fontIcon("plus-circle"))?"":__t)+'"></i>\n	<i class="cs-icon remove" data-cs-icon="'+(null==(__t=fontIcon("times-circle"))?"":__t)+'"></i>\n</div>';return __p},templates["controls/info-box"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)ui.title&&(__p+="<h4>"+(null==(__t=ui.title)?"":__t)+"</h4>"),__p+="\n",ui.message&&(__p+="<p>"+(null==(__t=ui.message)?"":__t)+"</p>");return __p},templates["controls/number"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<div>\n	<input type="number" value="">\n	',options.units&&(__p+="\n		<span>"+(null==(__t=options.units)?"":__t)+"</span>\n	"),__p+="\n</div>";return __p},templates["controls/select"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n<select>\n	",_.each(options.choices,function(e){__p+='\n		<option value="'+(null==(__t=e.value)?"":__t)+'" >'+(null==(__t=e.label)?"":__t)+"</option>\n	"}),__p+="\n</select>";return __p},templates["controls/sortable-empty"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<span class="handle"><i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("plus-square"))?"":__t)+'"></i> <span>Add</span></span>';return __p},templates["controls/sortable-item-wide"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<span class="handle">'+(null==(__t=title)?"":__t)+'</span>\n<div class="controls">\n  <button class="action1 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[0].icon))?"":__t)+'" title="'+(null==(__t=actions[0].tooltip)?"":__t)+'"></button>\n  <button class="action2 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[1].icon))?"":__t)+'" title="'+(null==(__t=actions[1].tooltip)?"":__t)+'"></button>\n</div>\n<div class="controls extra">\n  <button class="action3 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[2].icon))?"":__t)+'" title="'+(null==(__t=actions[2].tooltip)?"":__t)+'"></button>\n</div>';return __p},templates["controls/sortable-item"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<span class="handle">'+(null==(__t=title)?"":__t)+'</span>\n<div class="controls">\n  <button class="action1 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[0].icon))?"":__t)+'" title="'+(null==(__t=actions[0].tooltip)?"":__t)+'"></button>\n  <button class="action2 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[1].icon))?"":__t)+'" title="'+(null==(__t=actions[1].tooltip)?"":__t)+'"></button>\n</div>';return __p},templates["controls/sortable"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='<ul class="cs-sortable"></ul>\n',canAdd&&!empty&&(__p+='\n<button class="cs-add-sortable-item">\n  <i class="cs-icon" data-cs-icon="&#xf0fe;"></i>\n  <span>'+(null==(__t=cs.l18n("sortable-add"))?"":__t)+"</span>\n</button>\n");return __p},templates["controls/template-select"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n<select>\n	",_.each(options.choices,function(e){__p+='\n		<option value="'+(null==(__t=e.value)?"":__t)+'">'+(null==(__t=e.label)?"":__t)+"</option>\n	"}),__p+='\n</select>\n<button class="'+(null==(__t=options.templateType)?"":__t)+'">'+(null==(__t=ui.buttonText)?"":__t)+"</button>";return __p},templates["controls/text"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n<input "+(null==(__t=options.monospace?'style="font-family:monospace;"':"")?"":__t)+' type="text" value="">';return __p},templates["controls/textarea"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+="\n<textarea "+(null==(__t=options.monospace?'style="font-family:monospace;"':"")?"":__t)+"></textarea>\n",options.expandable&&print(render("controls/expand-control-button")),__p+="\n";return __p},templates["controls/title"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='<div class="cs-title ',options.showInspectButton&&(__p+="inspectable"),__p+='">\n	<input type="text" class="cs-title-input"></input>\n	',options.showInspectButton&&(__p+='\n	<button class="cs-title-button" title="'+(null==(__t=l18n("tooltip-inspect"))?"":__t)+'"><i class="cs-icon" data-cs-icon="&#xf002;"></i></button>\n	'),__p+="\n</div>";return __p},templates["controls/toggle"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<ul class="cs-toggle">\n  <li class="on"><span>'+(null==(__t=l18n("controls-on"))?"":__t)+'</span></li>\n  <li class="off"><span>'+(null==(__t=l18n("controls-off"))?"":__t)+"</span></li>\n</ul>";return __p},templates["controls/wpselect"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<div class="cs-wp-select"></div>';return __p},templates["extra/confirm"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<div class="'+(null==(__t=contentClass)?"":__t)+'">\n	',message&&(__p+='<p class="message">'+(null==(__t=message)?"":__t)+"</p>"),__p+="\n  ",yep&&(__p+='<button class="action yep sad">'+(null==(__t=yep)?"":__t)+"</button>"),__p+="\n  ",nope&&(__p+='<button class="action nope">'+(null==(__t=nope)?"":__t)+"</button>"),__p+="\n  ",subtext&&(__p+='<p class="subtext">'+(null==(__t=subtext)?"":__t)+"</p>"),__p+="\n</div>";return __p},templates["extra/expanded-control"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="cs-expanded-content-inner"></div>\n<button class="cs-expanded-close">&times;</button>';return __p},templates["extra/home"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<p class="saved-last '+(null==(__t=savedLastClass)?"":__t)+'">'+(null==(__t=savedLastMessage)?"":__t)+'</p>\n<ul class="cs-controls">\n  <li class="cs-control cs-control-actions">\n    <ul class="cs-actions">\n      <li class="action new">\n        <a href="'+(null==(__t=dashboardEditUrl)?"":__t)+'">\n          <i class="cs-icon" data-cs-icon="&#xf19a;"></i>\n          <span>'+(null==(__t=l18n("home-dashboard"))?"":__t)+'</span>\n        </a>\n      </li>\n      <li class="action templates">\n        <a href="'+(null==(__t=frontEndUrl)?"":__t)+'">\n          <i class="cs-icon" data-cs-icon="&#xf14c;"></i>\n          <span>'+(null==(__t=l18n("home-view-site"))?"":__t)+"</span>\n        </a>\n      </li>\n    </ul>\n  </li>\n</ul>";return __p},templates["extra/options"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+="\n";return __p},templates["extra/respond"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<div class="cs-respond-buttons">\n  <button class="cs-icon xl" data-respond="xl" data-cs-icon="'+(null==(__t=cs.fontIcon("desktop"))?"":__t)+'"></button>\n  <button class="cs-icon lg" data-respond="lg" data-cs-icon="'+(null==(__t=cs.fontIcon("laptop"))?"":__t)+'"></button>\n  <button class="cs-icon md" data-respond="md" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></button>\n  <button class="cs-icon sm" data-respond="sm" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></button>\n  <button class="cs-icon xs" data-respond="xs" data-cs-icon="'+(null==(__t=cs.fontIcon("mobile"))?"":__t)+'"></button>\n</div>\n<div class="cs-respond-labels">\n  <div class="xl" data-respond="xl" ><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("desktop"))?"":__t)+'"></i><span class="label">Extra Large</span><span class="size">1200px &amp; Up</span></div>\n  <div class="lg" data-respond="lg" ><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("laptop"))?"":__t)+'"></i><span class="label">Large</span><span class="size">980px &ndash; 1199px</span></div>\n  <div class="md" data-respond="md" ><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></i><span class="label">Medium</span><span class="size">768px &ndash; 979px</span></div>\n  <div class="sm" data-respond="sm" ><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></i><span class="label">Small</span><span class="size">481px &ndash; 767px</span></div>\n  <div class="xs" data-respond="xs" ><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("mobile"))?"":__t)+'"></i><span class="label">Extra Small</span><span class="size">480px &amp; Smaller</span></div>\n</div>';return __p},templates["extra/save-complete"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<p class="message">'+(null==(__t=message)?"":__t)+"</p>\n";return __p},templates["inspector/blank-state"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n"+(null==(__t=cs.icon("interface/logo-flat-inspector"))?"":__t)+'\n<span class="title">Nothing Selected</span>\n<span>Click on an element in the site preview to begin inspecting it.</span>';return __p},templates["inspector/breadcrumbs"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)count>0&&(__p+='\n  <button data-level="0" ',1==items.length&&print('class="disabled"'),__p+=">",print(1==items.length?_.first(items).title:_.first(items).label),__p+="</button>\n  ",_.each(_.rest(items),function(e,t){__p+='\n  	<span><i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon(rtl?"angle-left":"angle-right"))?"":__t)+'"></i></span>\n  	<button ',count==t+2&&print('class="disabled"'),__p+=' data-level="'+(null==(__t=t+1)?"":__t)+'" >'+(null==(__t=e.label)?"":__t)+"</button>\n  "}),__p+="\n");return __p},templates["inspector/column-actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action manage-layout">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("bars"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("inspector-manage-layout"))?"":__t)+'</span>\n  </li>\n  <li class="action erase">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("eraser"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("inspector-erase"))?"":__t)+'</span>\n    <span class="quick-confirm">'+(null==(__t=l18n("inspector-really-erase"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["inspector/element-actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action duplicate">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("copy"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("inspector-duplicate"))?"":__t)+'</span>\n  </li>\n  <li class="action delete">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("trash-o"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("inspector-delete"))?"":__t)+'</span>\n    <span class="quick-confirm">'+(null==(__t=l18n("inspector-really-delete"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["inspector/row-actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action manage-layout">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("bars"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("inspector-manage-layout"))?"":__t)+'</span>\n  </li>\n  <li class="action delete">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("trash-o"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("inspector-delete"))?"":__t)+'</span>\n    <span class="quick-confirm">'+(null==(__t=l18n("inspector-really-delete"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["layout/actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action new">\n    <i class="cs-icon" data-cs-icon="&#xf0fe;"></i>\n    <span>'+(null==(__t=l18n("layout-add-section"))?"":__t)+'</span>\n  </li>\n  <li class="action templates">\n    <i class="cs-icon" data-cs-icon="&#xf15b;"></i>\n    <span>'+(null==(__t=l18n("layout-templates"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["library/element-stub"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<span class="icon">'+(null==(__t=icon)?"":__t)+'</span>\n<span class="name"><span>'+(null==(__t=ui.title)?"":__t)+"</span></span>";return __p},templates["library/search"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="cs-search-section">\n  <div class="cs-search">\n    <input type="search" placeholder="'+(null==(__t=l18n("elements-search"))?"":__t)+'" id="elements-search">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("search"))?"":__t)+'"></i>\n  </div>\n</div>';return __p},templates["main/editor"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<header id="header" class="cs-editor-header"></header>\n<section id="pane"></section>\n<div id="skeleton" class="cs-editor-skeleton"></div>\n<footer id="footer" class="cs-editor-footer"></footer>\n<div id="expand" class="cs-editor-expansion"></div>';return __p},templates["main/extra"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="cs-editor-extra">\n	<div class="cs-tooltip-outer"><div class="cs-tooltip-inner"></div></div>\n</div>';return __p},templates["main/footer"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<nav>\n  <button class="collapse cs-icon" data-cs-icon="'+(null==(__t=fontIcon("play-circle"))?"":__t)+'"></button>\n  <button class="home cs-icon has-flyout" data-cs-icon="'+(null==(__t=fontIcon("home"))?"":__t)+'"></button>\n  <button class="help-text cs-icon" data-toggle="help:text" data-cs-icon="'+(null==(__t=fontIcon("info-circle"))?"":__t)+'"></button>\n  <button class="skeleton-mode cs-icon" data-toggle="skeleton:mode" data-cs-icon="'+(null==(__t=fontIcon("object-group"))?"":__t)+'"></button>\n  <button class="respond cs-icon has-flyout" data-cs-icon="'+(null==(__t=fontIcon("mobile"))?"":__t)+'"></button>\n  <button class="save">'+(null==(__t=l18n("footer-button-save"))?"":__t)+'</button>\n</nav>\n<div class="cs-editor-extra">\n  <div class="cs-tooltip-outer"><div class="cs-tooltip-inner"></div></div>\n</div>';return __p},templates["main/header"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<button class="layout">'+(null==(__t=cs.icon("interface/nav-layout-solid"))?"":__t)+'</button>\n<button class="elements">'+(null==(__t=cs.icon("interface/nav-elements-solid"))?"":__t)+'</button>\n<button class="inspector">'+(null==(__t=cs.icon("interface/nav-inspector-solid"))?"":__t)+'</button>\n<button class="settings">'+(null==(__t=cs.icon("interface/nav-settings-solid"))?"":__t)+"</button>";return __p},templates["main/pane"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="<h2>"+(null==(__t=heading)?"":__t)+'</h2>\n<div class="cs-pane-content-outer">\n	',paneTemplate&&(__p+="\n		"+(null==(__t=render(paneTemplate,arguments[0]))?"":__t)+"\n	"),__p+='\n  <div id="content" class="cs-pane-content-inner" style="right:0px;"></div>\n</div>\n<div class="cs-builder-sub '+(null==(__t=name)?"":__t)+'">\n  <button class="cs-builder-sub-back">\n    <i class="cs-icon" data-cs-icon="&#xf053;"></i> <span>'+(null==(__t=returnButtonText)?"":__t)+'</span>\n  </button>\n  <div class="cs-pane-content-outer">\n  	<div id="sub" class="cs-pane-content-inner"></div>\n  </div>\n</div>\n\n\n';return __p},templates["main/skeleton-item"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='<div class="cs-skeleton-handle" >\n	<div class="cs-skeleton-title" >'+(null==(__t=title)?"":__t)+'</div>\n	<div class="cs-skeleton-controls">\n		',_.each(controls,function(e){var t=e.action+(e.persist?" persist":"");__p+='\n			<button class="'+(null==(__t=t)?"":__t)+' cs-icon" data-action="'+(null==(__t=e.action)?"":__t)+'" data-cs-icon="'+(null==(__t=fontIcon(e.icon))?"":__t)+'" ',e.iconAlt&&(__p+=' data-cs-icon-alt="'+(null==(__t=fontIcon(e.iconAlt))?"":__t)+'" '),__p+="></button>\n		"}),__p+="\n	</div>\n</div>\n",__p+="row"==_type?'\n<div class="cs-skeleton-container-outer">\n	<div class="cs-skeleton-container-inner cs-skeleton-container-'+(null==(__t=_type)?"":__t)+'"></div>\n</div>\n':'\n<div class="cs-skeleton-container cs-skeleton-container-'+(null==(__t=_type)?"":__t)+'"></div>\n',
__p+="\n\n\n\n";return __p},templates["main/skeleton"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="cs-skeleton-content-inner">\n	<div class="cs-skeleton-items"></div>\n</div>';return __p},templates["settings/actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action css">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("paint-brush"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("settings-css-editor"))?"":__t)+'</span>\n  </li>\n  <li class="action js">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("code"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("settings-js-editor"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["settings/content"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<div id="controls"></div>\n<div id="sections"></div>';return __p},templates["settings/section"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<h3 class="cs-pane-section-toggle">'+(null==(__t=_section_title)?"":__t)+'</h3>\n<div class="cs-pane-section">\n	<ul class="cs-controls"></ul>\n</div>';return __p},templates["utility/htmlhint"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="<p>"+(null==(__t=l18n("htmlhint-intro"))?"":__t)+"</p>\n<ul>",_.each(errors,function(e){__p+="\n  <li>"+(null==(__t=l18n("htmlhint-"+e))?"":__t)+"</li>\n"}),__p+="</ul>";return __p},templates["layout/sub-row/layout-sub-row"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<div id="layout-row-controls" class="cs-pane-section controls"></div>\n<div id="layout-column-controls" class="cs-pane-section controls"></div>';return __p},templates["layout/sub-templates/layout-sub-template"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<div id="layout-template-controls" class="cs-pane-section controls"></div>\n<div id="layout-template-sections" class="cs-pane-section sections"></div>';return __p},templates["layout/sub-templates/save-dialog"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="cs-title">\n	<input type="text" class="cs-title-input" value="'+(null==(__t=title)?"":__t)+'"></input>\n</div>\n<ul class="cs-actions">\n  <li class="action download">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("download"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("templates-download"))?"":__t)+'</span>\n  </li>\n  <li class="action save">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("book"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("templates-save-library"))?"":__t)+'</span>\n  </li>\n</ul>\n<button class="close">&times;</button>';return __p},templates["layout/sub-templates/template-actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action save">\n    <i class="cs-icon" data-cs-icon="&#xf0c7;"></i>\n    <span>'+(null==(__t=l18n("templates-save"))?"":__t)+'</span>\n  </li>\n  <li class="action upload">\n    <i class="cs-icon" data-cs-icon="&#xf093;"></i>\n    <span>'+(null==(__t=l18n("templates-upload"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["layout/sub-templates/upload-dialog"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<input id="template-upload" type="file" name="blockUpload"/>\n<button class="process">'+(null==(__t=l18n("templates-upload-button"))?"":__t)+'</button>\n<button class="close">&times;</button>';return __p},module.exports=templates},{}],119:[function(require,module,exports){var templates={};templates["dragging-placeholder"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="cs-dragging-placeholder">\n	<svg class="cs-custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-290 382 30 30" enable-background="new -290 382 30 30" xml:space="preserve">\n	  <g>\n	    <path d="M-275,395.9l12-6.4l-11.5-6c-0.3-0.2-0.6-0.2-0.9,0l-11.6,6.1L-275,395.9z"/>\n	    <path d="M-274,397.5v12.7l11.4-6.1c0.3-0.2,0.5-0.5,0.5-0.9v-12.1L-274,397.5z"/>\n	    <path d="M-276,397.5l-11.9-6.3v12.1c0,0.4,0.2,0.7,0.5,0.9l11.4,6V397.5z"/>\n	  </g>\n	</svg>\n</div>';return __p},templates["empty-column"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="cs-empty-column">\n	<svg class="cs-custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-290 382 30 30" enable-background="new -290 382 30 30" xml:space="preserve">\n	  <g>\n	    <path d="M-275,395.9l12-6.4l-11.5-6c-0.3-0.2-0.6-0.2-0.9,0l-11.6,6.1L-275,395.9z"/>\n	    <path d="M-274,397.5v12.7l11.4-6.1c0.3-0.2,0.5-0.5,0.5-0.9v-12.1L-274,397.5z"/>\n	    <path d="M-276,397.5l-11.9-6.3v12.1c0,0.4,0.2,0.7,0.5,0.9l11.4,6V397.5z"/>\n	  </g>\n	</svg>\n</div>';return __p},templates["empty-element"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="cs-empty-element">\n  <div class="cs-empty-element-icon">\n    '+(null==(__t=cs.elementIcon(_type))?"":__t)+"\n  </div>\n</div>";return __p},templates["empty-rows"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n"+(null==(__t=cs.icon("interface/logo-flat-muted"))?"":__t)+'\n<h2>Welcome to Cornerstone</h2>\n<p>Get started by adding sections to the <strong class="cs-empty-rows-layout">'+(null==(__t=cs.icon("interface/nav-layout-solid"))?"":__t)+'Layout</strong> pane in the sidebar or begin with a template. Click on your sections to add rows and alter column structure, then go to the <strong class="cs-empty-rows-elements">'+(null==(__t=cs.icon("interface/nav-elements-solid"))?"":__t)+'Elements</strong> pane and begin dragging in your items. Clicking on any element in the preview area takes you to the <strong class="cs-empty-rows-inspector">'+(null==(__t=cs.icon("interface/nav-inspector-solid"))?"":__t)+"Inspector</strong> pane to alter its appearance. Happy building!</p>";return __p},templates.loading=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<div class="cs-empty-element">\n  <div class="cs-empty-element-icon">\n    <i class="cs-icon cs-icon-loading" data-cs-icon="&#xf110;"></i>\n  </div>\n</div>';return __p},templates.observer=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="cs-observer-tooltip top left">'+(null==(__t=tooltip)?"":__t)+"</div>";return __p},module.exports=templates},{}],120:[function(e,t,n){"use strict";function i(e){var t=r[e];return t?t.lastIndex=0:r[e]=t=new RegExp(a+e+l,"g"),t}function o(e,t){var n=e.className;n.length?i(t).test(n)||(e.className+=" "+t):e.className=t}function s(e,t){e.className=e.className.replace(i(t)," ").trim()}var r={},a="(?:^|\\s)",l="(?:\\s|$)";t.exports={add:o,rm:s}},{}],121:[function(e,t,n){(function(n){"use strict";function i(e,t){function n(e){return-1!==ue.containers.indexOf(e)||ce.isContainer(e)}function i(e){var t=e?"remove":"add";o(k,t,"mousedown",T),o(k,t,"mouseup",B)}function a(e){var t=e?"remove":"add";o(k,t,"mousemove",S)}function v(e){var t=e?"remove":"add";o(k,t,"selectstart",$),o(k,t,"click",$)}function y(){i(!0),B({})}function $(e){ae&&e.preventDefault()}function T(e){te=e.clientX,ne=e.clientY;var t=1!==s(e)||e.metaKey||e.ctrlKey;if(!t){var n=e.target,i=j(n);i&&(ae=i,a(),"mousedown"===e.type&&(m(n)?n.focus():e.preventDefault()))}}function S(e){if(ae){if(0===s(e))return void B({});if(void 0===e.clientX||e.clientX!==te||void 0===e.clientY||e.clientY!==ne){if(ce.ignoreInputTextSelection){var t=b("clientX",e),n=b("clientY",e),i=x.elementFromPoint(t,n);if(m(i))return}var o=ae;a(!0),v(),M(),I(o);var l=r(G),c=ce.offset({x:b("pageX",e)-l.left,y:b("pageY",e)-l.top},e,G);Z=c.x,ee=c.y,w.add(se||G,"gu-transit"),H(),O(e)}}}function j(e){if(!(ue.dragging&&Q||n(e))){for(var t=e;g(e)&&n(g(e))===!1;){if(ce.invalid(e,t))return;if(e=g(e),!e)return}var i=g(e);if(i&&!ce.invalid(e,t)){var o=ce.moves(e,i,t,f(e));if(o)return{item:e,source:i}}}}function E(e){var t=j(e);t&&I(t)}function I(e){U(e.item,e.source)&&(se=e.item.cloneNode(!0),ue.emit("cloned",se,e.item,"copy")),K=e.source,G=e.item,ie=oe=f(e.item),ue.dragging=!0,ue.emit("drag",G,K)}function L(){return!1}function M(){if(ue.dragging){var e=se||G;D(e,g(e))}}function R(){ae=!1,a(!0),v(!0)}function B(e){if(R(),ue.dragging){var t=se||G,n=b("clientX",e),i=b("clientY",e),o=l(Q,n,i),s=P(o,n,i);s&&(se&&ce.copySortSource||!se||s!==K)?D(t,s):ce.removeOnSpill?N():V()}}function D(e,t){var n=g(e);se&&ce.copySortSource&&t===K&&n.removeChild(G),z(t)?ue.emit("cancel",e,K,K):ue.emit("drop",e,t,K,oe),A()}function N(){if(ue.dragging){var e=se||G,t=g(e);t&&t.removeChild(e),ue.emit(se?"cancel":"remove",e,t,K),A()}}function V(e){if(ue.dragging){var t=arguments.length>0?e:ce.revertOnSpill,n=se||G,i=g(n);i===K&&se&&i.removeChild(se);var o=z(i);o===!1&&!se&&t&&K.insertBefore(n,ie),o||t?ue.emit("cancel",n,K,K):ue.emit("drop",n,i,K,oe),A()}}function A(){var e=se||G;R(),X(),e&&w.rm(e,"gu-transit"),re&&clearTimeout(re),ue.dragging=!1,le&&ue.emit("out",e,le,K),ue.emit("dragend",e),K=G=se=ie=oe=re=le=null}function z(e,t){var n;return n=void 0!==t?t:Q?oe:f(se||G),e===K&&n===ie}function P(e,t,i){function o(){var o=n(s);if(o===!1)return!1;var r=W(s,e),a=F(s,r,t,i),l=z(s,a);return l?!0:ce.accepts(G,s,K,a)}for(var s=e;s&&!o();)s=g(s);return s}function O(e){function t(e){ue.emit(e,c,le,K)}function n(){p&&t("over")}function i(){le&&t("out")}if(Q){e.preventDefault();var o=b("clientX",e),s=b("clientY",e),r=o-Z,a=s-ee;Q.style.left=r+"px",Q.style.top=a+"px";var c=se||G,u=l(Q,o,s),d=P(u,o,s),p=null!==d&&d!==le;(p||null===d)&&(i(),le=d,n());var h=g(c);if(d===K&&se&&!ce.copySortSource)return void(h&&h.removeChild(c));var m,v=W(d,u);if(null!==v)m=F(d,v,o,s);else{if(ce.revertOnSpill!==!0||se)return void(se&&h&&h.removeChild(c));m=ie,d=K}(null===m||m!==c&&m!==f(c)&&m!==oe)&&(oe=m,d.insertBefore(c,m),ue.emit("shadow",c,d,K))}}function Y(e){w.rm(e,"gu-hide")}function q(e){ue.dragging&&w.add(e,"gu-hide")}function H(){if(!Q){var e=G.getBoundingClientRect();Q=G.cloneNode(!0),Q.style.width=p(e)+"px",Q.style.height=h(e)+"px",w.rm(Q,"gu-transit"),w.add(Q,"gu-mirror"),ce.mirrorContainer.appendChild(Q),o(k,"add","mousemove",O),w.add(ce.mirrorContainer,"gu-unselectable"),ue.emit("cloned",Q,G,"mirror")}}function X(){Q&&(w.rm(ce.mirrorContainer,"gu-unselectable"),o(k,"remove","mousemove",O),g(Q).removeChild(Q),Q=null)}function W(e,t){for(var n=t;n!==e&&g(n)!==e;)n=g(n);return n===k?null:n}function F(e,t,n,i){function o(){var t,o,s,r=e.children.length;for(t=0;r>t;t++){if(o=e.children[t],s=o.getBoundingClientRect(),a&&s.left>n)return o;if(!a&&s.top>i)return o}return null}function s(){var e=t.getBoundingClientRect();return r(a?n>e.left+p(e)/2:i>e.top+h(e)/2)}function r(e){return e?f(t):t}var a="horizontal"===ce.direction,l=t!==e?s():o();return l}function U(e,t){return"boolean"==typeof ce.copy?ce.copy:ce.copy(e,t)}var J=arguments.length;1===J&&Array.isArray(e)===!1&&(t=e,e=[]);var Q,K,G,Z,ee,te,ne,ie,oe,se,re,ae,le=null,ce=t||{};void 0===ce.moves&&(ce.moves=u),void 0===ce.accepts&&(ce.accepts=u),void 0===ce.invalid&&(ce.invalid=L),void 0===ce.containers&&(ce.containers=e||[]),void 0===ce.isContainer&&(ce.isContainer=c),void 0===ce.copy&&(ce.copy=!1),void 0===ce.copySortSource&&(ce.copySortSource=!1),void 0===ce.revertOnSpill&&(ce.revertOnSpill=!1),void 0===ce.removeOnSpill&&(ce.removeOnSpill=!1),void 0===ce.direction&&(ce.direction="vertical"),void 0===ce.ignoreInputTextSelection&&(ce.ignoreInputTextSelection=!0),void 0===ce.mirrorContainer&&(ce.mirrorContainer=C),void 0===ce.offset&&(ce.offset=d);var ue=_({containers:ce.containers,start:E,end:M,cancel:V,remove:N,destroy:y,dragging:!1,isContainer:n});return ce.removeOnSpill===!0&&ue.on("over",Y).on("out",q),i(),ue}function o(e,t,i,o){var s={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},r={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};n.navigator.msPointerEnabled&&y[t](e,r[i],o),y[t](e,s[i],o),y[t](e,i,o)}function s(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.buttons)return e.buttons;if(void 0!==e.which)return e.which;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function r(e){var t=e.getBoundingClientRect();return{left:t.left+a("scrollLeft","pageXOffset"),top:t.top+a("scrollTop","pageYOffset")}}function a(e,t){return"undefined"!=typeof n[t]?n[t]:k.clientHeight?k[e]:C[e]}function l(e,t,n){var i,o=e||{},s=o.className;return o.className+=" gu-hide",i=x.elementFromPoint(t,n),o.className=s,i}function c(){return!1}function u(){return!0}function d(e){return e}function p(e){return e.width||e.right-e.left}function h(e){return e.height||e.bottom-e.top}function g(e){return e.parentNode===x?null:e.parentNode}function m(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName}function f(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}return e.nextElementSibling||t()}function v(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function b(e,t){var n=v(t),i={pageX:"clientX",pageY:"clientY"};return e in i&&!(e in n)&&i[e]in n&&(e=i[e]),n[e]}var _=e("contra/emitter"),y=e("crossvent"),w=e("./classes"),x=document,k=x.documentElement,C=x.body;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":120,"contra/emitter":129,crossvent:133}],122:[function(e,t,n){var i=function(e){function t(e,t){return Array(e+1).join(t||" ")}var n={};return n.version="0.9.13",n.release="20151030",n.rules={},n.defaultRuleset={"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"doctype-first":!0,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0,"title-require":!0},n.addRule=function(e){n.rules[e.id]=e},n.verify=function(t,i){t=t.replace(/^\s*<!--\s*htmlhint\s+([^\r\n]+?)\s*-->/i,function(t,n){return i===e&&(i={}),n.replace(/(?:^|,)\s*([^:,]+)\s*(?:\:\s*([^,\s]+))?/g,function(t,n,o){"false"===o?o=!1:"true"===o&&(o=!0),i[n]=o===e?!0:o}),""}),(i===e||0===Object.keys(i).length)&&(i=n.defaultRuleset);var s,r=new o,a=new n.Reporter(t,i),l=n.rules;for(var c in i)s=l[c],s!==e&&i[c]!==!1&&s.init(r,a,i[c]);return r.parse(t),a.messages},n.format=function(e,n){n=n||{};var i=[],o={white:"",grey:"",red:"",reset:""};n.colors&&(o.white="[37m",o.grey="[90m",o.red="[31m",o.reset="[39m");var s=n.indent||0;return e.forEach(function(e){var n=40,r=n+20,a=e.evidence,l=e.line,c=e.col,u=a.length,d=c>n+1?c-n:1,p=a.length>c+r?c+r:u;n+1>c&&(p+=n-c+1),a=a.replace(/\t/g," ").substring(d-1,p),d>1&&(a="..."+a,d-=3),u>p&&(a+="..."),i.push(o.white+t(s)+"L"+l+" |"+o.grey+a+o.reset);var h=c-d,g=a.substring(0,h).match(/[^\u0000-\u00ff]/g);null!==g&&(h+=g.length),i.push(o.white+t(s)+t((l+"").length+3+h)+"^ "+o.red+e.message+" ("+e.rule.id+")"+o.reset)}),i},n}();"object"==typeof n&&n&&(n.HTMLHint=i),function(e){var t=function(){var e=this;e._init.apply(e,arguments)};t.prototype={_init:function(e,t){var n=this;n.html=e,n.lines=e.split(/\r?\n/);var i=e.match(/\r?\n/);n.brLen=null!==i?i[0].length:0,n.ruleset=t,n.messages=[]},error:function(e,t,n,i,o){this.report("error",e,t,n,i,o)},warn:function(e,t,n,i,o){this.report("warning",e,t,n,i,o)},info:function(e,t,n,i,o){this.report("info",e,t,n,i,o)},report:function(e,t,n,i,o,s){for(var r,a,l=this,c=l.lines,u=l.brLen,d=n-1,p=c.length;p>d&&(r=c[d],a=r.length,i>a&&p>n);d++)n++,i-=a,1!==i&&(i-=u);l.messages.push({type:e,message:t,raw:s,evidence:r,line:n,col:i,rule:{id:o.id,description:o.description,link:"https://github.com/yaniswang/HTMLHint/wiki/"+o.id}})}},e.Reporter=t}(i);var o=function(e){var t=function(){var e=this;e._init.apply(e,arguments)};return t.prototype={_init:function(){var e=this;e._listeners={},e._mapCdataTags=e.makeMap("script,style"),e._arrBlocks=[],e.lastEvent=null},makeMap:function(e){for(var t={},n=e.split(","),i=0;n.length>i;i++)t[n[i]]=!0;return t},parse:function(t){function n(t,n,i,o){var s=i-b+1;o===e&&(o={}),o.raw=n,o.pos=i,o.line=_,o.col=s,y.push(o),d.fire(t,o);for(var r;r=m.exec(n);)_++,b=i+m.lastIndex}var i,o,s,r,a,l,c,u,d=this,p=d._mapCdataTags,h=/<(?:\/([^\s>]+)\s*|!--([\s\S]*?)--|!([^>]*?)|([\w\-:]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'>]*))?)*?)\s*(\/?))>/g,g=/\s*([\w\-:]+)(?:\s*=\s*(?:(")([^"]*)"|(')([^']*)'|([^\s"'>]*)))?/g,m=/\r?\n/g,f=0,v=0,b=0,_=1,y=d._arrBlocks;for(d.fire("start",{pos:0,line:1,col:1});i=h.exec(t);)if(o=i.index,o>f&&(u=t.substring(f,o),a?c.push(u):n("text",u,f)),f=h.lastIndex,!(s=i[1])||(a&&s===a&&(u=c.join(""),n("cdata",u,v,{tagName:a,attrs:l}),a=null,l=null,c=null),a))if(a)c.push(i[0]);else if(s=i[4]){r=[];for(var w,x=i[5],k=0;w=g.exec(x);){var C=w[1],$=w[2]?w[2]:w[4]?w[4]:"",T=w[3]?w[3]:w[5]?w[5]:w[6]?w[6]:"";r.push({name:C,value:T,quote:$,index:w.index,raw:w[0]}),k+=w[0].length}k===x.length?(n("tagstart",i[0],o,{tagName:s,attrs:r,close:i[6]}),p[s]&&(a=s,l=r.concat(),c=[],v=f)):n("text",i[0],o)}else(i[2]||i[3])&&n("comment",i[0],o,{content:i[2]||i[3],"long":i[2]?!0:!1});else n("tagend",i[0],o,{tagName:s});t.length>f&&(u=t.substring(f,t.length),n("text",u,f)),d.fire("end",{pos:f,line:_,col:t.length-b+1})},addListener:function(t,n){for(var i,o=this._listeners,s=t.split(/[,\s]/),r=0,a=s.length;a>r;r++)i=s[r],o[i]===e&&(o[i]=[]),o[i].push(n)},fire:function(t,n){n===e&&(n={}),n.type=t;var i=this,o=[],s=i._listeners[t],r=i._listeners.all;s!==e&&(o=o.concat(s)),r!==e&&(o=o.concat(r));var a=i.lastEvent;null!==a&&(delete a.lastEvent,n.lastEvent=a),i.lastEvent=n;for(var l=0,c=o.length;c>l;l++)o[l].call(i,n)},removeListener:function(t,n){var i=this._listeners[t];if(i!==e)for(var o=0,s=i.length;s>o;o++)if(i[o]===n){i.splice(o,1);break}},fixPos:function(e,t){var n,i=e.raw.substr(0,t),o=i.split(/\r?\n/),s=o.length-1,r=e.line;return s>0?(r+=s,n=o[s].length+1):n=e.col+t,{line:r,col:n}},getMapAttrs:function(e){for(var t,n={},i=0,o=e.length;o>i;i++)t=e[i],n[t.name]=t.value;return n}},t}();"object"==typeof n&&n&&(n.HTMLParser=o),i.addRule({id:"alt-require",description:"The alt attribute of an <img> element must be present and alt attribute of area[href] and input[type=image] must have a value.",init:function(e,t){var n=this;e.addListener("tagstart",function(i){var o,s=i.tagName.toLowerCase(),r=e.getMapAttrs(i.attrs),a=i.col+s.length+1;"img"!==s||"alt"in r?("area"===s&&"href"in r||"input"===s&&"image"===r.type)&&("alt"in r&&""!==r.alt||(o="area"===s?"area[href]":"input[type=image]",t.warn("The alt attribute of "+o+" must have a value.",i.line,a,n,i.raw))):t.warn("An alt attribute must be present on <img> elements.",i.line,a,n,i.raw)})}}),i.addRule({id:"attr-lowercase",description:"All attribute names must be in lowercase.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o=e.attrs,s=e.col+e.tagName.length+1,r=0,a=o.length;a>r;r++){i=o[r];var l=i.name;l!==l.toLowerCase()&&t.error("The attribute name of [ "+l+" ] must be in lowercase.",e.line,s+i.index,n,i.raw)}})}}),i.addRule({id:"attr-no-duplication",description:"Elements cannot have duplicate attributes.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o,s=e.attrs,r=e.col+e.tagName.length+1,a={},l=0,c=s.length;c>l;l++)i=s[l],o=i.name,a[o]===!0&&t.error("Duplicate of attribute name [ "+i.name+" ] was found.",e.line,r+i.index,n,i.raw),a[o]=!0})}}),i.addRule({id:"attr-unsafe-chars",description:"Attribute values cannot contain unsafe chars.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o,s=e.attrs,r=e.col+e.tagName.length+1,a=/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,l=0,c=s.length;c>l;l++)if(i=s[l],o=i.value.match(a),null!==o){var u=escape(o[0]).replace(/%u/,"\\u").replace(/%/,"\\x");t.warn("The value of attribute [ "+i.name+" ] cannot contain an unsafe char [ "+u+" ].",e.line,r+i.index,n,i.raw)}})}}),i.addRule({id:"attr-value-double-quotes",description:"Attribute values must be in double quotes.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o=e.attrs,s=e.col+e.tagName.length+1,r=0,a=o.length;a>r;r++)i=o[r],(""!==i.value&&'"'!==i.quote||""===i.value&&"'"===i.quote)&&t.error("The value of attribute [ "+i.name+" ] must be in double quotes.",e.line,s+i.index,n,i.raw)})}}),i.addRule({id:"attr-value-not-empty",description:"All attributes must have values.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o=e.attrs,s=e.col+e.tagName.length+1,r=0,a=o.length;a>r;r++)i=o[r],""===i.quote&&""===i.value&&t.warn("The attribute [ "+i.name+" ] must have a value.",e.line,s+i.index,n,i.raw)})}}),i.addRule({id:"csslint",description:"Scan css with csslint.",init:function(t,i,o){var s=this;t.addListener("cdata",function(t){if("style"===t.tagName.toLowerCase()){var r;if(r="object"==typeof n&&e?e("csslint").CSSLint.verify:CSSLint.verify,void 0!==o){var a=t.line-1,l=t.col-1;try{var c=r(t.raw,o).messages;c.forEach(function(e){var t=e.line;i["warning"===e.type?"warn":"error"]("["+e.rule.id+"] "+e.message,a+t,(1===t?l:0)+e.col,s,e.evidence)})}catch(u){}}}})}}),i.addRule({id:"doctype-first",description:"Doctype must be declared first.",init:function(e,t){var n=this,i=function(o){"start"===o.type||"text"===o.type&&/^\s*$/.test(o.raw)||(("comment"!==o.type&&o["long"]===!1||/^DOCTYPE\s+/i.test(o.content)===!1)&&t.error("Doctype must be declared first.",o.line,o.col,n,o.raw),e.removeListener("all",i))};e.addListener("all",i)}}),i.addRule({id:"doctype-html5",description:'Invalid doctype. Use: "<!DOCTYPE html>"',init:function(e,t){function n(e){e["long"]===!1&&"doctype html"!==e.content.toLowerCase()&&t.warn('Invalid doctype. Use: "<!DOCTYPE html>"',e.line,e.col,o,e.raw)}function i(){e.removeListener("comment",n),e.removeListener("tagstart",i)}var o=this;e.addListener("all",n),e.addListener("tagstart",i)}}),i.addRule({id:"head-script-disabled",description:"The <script> tag cannot be used in a <head> tag.",init:function(e,t){function n(n){var i=e.getMapAttrs(n.attrs),a=i.type,l=n.tagName.toLowerCase();"head"===l&&(r=!0),r!==!0||"script"!==l||a&&s.test(a)!==!0||t.warn("The <script> tag cannot be used in a <head> tag.",n.line,n.col,o,n.raw)}function i(t){"head"===t.tagName.toLowerCase()&&(e.removeListener("tagstart",n),e.removeListener("tagend",i))}var o=this,s=/^(text\/javascript|application\/javascript)$/i,r=!1;e.addListener("tagstart",n),e.addListener("tagend",i)}}),i.addRule({id:"href-abs-or-rel",description:"An href attribute must be either absolute or relative.",init:function(e,t,n){var i=this,o="abs"===n?"absolute":"relative";e.addListener("tagstart",function(e){for(var n,s=e.attrs,r=e.col+e.tagName.length+1,a=0,l=s.length;l>a;a++)if(n=s[a],"href"===n.name){("absolute"===o&&/^\w+?:/.test(n.value)===!1||"relative"===o&&/^https?:\/\//.test(n.value)===!0)&&t.warn("The value of the href attribute [ "+n.value+" ] must be "+o+".",e.line,r+n.index,i,n.raw);break}})}}),i.addRule({id:"id-class-ad-disabled",description:"The id and class attributes cannot use the ad keyword, it will be blocked by adblock software.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o,s=e.attrs,r=e.col+e.tagName.length+1,a=0,l=s.length;l>a;a++)i=s[a],o=i.name,/^(id|class)$/i.test(o)&&/(^|[-\_])ad([-\_]|$)/i.test(i.value)&&t.warn("The value of attribute "+o+" cannot use the ad keyword.",e.line,r+i.index,n,i.raw)})}}),i.addRule({id:"id-class-value",description:"The id and class attribute values must meet the specified rules.",init:function(e,t,n){var i,o=this,s={underline:{regId:/^[a-z\d]+(_[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by an underscore."},dash:{regId:/^[a-z\d]+(-[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by a dash."},hump:{regId:/^[a-z][a-zA-Z\d]*([A-Z][a-zA-Z\d]*)*$/,message:"The id and class attribute values must meet the camelCase style."}};if(i="string"==typeof n?s[n]:n,i&&i.regId){var r=i.regId,a=i.message;e.addListener("tagstart",function(e){for(var n,i=e.attrs,s=e.col+e.tagName.length+1,l=0,c=i.length;c>l;l++)if(n=i[l],"id"===n.name.toLowerCase()&&r.test(n.value)===!1&&t.warn(a,e.line,s+n.index,o,n.raw),"class"===n.name.toLowerCase())for(var u,d=n.value.split(/\s+/g),p=0,h=d.length;h>p;p++)u=d[p],u&&r.test(u)===!1&&t.warn(a,e.line,s+n.index,o,u)})}}}),i.addRule({id:"id-unique",description:"The value of id attributes must be unique.",init:function(e,t){var n=this,i={};e.addListener("tagstart",function(e){for(var o,s,r=e.attrs,a=e.col+e.tagName.length+1,l=0,c=r.length;c>l;l++)if(o=r[l],"id"===o.name.toLowerCase()){s=o.value,s&&(void 0===i[s]?i[s]=1:i[s]++,i[s]>1&&t.error("The id value [ "+s+" ] must be unique.",e.line,a+o.index,n,o.raw));break}})}}),i.addRule({id:"inline-script-disabled",description:"Inline script cannot be use.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o,s=e.attrs,r=e.col+e.tagName.length+1,a=/^on(unload|message|submit|select|scroll|resize|mouseover|mouseout|mousemove|mouseleave|mouseenter|mousedown|load|keyup|keypress|keydown|focus|dblclick|click|change|blur|error)$/i,l=0,c=s.length;c>l;l++)i=s[l],o=i.name.toLowerCase(),a.test(o)===!0?t.warn("Inline script [ "+i.raw+" ] cannot be use.",e.line,r+i.index,n,i.raw):("src"===o||"href"===o)&&/^\s*javascript:/i.test(i.value)&&t.warn("Inline script [ "+i.raw+" ] cannot be use.",e.line,r+i.index,n,i.raw)})}}),i.addRule({id:"inline-style-disabled",description:"Inline style cannot be use.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o=e.attrs,s=e.col+e.tagName.length+1,r=0,a=o.length;a>r;r++)i=o[r],"style"===i.name.toLowerCase()&&t.warn("Inline style [ "+i.raw+" ] cannot be use.",e.line,s+i.index,n,i.raw)})}}),i.addRule({id:"jshint",description:"Scan script with jshint.",init:function(t,i,o){var s=this;t.addListener("cdata",function(r){if("script"===r.tagName.toLowerCase()){var a=t.getMapAttrs(r.attrs),l=a.type;if(void 0!==a.src||l&&/^(text\/javascript)$/i.test(l)===!1)return;var c;if(c="object"==typeof n&&e?e("jshint").JSHINT:JSHINT,void 0!==o){var u=r.line-1,d=r.col-1,p=r.raw.replace(/\t/g," ");try{var h=c(p,o);h===!1&&c.errors.forEach(function(e){var t=e.line;i.warn(e.reason,u+t,(1===t?d:0)+e.character,s,e.evidence)})}catch(g){}}}})}}),i.addRule({id:"space-tab-mixed-disabled",description:"Do not mix tabs and spaces for indentation.",init:function(e,t,n){var i=this;e.addListener("text",function(o){for(var s,r=o.raw,a=/(^|\r?\n)([ \t]+)/g;s=a.exec(r);){var l=e.fixPos(o,s.index+s[1].length);"space"===n&&/^ +$/.test(s[2])===!1?t.warn("Please use space for indentation.",l.line,1,i,o.raw):"tab"===n&&/^\t+$/.test(s[2])===!1?t.warn("Please use tab for indentation.",l.line,1,i,o.raw):/ +\t|\t+ /.test(s[2])===!0&&t.warn("Do not mix tabs and spaces for indentation.",l.line,1,i,o.raw)}})}}),i.addRule({id:"spec-char-escape",description:"Special characters must be escaped.",init:function(e,t){var n=this;e.addListener("text",function(i){for(var o,s=i.raw,r=/[<>]/g;o=r.exec(s);){var a=e.fixPos(i,o.index);t.error("Special characters must be escaped : [ "+o[0]+" ].",a.line,a.col,n,i.raw)}})}}),i.addRule({id:"src-not-empty",description:"The src attribute of an img(script,link) must have a value.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o=e.tagName,s=e.attrs,r=e.col+o.length+1,a=0,l=s.length;l>a;a++)i=s[a],(/^(img|script|embed|bgsound|iframe)$/.test(o)===!0&&"src"===i.name||"link"===o&&"href"===i.name||"object"===o&&"data"===i.name)&&""===i.value&&t.error("The attribute [ "+i.name+" ] of the tag [ "+o+" ] must have a value.",e.line,r+i.index,n,i.raw)})}}),i.addRule({id:"style-disabled",description:"<style> tags cannot be used.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){"style"===e.tagName.toLowerCase()&&t.warn("The <style> tag cannot be used.",e.line,e.col,n,e.raw)})}}),i.addRule({id:"tag-pair",description:"Tag must be paired.",init:function(e,t){var n=this,i=[],o=e.makeMap("area,base,basefont,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track");e.addListener("tagstart",function(e){var t=e.tagName.toLowerCase();void 0!==o[t]||e.close||i.push({tagName:t,line:e.line,raw:e.raw})}),e.addListener("tagend",function(e){for(var o=e.tagName.toLowerCase(),s=i.length-1;s>=0&&i[s].tagName!==o;s--);if(s>=0){for(var r=[],a=i.length-1;a>s;a--)r.push("</"+i[a].tagName+">");if(r.length>0){var l=i[i.length-1];t.error("Tag must be paired, missing: [ "+r.join("")+" ], start tag match failed [ "+l.raw+" ] on line "+l.line+".",e.line,e.col,n,e.raw)}i.length=s}else t.error("Tag must be paired, no start tag: [ "+e.raw+" ]",e.line,e.col,n,e.raw)}),e.addListener("end",function(e){for(var o=[],s=i.length-1;s>=0;s--)o.push("</"+i[s].tagName+">");if(o.length>0){var r=i[i.length-1];t.error("Tag must be paired, missing: [ "+o.join("")+" ], open tag match failed [ "+r.raw+" ] on line "+r.line+".",e.line,e.col,n,"")}})}}),i.addRule({id:"tag-self-close",description:"Empty tags must be self closed.",init:function(e,t){var n=this,i=e.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed");e.addListener("tagstart",function(e){var o=e.tagName.toLowerCase();void 0!==i[o]&&(e.close||t.warn("The empty tag : [ "+o+" ] must be self closed.",e.line,e.col,n,e.raw))})}}),i.addRule({id:"tagname-lowercase",description:"All html element names must be in lowercase.",init:function(e,t){var n=this;e.addListener("tagstart,tagend",function(e){var i=e.tagName;i!==i.toLowerCase()&&t.error("The html element name of [ "+i+" ] must be in lowercase.",e.line,e.col,n,e.raw)})}}),i.addRule({id:"title-require",description:"<title> must be present in <head> tag.",init:function(e,t){function n(e){var t=e.tagName.toLowerCase();"head"===t?s=!0:"title"===t&&s&&(r=!0)}function i(s){var a=s.tagName.toLowerCase();if(r&&"title"===a){var l=s.lastEvent;("text"!==l.type||"text"===l.type&&/^\s*$/.test(l.raw)===!0)&&t.error("<title></title> must not be empty.",s.line,s.col,o,s.raw)}else"head"===a&&(r===!1&&t.error("<title> must be present in <head> tag.",s.line,s.col,o,s.raw),e.removeListener("tagstart",n),e.removeListener("tagend",i))}var o=this,s=!1,r=!1;e.addListener("tagstart",n),e.addListener("tagend",i)}})},{csslint:127,jshint:127}],123:[function(e,t,n){(function(){"use strict";var e,t,n,i=function(e,t){return function(){return e.apply(t,arguments)}};e=jQuery,t=function(){function e(){}return e.transitions={webkitTransition:"webkitTransitionEnd",mozTransition:"mozTransitionEnd",oTransition:"oTransitionEnd",transition:"transitionend"},e.transition=function(e){var t,n,i,o;t=e[0],n=this.transitions;for(o in n)if(i=n[o],null!=t.style[o])return i},e}(),n=function(){function n(t){null==t&&(t={}),this.html=i(this.html,this),this.$growl=i(this.$growl,this),this.$growls=i(this.$growls,this),this.animate=i(this.animate,this),this.remove=i(this.remove,this),this.dismiss=i(this.dismiss,this),this.present=i(this.present,this),this.cycle=i(this.cycle,this),this.close=i(this.close,this),this.unbind=i(this.unbind,this),this.bind=i(this.bind,this),this.render=i(this.render,this),this.settings=e.extend({},n.settings,t),this.$growls().attr("class",this.settings.location),this.render()}return n.settings={namespace:"growl",duration:3200,close:"&#215;",location:"default",style:"default",size:"medium"},n.growl=function(e){return null==e&&(e={}),this.initialize(),new n(e)},n.initialize=function(){return e("body:not(:has(#growls))").append('<div id="growls" />')},n.prototype.render=function(){var e;e=this.$growl(),this.$growls().append(e),null!=this.settings["static"]&&("undefined"!=typeof console&&null!==console&&"function"==typeof console.debug&&console.debug("DEPRECATION: static has been renamed to fix and will be removed in the next release"),this.settings.fixed=this.settings["static"]),
this.settings.fixed?this.present():this.cycle()},n.prototype.bind=function(e){return null==e&&(e=this.$growl()),e.on("contextmenu",this.close).find("."+this.settings.namespace+"-close").on("click",this.close)},n.prototype.unbind=function(e){return null==e&&(e=this.$growl()),e.off("contextmenu",this.close).find("."+this.settings.namespace+"-close").off("click",this.close)},n.prototype.close=function(e){var t;return e.preventDefault(),e.stopPropagation(),t=this.$growl(),t.stop().queue(this.dismiss).queue(this.remove)},n.prototype.cycle=function(){var e;return e=this.$growl(),e.queue(this.present).delay(this.settings.duration).queue(this.dismiss).queue(this.remove)},n.prototype.present=function(e){var t;return t=this.$growl(),this.bind(t),this.animate(t,this.settings.namespace+"-incoming","out",e)},n.prototype.dismiss=function(e){var t;return t=this.$growl(),this.unbind(t),this.animate(t,this.settings.namespace+"-outgoing","in",e)},n.prototype.remove=function(e){return this.$growl().remove(),e()},n.prototype.animate=function(e,n,i,o){var s;null==i&&(i="in"),s=t.transition(e),e["in"===i?"removeClass":"addClass"](n),e.offset().position,e["in"===i?"addClass":"removeClass"](n),null!=o&&(null!=s?e.one(s,o):o())},n.prototype.$growls=function(){return null!=this.$_growls?this.$_growls:this.$_growls=e("#growls")},n.prototype.$growl=function(){return null!=this.$_growl?this.$_growl:this.$_growl=e(this.html())},n.prototype.html=function(){return"<div class='"+this.settings.namespace+" "+this.settings.namespace+"-"+this.settings.style+" "+this.settings.namespace+"-"+this.settings.size+"'>\n  <div class='"+this.settings.namespace+"-close'>"+this.settings.close+"</div>\n  <div class='"+this.settings.namespace+"-title'>"+this.settings.title+"</div>\n  <div class='"+this.settings.namespace+"-message'>"+this.settings.message+"</div>\n</div>"},n}(),e.growl=function(e){return null==e&&(e={}),n.growl(e)},e.growl.error=function(t){var n;return null==t&&(t={}),n={title:"Error!",style:"error"},e.growl(e.extend(n,t))},e.growl.notice=function(t){var n;return null==t&&(t={}),n={title:"Notice!",style:"notice"},e.growl(e.extend(n,t))},e.growl.warning=function(t){var n;return null==t&&(t={}),n={title:"Warning!",style:"warning"},e.growl(e.extend(n,t))}}).call(this)},{}],124:[function(e,t,n){!function(e){var t=e(window);e.fn.visible=function(e,n,i){if(!(this.length<1)){var o=this.length>1?this.eq(0):this,s=o.get(0),r=t.width(),a=t.height(),i=i?i:"both",l=n===!0?s.offsetWidth*s.offsetHeight:!0;if("function"==typeof s.getBoundingClientRect){var c=s.getBoundingClientRect(),u=c.top>=0&&c.top<a,d=c.bottom>0&&c.bottom<=a,p=c.left>=0&&c.left<r,h=c.right>0&&c.right<=r,g=e?u||d:u&&d,m=e?p||h:p&&h;if("both"===i)return l&&g&&m;if("vertical"===i)return l&&g;if("horizontal"===i)return l&&m}else{var f=t.scrollTop(),v=f+a,b=t.scrollLeft(),_=b+r,y=o.offset(),w=y.top,x=w+o.height(),k=y.left,C=k+o.width(),$=e===!0?x:w,T=e===!0?w:x,S=e===!0?C:k,j=e===!0?k:C;if("both"===i)return!!l&&v>=T&&$>=f&&_>=j&&S>=b;if("vertical"===i)return!!l&&v>=T&&$>=f;if("horizontal"===i)return!!l&&_>=j&&S>=b}}}}(jQuery)},{}],125:[function(e,t,n){function i(e){if(this.options={selector:"*",mouseEvents:["click","dblclick","mousedown","mouseup","mouseenter","mouseleave","mouseover"],usePolyfillIf:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;if(null!=e.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/)){var t=parseFloat(RegExp.$1);if(11>t)return!0}}return!1}},e){var t=this;$.each(e,function(e,n){t.options[e]=n})}this.options.usePolyfillIf()&&this.register_mouse_events()}i.initialize=function(e){return null==i.singleton&&(i.singleton=new i(e)),i.singleton},i.prototype.register_mouse_events=function(){$(document).on(this.options.mouseEvents.join(" "),this.options.selector,function(e){if("none"==$(this).css("pointer-events")){var t=$(this).css("display");$(this).css("display","none");var n=document.elementFromPoint(e.clientX,e.clientY);return t?$(this).css("display",t):$(this).css("display",""),e.target=n,$(n).trigger(e),!1}return!0})}},{}],126:[function(e,t,n){!function(e,t){"use strict";var n=function(){return document.createElement("canvas").getContext("2d")},i=function(e,t){var i=new Image,o=e.src||e;"data:"!==o.substring(0,5)&&(i.crossOrigin="Anonymous"),i.onload=function(){var e=n("2d");e.drawImage(i,0,0);var o=e.getImageData(0,0,i.width,i.height);t&&t(o.data)},i.src=o},o=function(e){return["rgb(",e,")"].join("")},s=function(e){return e.map(function(e){return o(e.name)})},r=5,a=10,l={};l.colors=function(e,t){t=t||{};var n=t.exclude||[],l=t.paletteSize||a;i(e,function(i){for(var a=e.width*e.height||i.length,c={},u="",d=[],p={dominant:{name:"",count:0},palette:Array.apply(null,new Array(l)).map(Boolean).map(function(e){return{name:"0,0,0",count:0}})},h=0;a>h;)if(d[0]=i[h],d[1]=i[h+1],d[2]=i[h+2],u=d.join(","),h+=4*r,0!==i[h+3]&&(u in c?c[u]=c[u]+1:c[u]=1,-1===n.indexOf(o(u)))){var g=c[u];g>p.dominant.count?(p.dominant.name=u,p.dominant.count=g):p.palette.some(function(e){return g>e.count?(e.name=u,e.count=g,!0):void 0})}if(t.success){var m=s(p.palette);t.success({dominant:o(p.dominant.name),secondary:m[0],palette:m})}})},e.RGBaster=e.RGBaster||l}(window)},{}],127:[function(e,t,n){},{}],128:[function(e,t,n){"use strict";var i=e("ticky");t.exports=function(e,t,n){e&&i(function(){e.apply(n||null,t||[])})}},{ticky:131}],129:[function(e,t,n){"use strict";var i=e("atoa"),o=e("./debounce");t.exports=function(e,t){var n=t||{},s={};return void 0===e&&(e={}),e.on=function(t,n){return s[t]?s[t].push(n):s[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete s[t];else if(0===i)s={};else{var o=s[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=i(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var r=(s[t]||[]).slice(0);return function(){var s=i(arguments),a=this||e;if("error"===t&&n["throws"]!==!1&&!r.length)throw 1===s.length?s[0]:s;return r.forEach(function(i){n.async?o(i,s,a):i.apply(a,s),i._once&&e.off(t,i)}),e}},e}},{"./debounce":128,atoa:130}],130:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],131:[function(e,t,n){var i,o="function"==typeof setImmediate;i=o?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},t.exports=i},{}],132:[function(e,t,n){(function(e){function n(){try{var e=new i("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(t){}return!1}var i=e.CustomEvent;t.exports=n()?i:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],133:[function(e,t,n){(function(n){"use strict";function i(e,t,n,i){return e.addEventListener(t,n,i)}function o(e,t,n){return e.attachEvent("on"+t,c(e,t,n))}function s(e,t,n,i){return e.removeEventListener(t,n,i)}function r(e,t,n){var i=u(e,t,n);return i?e.detachEvent("on"+t,i):void 0}function a(e,t,n){function i(){var e;return g.createEvent?(e=g.createEvent("Event"),e.initEvent(t,!0,!0)):g.createEventObject&&(e=g.createEventObject()),e}function o(){return new p(t,{detail:n})}var s=-1===h.indexOf(t)?o():i();e.dispatchEvent?e.dispatchEvent(s):e.fireEvent("on"+t,s)}function l(e,t,i){return function(t){var o=t||n.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,i.call(e,o)}}function c(e,t,n){var i=u(e,t,n)||l(e,t,n);return v.push({wrapper:i,element:e,type:t,fn:n}),i}function u(e,t,n){var i=d(e,t,n);if(i){var o=v[i].wrapper;return v.splice(i,1),o}}function d(e,t,n){var i,o;for(i=0;i<v.length;i++)if(o=v[i],o.element===e&&o.type===t&&o.fn===n)return i}var p=e("custom-event"),h=e("./eventmap"),g=n.document,m=i,f=s,v=[];n.addEventListener||(m=o,f=r),t.exports={add:m,remove:f,fabricate:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":134,"custom-event":132}],134:[function(e,t,n){(function(e){"use strict";var n=[],i="",o=/^on/;for(i in e)o.test(i)&&n.push(i.slice(2));t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],135:[function(e,t,n){!function(e,n,i){function o(e,t,n){return e.addEventListener?void e.addEventListener(t,n,!1):void e.attachEvent("on"+t,n)}function s(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return b[e.which]?b[e.which]:_[e.which]?_[e.which]:String.fromCharCode(e.which).toLowerCase()}function r(e,t){return e.sort().join(",")===t.sort().join(",")}function a(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function l(e){return e.preventDefault?void e.preventDefault():void(e.returnValue=!1)}function c(e){return e.stopPropagation?void e.stopPropagation():void(e.cancelBubble=!0)}function u(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function d(){if(!v){v={};for(var e in b)e>95&&112>e||b.hasOwnProperty(e)&&(v[b[e]]=e)}return v}function p(e,t,n){return n||(n=d()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function h(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function g(e,t){var n,i,o,s=[];for(n=h(e),o=0;o<n.length;++o)i=n[o],w[i]&&(i=w[i]),t&&"keypress"!=t&&y[i]&&(i=y[i],s.push("shift")),u(i)&&s.push(i);return t=p(i,s,t),{key:i,modifiers:s,action:t}}function m(e,t){return null===e||e===n?!1:e===t?!0:m(e.parentNode,t)}function f(e){function t(e){e=e||{};var t,n=!1;for(t in y)e[t]?n=!0:y[t]=0;n||(k=!1)}function i(e,t,n,i,o,s){var a,l,c=[],d=n.type;if(!b._callbacks[e])return[];for("keyup"==d&&u(e)&&(t=[e]),a=0;a<b._callbacks[e].length;++a)if(l=b._callbacks[e][a],(i||!l.seq||y[l.seq]==l.level)&&d==l.action&&("keypress"==d&&!n.metaKey&&!n.ctrlKey||r(t,l.modifiers))){var p=!i&&l.combo==o,h=i&&l.seq==i&&l.level==s;(p||h)&&b._callbacks[e].splice(a,1),c.push(l)}return c}function d(e,t,n,i){b.stopCallback(t,t.target||t.srcElement,n,i)||e(t,n)===!1&&(l(t),c(t))}function p(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=s(e);if(t)return"keyup"==e.type&&w===t?void(w=!1):void b.handleKey(t,a(e),e)}function h(){clearTimeout(_),_=setTimeout(t,1e3)}function m(e,n,i,o){function r(t){return function(){k=t,++y[e],h()}}function a(n){d(i,n,e),"keyup"!==o&&(w=s(n)),setTimeout(t,10)}y[e]=0;for(var l=0;l<n.length;++l){var c=l+1===n.length,u=c?a:r(o||g(n[l+1]).action);v(n[l],u,o,e,l)}}function v(e,t,n,o,s){b._directMap[e+":"+n]=t,e=e.replace(/\s+/g," ");var r,a=e.split(" ");return a.length>1?void m(e,a,t,n):(r=g(e,n),b._callbacks[r.key]=b._callbacks[r.key]||[],i(r.key,r.modifiers,{type:r.action},o,e,s),void b._callbacks[r.key][o?"unshift":"push"]({callback:t,modifiers:r.modifiers,action:r.action,seq:o,level:s,combo:e}))}var b=this;if(e=e||n,!(b instanceof f))return new f(e);b.target=e,b._callbacks={},b._directMap={};var _,y={},w=!1,x=!1,k=!1;b._handleKey=function(e,n,o){var s,r=i(e,n,o),a={},l=0,c=!1;for(s=0;s<r.length;++s)r[s].seq&&(l=Math.max(l,r[s].level));for(s=0;s<r.length;++s)if(r[s].seq){if(r[s].level!=l)continue;c=!0,a[r[s].seq]=1,d(r[s].callback,o,r[s].combo,r[s].seq)}else c||d(r[s].callback,o,r[s].combo);var p="keypress"==o.type&&x;o.type!=k||u(e)||p||t(a),x=c&&"keydown"==o.type},b._bindMultiple=function(e,t,n){for(var i=0;i<e.length;++i)v(e[i],t,n)},o(e,"keypress",p),o(e,"keydown",p),o(e,"keyup",p)}for(var v,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},_={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},w={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},x=1;20>x;++x)b[111+x]="f"+x;for(x=0;9>=x;++x)b[x+96]=x;f.prototype.bind=function(e,t,n){var i=this;return e=e instanceof Array?e:[e],i._bindMultiple.call(i,e,t,n),i},f.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},f.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},f.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},f.prototype.stopCallback=function(e,t){var n=this;return(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:m(t,n.target)?!1:"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},f.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},f.init=function(){var e=f(n);for(var t in e)"_"!==t.charAt(0)&&(f[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},f.init(),e.Mousetrap=f,"undefined"!=typeof t&&t.exports&&(t.exports=f),"function"==typeof define&&define.amd&&define(function(){return f})}(window,document)},{}],136:[function(e,t,n){!function(e){var t={},n=e.prototype.stopCallback;e.prototype.stopCallback=function(e,i,o,s){var r=this;return r.paused?!0:t[o]||t[s]?!1:n.call(r,e,i,o)},e.prototype.bindGlobal=function(e,n,i){var o=this;if(o.bind(e,n,i),e instanceof Array)for(var s=0;s<e.length;s++)t[e[s]]=!0;else t[e]=!0},e.init()}(Mousetrap)},{}],137:[function(e,t,n){!function(e,i){"function"==typeof define&&define.amd?define(i):"object"==typeof n?t.exports=i():e.NProgress=i()}(this,function(){function e(e,t,n){return t>e?t:e>n?n:e}function t(e){return 100*(-1+e)}function n(e,n,i){var o;return o="translate3d"===c.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===c.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"},o.transition="all "+n+"ms "+i,o}function i(e,t){var n="string"==typeof e?e:r(e);return n.indexOf(" "+t+" ")>=0}function o(e,t){var n=r(e),o=n+t;i(n,t)||(e.className=o.substring(1))}function s(e,t){var n,o=r(e);i(e,t)&&(n=o.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function r(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function a(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l={};l.version="0.2.0";var c=l.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};l.configure=function(e){var t,n;for(t in e)n=e[t],void 0!==n&&e.hasOwnProperty(t)&&(c[t]=n);return this},l.status=null,l.set=function(t){var i=l.isStarted();t=e(t,c.minimum,1),l.status=1===t?null:t;var o=l.render(!i),s=o.querySelector(c.barSelector),r=c.speed,a=c.easing;return o.offsetWidth,u(function(e){""===c.positionUsing&&(c.positionUsing=l.getPositioningCSS()),d(s,n(t,r,a)),1===t?(d(o,{transition:"none",opacity:1}),o.offsetWidth,setTimeout(function(){d(o,{transition:"all "+r+"ms linear",opacity:0}),setTimeout(function(){l.remove(),e()},r)},r)):setTimeout(e,r)}),this},l.isStarted=function(){return"number"==typeof l.status},l.start=function(){l.status||l.set(0);var e=function(){setTimeout(function(){l.status&&(l.trickle(),e())},c.trickleSpeed)};return c.trickle&&e(),this},l.done=function(e){return e||l.status?l.inc(.3+.5*Math.random()).set(1):this},l.inc=function(t){var n=l.status;return n?("number"!=typeof t&&(t=(1-n)*e(Math.random()*n,.1,.95)),n=e(n+t,0,.994),l.set(n)):l.start()},l.trickle=function(){return l.inc(Math.random()*c.trickleRate)},function(){var e=0,t=0;l.promise=function(n){return n&&"resolved"!==n.state()?(0===t&&l.start(),e++,t++,n.always(function(){t--,0===t?(e=0,l.done()):l.set((e-t)/e)}),this):this}}(),l.render=function(e){if(l.isRendered())return document.getElementById("nprogress");o(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=c.template;var i,s=n.querySelector(c.barSelector),r=e?"-100":t(l.status||0),u=document.querySelector(c.parent);return d(s,{transition:"all 0 linear",transform:"translate3d("+r+"%,0,0)"}),c.showSpinner||(i=n.querySelector(c.spinnerSelector),i&&a(i)),u!=document.body&&o(u,"nprogress-custom-parent"),u.appendChild(n),n},l.remove=function(){s(document.documentElement,"nprogress-busy"),s(document.querySelector(c.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&a(e)},l.isRendered=function(){return!!document.getElementById("nprogress")},l.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var u=function(){function e(){var n=t.shift();n&&n(e)}var t=[];return function(n){t.push(n),1==t.length&&e()}}(),d=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function t(e){var t=document.body.style;if(e in t)return e;for(var n,i=o.length,s=e.charAt(0).toUpperCase()+e.slice(1);i--;)if(n=o[i]+s,n in t)return n;return e}function n(n){return n=e(n),s[n]||(s[n]=t(n))}function i(e,t,i){t=n(t),e.style[t]=i}var o=["Webkit","O","Moz","ms"],s={};return function(e,t){var n,o,s=arguments;if(2==s.length)for(n in t)o=t[n],void 0!==o&&t.hasOwnProperty(n)&&i(e,n,o);else i(e,s[1],s[2])}}();return l})},{}],138:[function(e,t,n){"use strict";t.exports=e("./src/js/adaptor/jquery")},{"./src/js/adaptor/jquery":139}],139:[function(e,t,n){"use strict";function i(e){e.fn.perfectScrollbar=function(t){return this.each(function(){if("object"==typeof t||"undefined"==typeof t){var n=t;s.get(this)||o.initialize(this,n)}else{var i=t;"update"===i?o.update(this):"destroy"===i&&o.destroy(this)}return e(this)})}}var o=e("../main"),s=e("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],i);else{var r=window.jQuery?window.jQuery:window.$;"undefined"!=typeof r&&i(r)}t.exports=i},{"../main":145,"../plugin/instances":156}],140:[function(e,t,n){"use strict";function i(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function o(e,t){var n=e.className.split(" "),i=n.indexOf(t);i>=0&&n.splice(i,1),e.className=n.join(" ")}n.add=function(e,t){e.classList?e.classList.add(t):i(e,t)},n.remove=function(e,t){e.classList?e.classList.remove(t):o(e,t)},n.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],141:[function(e,t,n){"use strict";function i(e,t){return window.getComputedStyle(e)[t]}function o(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function s(e,t){for(var n in t){var i=t[n];"number"==typeof i&&(i=i.toString()+"px"),e.style[n]=i}return e}var r={};r.e=function(e,t){var n=document.createElement(e);return n.className=t,n},r.appendTo=function(e,t){return t.appendChild(e),e},r.css=function(e,t,n){return"object"==typeof t?s(e,t):"undefined"==typeof n?i(e,t):o(e,t,n)},r.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},r.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},r.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return r.matches(e,t)})},t.exports=r},{}],142:[function(e,t,n){"use strict";var i=function(e){this.element=e,this.events={}};i.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},i.prototype.unbind=function(e,t){var n="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(i){return n&&i!==t?!0:(this.element.removeEventListener(e,i,!1),!1)},this)},i.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new i(e),this.eventElements.push(t)),t},o.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},o.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},o.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},o.prototype.once=function(e,t,n){var i=this.eventElement(e),o=function(e){i.unbind(t,o),n(e)};i.bind(t,o)},t.exports=o},{}],143:[function(e,t,n){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],144:[function(e,t,n){"use strict";var i=e("./class"),o=e("./dom");n.toInt=function(e){return parseInt(e,10)||0},n.clone=function(e){if(null===e)return null;if("object"==typeof e){var t={};for(var n in e)t[n]=this.clone(e[n]);return t}return e},n.extend=function(e,t){var n=this.clone(e);for(var i in t)n[i]=this.clone(t[i]);return n},n.isEditable=function(e){return o.matches(e,"input,[contenteditable]")||o.matches(e,"select,[contenteditable]")||o.matches(e,"textarea,[contenteditable]")||o.matches(e,"button,[contenteditable]")},n.removePsClasses=function(e){for(var t=i.list(e),n=0;n<t.length;n++){var o=t[n];0===o.indexOf("ps-")&&i.remove(e,o)}},n.outerWidth=function(e){return this.toInt(o.css(e,"width"))+this.toInt(o.css(e,"paddingLeft"))+this.toInt(o.css(e,"paddingRight"))+this.toInt(o.css(e,"borderLeftWidth"))+this.toInt(o.css(e,"borderRightWidth"))},n.startScrolling=function(e,t){i.add(e,"ps-in-scrolling"),"undefined"!=typeof t?i.add(e,"ps-"+t):(i.add(e,"ps-x"),i.add(e,"ps-y"))},n.stopScrolling=function(e,t){i.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?i.remove(e,"ps-"+t):(i.remove(e,"ps-x"),i.remove(e,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":140,"./dom":141}],145:[function(e,t,n){"use strict";var i=e("./plugin/destroy"),o=e("./plugin/initialize"),s=e("./plugin/update");t.exports={initialize:o,update:s,destroy:i}},{"./plugin/destroy":147,"./plugin/initialize":155,"./plugin/update":159}],146:[function(e,t,n){"use strict";t.exports={maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,useKeyboard:!0,useSelectionScroll:!1,wheelPropagation:!1,wheelSpeed:1}},{}],147:[function(e,t,n){"use strict";var i=e("../lib/dom"),o=e("../lib/helper"),s=e("./instances");t.exports=function(e){var t=s.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),o.removePsClasses(e),s.remove(e))}},{"../lib/dom":141,"../lib/helper":144,"./instances":156}],148:[function(e,t,n){"use strict";function i(e,t){function n(e){return e.getBoundingClientRect()}var i=window.Event.prototype.stopPropagation.bind;t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarY,"click",i),t.event.bind(t.scrollbarYRail,"click",function(i){var s=o.toInt(t.scrollbarYHeight/2),l=t.railYRatio*(i.pageY-window.pageYOffset-n(t.scrollbarYRail).top-s),c=t.railYRatio*(t.railYHeight-t.scrollbarYHeight),u=l/c;0>u?u=0:u>1&&(u=1),a(e,"top",(t.contentHeight-t.containerHeight)*u),r(e),i.stopPropagation()}),t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarX,"click",i),t.event.bind(t.scrollbarXRail,"click",function(i){var s=o.toInt(t.scrollbarXWidth/2),l=t.railXRatio*(i.pageX-window.pageXOffset-n(t.scrollbarXRail).left-s),c=t.railXRatio*(t.railXWidth-t.scrollbarXWidth),u=l/c;0>u?u=0:u>1&&(u=1),a(e,"left",(t.contentWidth-t.containerWidth)*u-t.negativeScrollAdjustment),r(e),i.stopPropagation()})}var o=e("../../lib/helper"),s=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=s.get(e);i(e,t)}},{"../../lib/helper":144,"../instances":156,"../update-geometry":157,"../update-scroll":158}],149:[function(e,t,n){"use strict";function i(e,t){function n(n){var o=i+n*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);0>o?t.scrollbarXLeft=0:o>s?t.scrollbarXLeft=s:t.scrollbarXLeft=o;var a=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;c(e,"left",a)}var i=null,o=null,a=function(t){n(t.pageX-o),l(e),t.stopPropagation(),t.preventDefault()},u=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",a)};t.event.bind(t.scrollbarX,"mousedown",function(n){o=n.pageX,i=r.toInt(s.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",a),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function o(e,t){function n(n){var o=i+n*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);0>o?t.scrollbarYTop=0:o>s?t.scrollbarYTop=s:t.scrollbarYTop=o;var a=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));c(e,"top",a)}var i=null,o=null,a=function(t){n(t.pageY-o),l(e),t.stopPropagation(),t.preventDefault()},u=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",a)};t.event.bind(t.scrollbarY,"mousedown",function(n){o=n.pageY,i=r.toInt(s.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",a),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var s=e("../../lib/dom"),r=e("../../lib/helper"),a=e("../instances"),l=e("../update-geometry"),c=e("../update-scroll");t.exports=function(e){var t=a.get(e);i(e,t),o(e,t)}},{"../../lib/dom":141,"../../lib/helper":144,"../instances":156,"../update-geometry":157,"../update-scroll":158}],150:[function(e,t,n){"use strict";function i(e,t){function n(n,i){var o=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===o&&i>0||o>=t.contentHeight-t.containerHeight&&0>i)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===i){if(!t.scrollbarXActive)return!1;if(0===s&&0>n||s>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var i=!1;t.event.bind(e,"mouseenter",function(){i=!0}),t.event.bind(e,"mouseleave",function(){i=!1});var s=!1;t.event.bind(t.ownerDocument,"keydown",function(l){if((!l.isDefaultPrevented||!l.isDefaultPrevented())&&i){var c=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(c){for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(o.isEditable(c))return}var u=0,d=0;switch(l.which){case 37:u=-30;break;case 38:d=30;break;case 39:u=30;break;case 40:d=-30;break;case 33:d=90;break;case 32:d=l.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=l.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=l.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}a(e,"top",e.scrollTop-d),a(e,"left",e.scrollLeft+u),r(e),s=n(u,d),s&&l.preventDefault()}})}var o=e("../../lib/helper"),s=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=s.get(e);i(e,t)}},{"../../lib/helper":144,"../instances":156,"../update-geometry":157,"../update-scroll":158}],151:[function(e,t,n){"use strict";function i(e,t){function n(n,i){var o=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===o&&i>0||o>=t.contentHeight-t.containerHeight&&0>i)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===i){if(!t.scrollbarXActive)return!1;if(0===s&&0>n||s>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function i(e){var t=e.deltaX,n=-1*e.deltaY;return("undefined"==typeof t||"undefined"==typeof n)&&(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),[t,n]}function o(t,n){var i=e.querySelector("textarea:hover");if(i){var o=i.scrollHeight-i.clientHeight;if(o>0&&!(0===i.scrollTop&&n>0||i.scrollTop===o&&0>n))return!0;var s=i.scrollLeft-i.clientWidth;if(s>0&&!(0===i.scrollLeft&&0>t||i.scrollLeft===s&&t>0))return!0}return!1}function a(a){var c=i(a),u=c[0],d=c[1];o(u,d)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(d?r(e,"top",e.scrollTop-d*t.settings.wheelSpeed):r(e,"top",e.scrollTop+u*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?r(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):r(e,"left",e.scrollLeft-d*t.settings.wheelSpeed),l=!0):(r(e,"top",e.scrollTop-d*t.settings.wheelSpeed),r(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),s(e),l=l||n(u,d),l&&(a.stopPropagation(),a.preventDefault()))}var l=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",a):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",a)}var o=e("../instances"),s=e("../update-geometry"),r=e("../update-scroll");t.exports=function(e){var t=o.get(e);i(e,t)}},{"../instances":156,"../update-geometry":157,"../update-scroll":158}],152:[function(e,t,n){"use strict";function i(e,t){t.event.bind(e,"scroll",function(){s(e)})}var o=e("../instances"),s=e("../update-geometry");t.exports=function(e){var t=o.get(e);i(e,t)}},{"../instances":156,"../update-geometry":157}],153:[function(e,t,n){"use strict";function i(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function i(){c||(c=setInterval(function(){return s.get(e)?(a(e,"top",e.scrollTop+u.top),a(e,"left",e.scrollLeft+u.left),void r(e)):void clearInterval(c)},50))}function l(){c&&(clearInterval(c),c=null),o.stopScrolling(e)}var c=null,u={top:0,left:0},d=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?d=!0:(d=!1,l())}),t.event.bind(window,"mouseup",function(){d&&(d=!1,l())}),t.event.bind(window,"mousemove",function(t){if(d){var n={x:t.pageX,y:t.pageY},s={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<s.left+3?(u.left=-5,o.startScrolling(e,"x")):n.x>s.right-3?(u.left=5,o.startScrolling(e,"x")):u.left=0,n.y<s.top+3?(s.top+3-n.y<5?u.top=-5:u.top=-20,o.startScrolling(e,"y")):n.y>s.bottom-3?(n.y-s.bottom+3<5?u.top=5:u.top=20,o.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?l():i()}})}var o=e("../../lib/helper"),s=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=s.get(e);i(e,t)}},{"../../lib/helper":144,"../instances":156,"../update-geometry":157,"../update-scroll":158}],154:[function(e,t,n){"use strict";function i(e,t,n,i){function a(n,i){var o=e.scrollTop,s=e.scrollLeft,r=Math.abs(n),a=Math.abs(i);if(a>r){if(0>i&&o===t.contentHeight-t.containerHeight||i>0&&0===o)return!t.settings.swipePropagation}else if(r>a&&(0>n&&s===t.contentWidth-t.containerWidth||n>0&&0===s))return!t.settings.swipePropagation;
return!0}function l(t,n){r(e,"top",e.scrollTop-n),r(e,"left",e.scrollLeft-t),s(e)}function c(){y=!0}function u(){y=!1}function d(e){return e.targetTouches?e.targetTouches[0]:e}function p(e){return e.targetTouches&&1===e.targetTouches.length?!0:e.pointerType&&"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE?!0:!1}function h(e){if(p(e)){w=!0;var t=d(e);f.pageX=t.pageX,f.pageY=t.pageY,v=(new Date).getTime(),null!==_&&clearInterval(_),e.stopPropagation()}}function g(e){if(!y&&w&&p(e)){var t=d(e),n={pageX:t.pageX,pageY:t.pageY},i=n.pageX-f.pageX,o=n.pageY-f.pageY;l(i,o),f=n;var s=(new Date).getTime(),r=s-v;r>0&&(b.x=i/r,b.y=o/r,v=s),a(i,o)&&(e.stopPropagation(),e.preventDefault())}}function m(){!y&&w&&(w=!1,clearInterval(_),_=setInterval(function(){return o.get(e)?Math.abs(b.x)<.01&&Math.abs(b.y)<.01?void clearInterval(_):(l(30*b.x,30*b.y),b.x*=.8,void(b.y*=.8)):void clearInterval(_)},10))}var f={},v=0,b={},_=null,y=!1,w=!1;n&&(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",h),t.event.bind(e,"touchmove",g),t.event.bind(e,"touchend",m)),i&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",h),t.event.bind(e,"pointermove",g),t.event.bind(e,"pointerup",m)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",h),t.event.bind(e,"MSPointerMove",g),t.event.bind(e,"MSPointerUp",m)))}var o=e("../instances"),s=e("../update-geometry"),r=e("../update-scroll");t.exports=function(e,t,n){var s=o.get(e);i(e,s,t,n)}},{"../instances":156,"../update-geometry":157,"../update-scroll":158}],155:[function(e,t,n){"use strict";var i=e("../lib/class"),o=e("../lib/helper"),s=e("./instances"),r=e("./update-geometry"),a=e("./handler/click-rail"),l=e("./handler/drag-scrollbar"),c=e("./handler/keyboard"),u=e("./handler/mouse-wheel"),d=e("./handler/native-scroll"),p=e("./handler/selection"),h=e("./handler/touch");t.exports=function(e,t){t="object"==typeof t?t:{},i.add(e,"ps-container");var n=s.add(e);n.settings=o.extend(n.settings,t),a(e),l(e),u(e),d(e),n.settings.useSelectionScroll&&p(e),(o.env.supportsTouch||o.env.supportsIePointer)&&h(e,o.env.supportsTouch,o.env.supportsIePointer),n.settings.useKeyboard&&c(e),r(e)}},{"../lib/class":140,"../lib/helper":144,"./handler/click-rail":148,"./handler/drag-scrollbar":149,"./handler/keyboard":150,"./handler/mouse-wheel":151,"./handler/native-scroll":152,"./handler/selection":153,"./handler/touch":154,"./instances":156,"./update-geometry":157}],156:[function(e,t,n){"use strict";function i(e){var t=this;t.settings=d.clone(l),t.containerWidth=null,t.containerHeight=null,t.contentWidth=null,t.contentHeight=null,t.isRtl="rtl"===a.css(e,"direction"),t.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,t.event=new c,t.ownerDocument=e.ownerDocument||document,t.scrollbarXRail=a.appendTo(a.e("div","ps-scrollbar-x-rail"),e),t.scrollbarX=a.appendTo(a.e("div","ps-scrollbar-x"),t.scrollbarXRail),t.scrollbarX.setAttribute("tabindex",0),t.scrollbarXActive=null,t.scrollbarXWidth=null,t.scrollbarXLeft=null,t.scrollbarXBottom=d.toInt(a.css(t.scrollbarXRail,"bottom")),t.isScrollbarXUsingBottom=t.scrollbarXBottom===t.scrollbarXBottom,t.scrollbarXTop=t.isScrollbarXUsingBottom?null:d.toInt(a.css(t.scrollbarXRail,"top")),t.railBorderXWidth=d.toInt(a.css(t.scrollbarXRail,"borderLeftWidth"))+d.toInt(a.css(t.scrollbarXRail,"borderRightWidth")),a.css(t.scrollbarXRail,"display","block"),t.railXMarginWidth=d.toInt(a.css(t.scrollbarXRail,"marginLeft"))+d.toInt(a.css(t.scrollbarXRail,"marginRight")),a.css(t.scrollbarXRail,"display",""),t.railXWidth=null,t.railXRatio=null,t.scrollbarYRail=a.appendTo(a.e("div","ps-scrollbar-y-rail"),e),t.scrollbarY=a.appendTo(a.e("div","ps-scrollbar-y"),t.scrollbarYRail),t.scrollbarY.setAttribute("tabindex",0),t.scrollbarYActive=null,t.scrollbarYHeight=null,t.scrollbarYTop=null,t.scrollbarYRight=d.toInt(a.css(t.scrollbarYRail,"right")),t.isScrollbarYUsingRight=t.scrollbarYRight===t.scrollbarYRight,t.scrollbarYLeft=t.isScrollbarYUsingRight?null:d.toInt(a.css(t.scrollbarYRail,"left")),t.scrollbarYOuterWidth=t.isRtl?d.outerWidth(t.scrollbarY):null,t.railBorderYWidth=d.toInt(a.css(t.scrollbarYRail,"borderTopWidth"))+d.toInt(a.css(t.scrollbarYRail,"borderBottomWidth")),a.css(t.scrollbarYRail,"display","block"),t.railYMarginHeight=d.toInt(a.css(t.scrollbarYRail,"marginTop"))+d.toInt(a.css(t.scrollbarYRail,"marginBottom")),a.css(t.scrollbarYRail,"display",""),t.railYHeight=null,t.railYRatio=null}function o(e){return"undefined"==typeof e.dataset?e.getAttribute("data-ps-id"):e.dataset.psId}function s(e,t){"undefined"==typeof e.dataset?e.setAttribute("data-ps-id",t):e.dataset.psId=t}function r(e){"undefined"==typeof e.dataset?e.removeAttribute("data-ps-id"):delete e.dataset.psId}var a=e("../lib/dom"),l=e("./default-setting"),c=e("../lib/event-manager"),u=e("../lib/guid"),d=e("../lib/helper"),p={};n.add=function(e){var t=u();return s(e,t),p[t]=new i(e),p[t]},n.remove=function(e){delete p[o(e)],r(e)},n.get=function(e){return p[o(e)]}},{"../lib/dom":141,"../lib/event-manager":142,"../lib/guid":143,"../lib/helper":144,"./default-setting":146}],157:[function(e,t,n){"use strict";function i(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function o(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,r.css(t.scrollbarXRail,n);var i={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?i.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:i.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?i.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:i.left=t.scrollbarYLeft+e.scrollLeft,r.css(t.scrollbarYRail,i),r.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),r.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var s=e("../lib/class"),r=e("../lib/dom"),a=e("../lib/helper"),l=e("./instances"),c=e("./update-scroll");t.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=r.queryChildren(e,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(e){r.remove(e)}),r.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=r.queryChildren(e,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(e){r.remove(e)}),r.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=i(t,a.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=a.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=i(t,a.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=a.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),o(e,t),t.scrollbarXActive?s.add(e,"ps-active-x"):(s.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,c(e,"left",0)),t.scrollbarYActive?s.add(e,"ps-active-y"):(s.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,c(e,"top",0))}},{"../lib/class":140,"../lib/dom":141,"../lib/helper":144,"./instances":156,"./update-scroll":158}],158:[function(e,t,n){"use strict";var i,o,s=e("./instances"),r=document.createEvent("Event"),a=document.createEvent("Event"),l=document.createEvent("Event"),c=document.createEvent("Event"),u=document.createEvent("Event"),d=document.createEvent("Event"),p=document.createEvent("Event"),h=document.createEvent("Event"),g=document.createEvent("Event"),m=document.createEvent("Event");r.initEvent("ps-scroll-up",!0,!0),a.initEvent("ps-scroll-down",!0,!0),l.initEvent("ps-scroll-left",!0,!0),c.initEvent("ps-scroll-right",!0,!0),u.initEvent("ps-scroll-y",!0,!0),d.initEvent("ps-scroll-x",!0,!0),p.initEvent("ps-x-reach-start",!0,!0),h.initEvent("ps-x-reach-end",!0,!0),g.initEvent("ps-y-reach-start",!0,!0),m.initEvent("ps-y-reach-end",!0,!0),t.exports=function(e,t,n){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";if("top"===t&&0>=n)return e.scrollTop=0,void e.dispatchEvent(g);if("left"===t&&0>=n)return e.scrollLeft=0,void e.dispatchEvent(p);var f=s.get(e);return"top"===t&&n>=f.contentHeight-f.containerHeight?(e.scrollTop=f.contentHeight-f.containerHeight,void e.dispatchEvent(m)):"left"===t&&n>=f.contentWidth-f.containerWidth?(e.scrollLeft=f.contentWidth-f.containerWidth,void e.dispatchEvent(h)):(i||(i=e.scrollTop),o||(o=e.scrollLeft),"top"===t&&i>n&&e.dispatchEvent(r),"top"===t&&n>i&&e.dispatchEvent(a),"left"===t&&o>n&&e.dispatchEvent(l),"left"===t&&n>o&&e.dispatchEvent(c),"top"===t&&(e.scrollTop=i=n,e.dispatchEvent(u)),void("left"===t&&(e.scrollLeft=o=n,e.dispatchEvent(d))))}},{"./instances":156}],159:[function(e,t,n){"use strict";var i=e("../lib/dom"),o=e("../lib/helper"),s=e("./instances"),r=e("./update-geometry"),a=e("./update-scroll");t.exports=function(e){var t=s.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=o.toInt(i.css(t.scrollbarXRail,"marginLeft"))+o.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=o.toInt(i.css(t.scrollbarYRail,"marginTop"))+o.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),r(e),a(e,"top",e.scrollTop),a(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":141,"../lib/helper":144,"./instances":156,"./update-geometry":157,"./update-scroll":158}]},{},[4])(4)});